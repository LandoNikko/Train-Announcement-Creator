(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var bi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Hc={exports:{}},js={},Wc={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pi=Symbol.for("react.element"),hh=Symbol.for("react.portal"),ph=Symbol.for("react.fragment"),mh=Symbol.for("react.strict_mode"),gh=Symbol.for("react.profiler"),yh=Symbol.for("react.provider"),xh=Symbol.for("react.context"),vh=Symbol.for("react.forward_ref"),kh=Symbol.for("react.suspense"),wh=Symbol.for("react.memo"),bh=Symbol.for("react.lazy"),fu=Symbol.iterator;function Sh(e){return e===null||typeof e!="object"?null:(e=fu&&e[fu]||e["@@iterator"],typeof e=="function"?e:null)}var Gc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vc=Object.assign,Yc={};function _a(e,t,n){this.props=e,this.context=t,this.refs=Yc,this.updater=n||Gc}_a.prototype.isReactComponent={};_a.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};_a.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Kc(){}Kc.prototype=_a.prototype;function xl(e,t,n){this.props=e,this.context=t,this.refs=Yc,this.updater=n||Gc}var vl=xl.prototype=new Kc;vl.constructor=xl;Vc(vl,_a.prototype);vl.isPureReactComponent=!0;var hu=Array.isArray,Zc=Object.prototype.hasOwnProperty,kl={current:null},Xc={key:!0,ref:!0,__self:!0,__source:!0};function Qc(e,t,n){var r,a={},i=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)Zc.call(t,r)&&!Xc.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var u=Array(l),p=0;p<l;p++)u[p]=arguments[p+2];a.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:pi,type:e,key:i,ref:s,props:a,_owner:kl.current}}function _h(e,t){return{$$typeof:pi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function wl(e){return typeof e=="object"&&e!==null&&e.$$typeof===pi}function Nh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var pu=/\/+/g;function Ws(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Nh(""+e.key):t.toString(36)}function Hi(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case pi:case hh:s=!0}}if(s)return s=e,a=a(s),e=r===""?"."+Ws(s,0):r,hu(a)?(n="",e!=null&&(n=e.replace(pu,"$&/")+"/"),Hi(a,t,n,"",function(p){return p})):a!=null&&(wl(a)&&(a=_h(a,n+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(pu,"$&/")+"/")+e)),t.push(a)),1;if(s=0,r=r===""?".":r+":",hu(e))for(var l=0;l<e.length;l++){i=e[l];var u=r+Ws(i,l);s+=Hi(i,t,n,u,a)}else if(u=Sh(e),typeof u=="function")for(e=u.call(e),l=0;!(i=e.next()).done;)i=i.value,u=r+Ws(i,l++),s+=Hi(i,t,n,u,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Si(e,t,n){if(e==null)return e;var r=[],a=0;return Hi(e,r,"","",function(i){return t.call(n,i,a++)}),r}function Ch(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ft={current:null},Wi={transition:null},jh={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:Wi,ReactCurrentOwner:kl};function Jc(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:Si,forEach:function(e,t,n){Si(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Si(e,function(){t++}),t},toArray:function(e){return Si(e,function(t){return t})||[]},only:function(e){if(!wl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ze.Component=_a;ze.Fragment=ph;ze.Profiler=gh;ze.PureComponent=xl;ze.StrictMode=mh;ze.Suspense=kh;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jh;ze.act=Jc;ze.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Vc({},e.props),a=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=kl.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)Zc.call(t,u)&&!Xc.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var p=0;p<u;p++)l[p]=arguments[p+2];r.children=l}return{$$typeof:pi,type:e.type,key:a,ref:i,props:r,_owner:s}};ze.createContext=function(e){return e={$$typeof:xh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yh,_context:e},e.Consumer=e};ze.createElement=Qc;ze.createFactory=function(e){var t=Qc.bind(null,e);return t.type=e,t};ze.createRef=function(){return{current:null}};ze.forwardRef=function(e){return{$$typeof:vh,render:e}};ze.isValidElement=wl;ze.lazy=function(e){return{$$typeof:bh,_payload:{_status:-1,_result:e},_init:Ch}};ze.memo=function(e,t){return{$$typeof:wh,type:e,compare:t===void 0?null:t}};ze.startTransition=function(e){var t=Wi.transition;Wi.transition={};try{e()}finally{Wi.transition=t}};ze.unstable_act=Jc;ze.useCallback=function(e,t){return Ft.current.useCallback(e,t)};ze.useContext=function(e){return Ft.current.useContext(e)};ze.useDebugValue=function(){};ze.useDeferredValue=function(e){return Ft.current.useDeferredValue(e)};ze.useEffect=function(e,t){return Ft.current.useEffect(e,t)};ze.useId=function(){return Ft.current.useId()};ze.useImperativeHandle=function(e,t,n){return Ft.current.useImperativeHandle(e,t,n)};ze.useInsertionEffect=function(e,t){return Ft.current.useInsertionEffect(e,t)};ze.useLayoutEffect=function(e,t){return Ft.current.useLayoutEffect(e,t)};ze.useMemo=function(e,t){return Ft.current.useMemo(e,t)};ze.useReducer=function(e,t,n){return Ft.current.useReducer(e,t,n)};ze.useRef=function(e){return Ft.current.useRef(e)};ze.useState=function(e){return Ft.current.useState(e)};ze.useSyncExternalStore=function(e,t,n){return Ft.current.useSyncExternalStore(e,t,n)};ze.useTransition=function(){return Ft.current.useTransition()};ze.version="18.3.1";Wc.exports=ze;var O=Wc.exports;const Eh=Bc(O);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ph=O,zh=Symbol.for("react.element"),Mh=Symbol.for("react.fragment"),Th=Object.prototype.hasOwnProperty,Lh=Ph.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ah={key:!0,ref:!0,__self:!0,__source:!0};function qc(e,t,n){var r,a={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)Th.call(t,r)&&!Ah.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:zh,type:e,key:i,ref:s,props:a,_owner:Lh.current}}js.Fragment=Mh;js.jsx=qc;js.jsxs=qc;Hc.exports=js;var o=Hc.exports,ko={},ed={exports:{}},an={},td={exports:{}},nd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,U){var X=D.length;D.push(U);e:for(;0<X;){var T=X-1>>>1,L=D[T];if(0<a(L,U))D[T]=U,D[X]=L,X=T;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var U=D[0],X=D.pop();if(X!==U){D[0]=X;e:for(var T=0,L=D.length,Y=L>>>1;T<Y;){var ee=2*(T+1)-1,te=D[ee],pe=ee+1,ke=D[pe];if(0>a(te,X))pe<L&&0>a(ke,te)?(D[T]=ke,D[pe]=X,T=pe):(D[T]=te,D[ee]=X,T=ee);else if(pe<L&&0>a(ke,X))D[T]=ke,D[pe]=X,T=pe;else break e}}return U}function a(D,U){var X=D.sortIndex-U.sortIndex;return X!==0?X:D.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var u=[],p=[],v=1,k=null,y=3,g=!1,w=!1,m=!1,b=typeof setTimeout=="function"?setTimeout:null,c=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(D){for(var U=n(p);U!==null;){if(U.callback===null)r(p);else if(U.startTime<=D)r(p),U.sortIndex=U.expirationTime,t(u,U);else break;U=n(p)}}function N(D){if(m=!1,x(D),!w)if(n(u)!==null)w=!0,K(j);else{var U=n(p);U!==null&&F(N,U.startTime-D)}}function j(D,U){w=!1,m&&(m=!1,c(H),H=-1),g=!0;var X=y;try{for(x(U),k=n(u);k!==null&&(!(k.expirationTime>U)||D&&!le());){var T=k.callback;if(typeof T=="function"){k.callback=null,y=k.priorityLevel;var L=T(k.expirationTime<=U);U=e.unstable_now(),typeof L=="function"?k.callback=L:k===n(u)&&r(u),x(U)}else r(u);k=n(u)}if(k!==null)var Y=!0;else{var ee=n(p);ee!==null&&F(N,ee.startTime-U),Y=!1}return Y}finally{k=null,y=X,g=!1}}var M=!1,A=null,H=-1,$=5,W=-1;function le(){return!(e.unstable_now()-W<$)}function C(){if(A!==null){var D=e.unstable_now();W=D;var U=!0;try{U=A(!0,D)}finally{U?z():(M=!1,A=null)}}else M=!1}var z;if(typeof d=="function")z=function(){d(C)};else if(typeof MessageChannel<"u"){var h=new MessageChannel,V=h.port2;h.port1.onmessage=C,z=function(){V.postMessage(null)}}else z=function(){b(C,0)};function K(D){A=D,M||(M=!0,z())}function F(D,U){H=b(function(){D(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){w||g||(w=!0,K(j))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(D){switch(y){case 1:case 2:case 3:var U=3;break;default:U=y}var X=y;y=U;try{return D()}finally{y=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,U){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var X=y;y=D;try{return U()}finally{y=X}},e.unstable_scheduleCallback=function(D,U,X){var T=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?T+X:T):X=T,D){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=X+L,D={id:v++,callback:U,priorityLevel:D,startTime:X,expirationTime:L,sortIndex:-1},X>T?(D.sortIndex=X,t(p,D),n(u)===null&&D===n(p)&&(m?(c(H),H=-1):m=!0,F(N,X-T))):(D.sortIndex=L,t(u,D),w||g||(w=!0,K(j))),D},e.unstable_shouldYield=le,e.unstable_wrapCallback=function(D){var U=y;return function(){var X=y;y=U;try{return D.apply(this,arguments)}finally{y=X}}}})(nd);td.exports=nd;var Dh=td.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rh=O,rn=Dh;function ue(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rd=new Set,Qa={};function Gr(e,t){ya(e,t),ya(e+"Capture",t)}function ya(e,t){for(Qa[e]=t,e=0;e<t.length;e++)rd.add(t[e])}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wo=Object.prototype.hasOwnProperty,Ih=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mu={},gu={};function Oh(e){return wo.call(gu,e)?!0:wo.call(mu,e)?!1:Ih.test(e)?gu[e]=!0:(mu[e]=!0,!1)}function Fh(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $h(e,t,n,r){if(t===null||typeof t>"u"||Fh(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $t(e,t,n,r,a,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){jt[e]=new $t(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];jt[t]=new $t(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){jt[e]=new $t(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){jt[e]=new $t(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){jt[e]=new $t(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){jt[e]=new $t(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){jt[e]=new $t(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){jt[e]=new $t(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){jt[e]=new $t(e,5,!1,e.toLowerCase(),null,!1,!1)});var bl=/[\-:]([a-z])/g;function Sl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(bl,Sl);jt[t]=new $t(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(bl,Sl);jt[t]=new $t(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(bl,Sl);jt[t]=new $t(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){jt[e]=new $t(e,1,!1,e.toLowerCase(),null,!1,!1)});jt.xlinkHref=new $t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){jt[e]=new $t(e,1,!1,e.toLowerCase(),null,!0,!0)});function _l(e,t,n,r){var a=jt.hasOwnProperty(t)?jt[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($h(t,n,a,r)&&(n=null),r||a===null?Oh(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var nr=Rh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_i=Symbol.for("react.element"),qr=Symbol.for("react.portal"),ea=Symbol.for("react.fragment"),Nl=Symbol.for("react.strict_mode"),bo=Symbol.for("react.profiler"),ad=Symbol.for("react.provider"),id=Symbol.for("react.context"),Cl=Symbol.for("react.forward_ref"),So=Symbol.for("react.suspense"),_o=Symbol.for("react.suspense_list"),jl=Symbol.for("react.memo"),sr=Symbol.for("react.lazy"),sd=Symbol.for("react.offscreen"),yu=Symbol.iterator;function ja(e){return e===null||typeof e!="object"?null:(e=yu&&e[yu]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,Gs;function Ia(e){if(Gs===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Gs=t&&t[1]||""}return`
`+Gs+e}var Vs=!1;function Ys(e,t){if(!e||Vs)return"";Vs=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var r=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){r=p}e.call(t.prototype)}else{try{throw Error()}catch(p){r=p}e()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var a=p.stack.split(`
`),i=r.stack.split(`
`),s=a.length-1,l=i.length-1;1<=s&&0<=l&&a[s]!==i[l];)l--;for(;1<=s&&0<=l;s--,l--)if(a[s]!==i[l]){if(s!==1||l!==1)do if(s--,l--,0>l||a[s]!==i[l]){var u=`
`+a[s].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=s&&0<=l);break}}}finally{Vs=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ia(e):""}function Uh(e){switch(e.tag){case 5:return Ia(e.type);case 16:return Ia("Lazy");case 13:return Ia("Suspense");case 19:return Ia("SuspenseList");case 0:case 2:case 15:return e=Ys(e.type,!1),e;case 11:return e=Ys(e.type.render,!1),e;case 1:return e=Ys(e.type,!0),e;default:return""}}function No(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ea:return"Fragment";case qr:return"Portal";case bo:return"Profiler";case Nl:return"StrictMode";case So:return"Suspense";case _o:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case id:return(e.displayName||"Context")+".Consumer";case ad:return(e._context.displayName||"Context")+".Provider";case Cl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case jl:return t=e.displayName||null,t!==null?t:No(e.type)||"Memo";case sr:t=e._payload,e=e._init;try{return No(e(t))}catch{}}return null}function Bh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return No(t);case 8:return t===Nl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function wr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function od(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Hh(e){var t=od(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ni(e){e._valueTracker||(e._valueTracker=Hh(e))}function ld(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=od(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ts(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Co(e,t){var n=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function xu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=wr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ud(e,t){t=t.checked,t!=null&&_l(e,"checked",t,!1)}function jo(e,t){ud(e,t);var n=wr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Eo(e,t.type,n):t.hasOwnProperty("defaultValue")&&Eo(e,t.type,wr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function vu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Eo(e,t,n){(t!=="number"||ts(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Oa=Array.isArray;function da(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+wr(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Po(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ue(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ku(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ue(92));if(Oa(n)){if(1<n.length)throw Error(ue(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:wr(n)}}function cd(e,t){var n=wr(t.value),r=wr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function wu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function dd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?dd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ci,fd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ci=Ci||document.createElement("div"),Ci.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ci.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ja(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ba={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wh=["Webkit","ms","Moz","O"];Object.keys(Ba).forEach(function(e){Wh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ba[t]=Ba[e]})});function hd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ba.hasOwnProperty(e)&&Ba[e]?(""+t).trim():t+"px"}function pd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=hd(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var Gh=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mo(e,t){if(t){if(Gh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ue(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ue(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ue(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ue(62))}}function To(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lo=null;function El(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ao=null,fa=null,ha=null;function bu(e){if(e=yi(e)){if(typeof Ao!="function")throw Error(ue(280));var t=e.stateNode;t&&(t=Ts(t),Ao(e.stateNode,e.type,t))}}function md(e){fa?ha?ha.push(e):ha=[e]:fa=e}function gd(){if(fa){var e=fa,t=ha;if(ha=fa=null,bu(e),t)for(e=0;e<t.length;e++)bu(t[e])}}function yd(e,t){return e(t)}function xd(){}var Ks=!1;function vd(e,t,n){if(Ks)return e(t,n);Ks=!0;try{return yd(e,t,n)}finally{Ks=!1,(fa!==null||ha!==null)&&(xd(),gd())}}function qa(e,t){var n=e.stateNode;if(n===null)return null;var r=Ts(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ue(231,t,typeof n));return n}var Do=!1;if(Jn)try{var Ea={};Object.defineProperty(Ea,"passive",{get:function(){Do=!0}}),window.addEventListener("test",Ea,Ea),window.removeEventListener("test",Ea,Ea)}catch{Do=!1}function Vh(e,t,n,r,a,i,s,l,u){var p=Array.prototype.slice.call(arguments,3);try{t.apply(n,p)}catch(v){this.onError(v)}}var Ha=!1,ns=null,rs=!1,Ro=null,Yh={onError:function(e){Ha=!0,ns=e}};function Kh(e,t,n,r,a,i,s,l,u){Ha=!1,ns=null,Vh.apply(Yh,arguments)}function Zh(e,t,n,r,a,i,s,l,u){if(Kh.apply(this,arguments),Ha){if(Ha){var p=ns;Ha=!1,ns=null}else throw Error(ue(198));rs||(rs=!0,Ro=p)}}function Vr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function kd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Su(e){if(Vr(e)!==e)throw Error(ue(188))}function Xh(e){var t=e.alternate;if(!t){if(t=Vr(e),t===null)throw Error(ue(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Su(a),e;if(i===r)return Su(a),t;i=i.sibling}throw Error(ue(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s)throw Error(ue(189))}}if(n.alternate!==r)throw Error(ue(190))}if(n.tag!==3)throw Error(ue(188));return n.stateNode.current===n?e:t}function wd(e){return e=Xh(e),e!==null?bd(e):null}function bd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=bd(e);if(t!==null)return t;e=e.sibling}return null}var Sd=rn.unstable_scheduleCallback,_u=rn.unstable_cancelCallback,Qh=rn.unstable_shouldYield,Jh=rn.unstable_requestPaint,rt=rn.unstable_now,qh=rn.unstable_getCurrentPriorityLevel,Pl=rn.unstable_ImmediatePriority,_d=rn.unstable_UserBlockingPriority,as=rn.unstable_NormalPriority,ep=rn.unstable_LowPriority,Nd=rn.unstable_IdlePriority,Es=null,Fn=null;function tp(e){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(Es,e,void 0,(e.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:ap,np=Math.log,rp=Math.LN2;function ap(e){return e>>>=0,e===0?32:31-(np(e)/rp|0)|0}var ji=64,Ei=4194304;function Fa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function is(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,s=n&268435455;if(s!==0){var l=s&~a;l!==0?r=Fa(l):(i&=s,i!==0&&(r=Fa(i)))}else s=n&~a,s!==0?r=Fa(s):i!==0&&(r=Fa(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-En(t),a=1<<n,r|=e[n],t&=~a;return r}function ip(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sp(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-En(i),l=1<<s,u=a[s];u===-1?(!(l&n)||l&r)&&(a[s]=ip(l,t)):u<=t&&(e.expiredLanes|=l),i&=~l}}function Io(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Cd(){var e=ji;return ji<<=1,!(ji&4194240)&&(ji=64),e}function Zs(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-En(t),e[t]=n}function op(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-En(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function zl(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-En(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Oe=0;function jd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ed,Ml,Pd,zd,Md,Oo=!1,Pi=[],hr=null,pr=null,mr=null,ei=new Map,ti=new Map,lr=[],lp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nu(e,t){switch(e){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":ei.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ti.delete(t.pointerId)}}function Pa(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=yi(t),t!==null&&Ml(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function up(e,t,n,r,a){switch(t){case"focusin":return hr=Pa(hr,e,t,n,r,a),!0;case"dragenter":return pr=Pa(pr,e,t,n,r,a),!0;case"mouseover":return mr=Pa(mr,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return ei.set(i,Pa(ei.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,ti.set(i,Pa(ti.get(i)||null,e,t,n,r,a)),!0}return!1}function Td(e){var t=Ar(e.target);if(t!==null){var n=Vr(t);if(n!==null){if(t=n.tag,t===13){if(t=kd(n),t!==null){e.blockedOn=t,Md(e.priority,function(){Pd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Fo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Lo=r,n.target.dispatchEvent(r),Lo=null}else return t=yi(n),t!==null&&Ml(t),e.blockedOn=n,!1;t.shift()}return!0}function Cu(e,t,n){Gi(e)&&n.delete(t)}function cp(){Oo=!1,hr!==null&&Gi(hr)&&(hr=null),pr!==null&&Gi(pr)&&(pr=null),mr!==null&&Gi(mr)&&(mr=null),ei.forEach(Cu),ti.forEach(Cu)}function za(e,t){e.blockedOn===t&&(e.blockedOn=null,Oo||(Oo=!0,rn.unstable_scheduleCallback(rn.unstable_NormalPriority,cp)))}function ni(e){function t(a){return za(a,e)}if(0<Pi.length){za(Pi[0],e);for(var n=1;n<Pi.length;n++){var r=Pi[n];r.blockedOn===e&&(r.blockedOn=null)}}for(hr!==null&&za(hr,e),pr!==null&&za(pr,e),mr!==null&&za(mr,e),ei.forEach(t),ti.forEach(t),n=0;n<lr.length;n++)r=lr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<lr.length&&(n=lr[0],n.blockedOn===null);)Td(n),n.blockedOn===null&&lr.shift()}var pa=nr.ReactCurrentBatchConfig,ss=!0;function dp(e,t,n,r){var a=Oe,i=pa.transition;pa.transition=null;try{Oe=1,Tl(e,t,n,r)}finally{Oe=a,pa.transition=i}}function fp(e,t,n,r){var a=Oe,i=pa.transition;pa.transition=null;try{Oe=4,Tl(e,t,n,r)}finally{Oe=a,pa.transition=i}}function Tl(e,t,n,r){if(ss){var a=Fo(e,t,n,r);if(a===null)io(e,t,r,os,n),Nu(e,r);else if(up(a,e,t,n,r))r.stopPropagation();else if(Nu(e,r),t&4&&-1<lp.indexOf(e)){for(;a!==null;){var i=yi(a);if(i!==null&&Ed(i),i=Fo(e,t,n,r),i===null&&io(e,t,r,os,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else io(e,t,r,null,n)}}var os=null;function Fo(e,t,n,r){if(os=null,e=El(r),e=Ar(e),e!==null)if(t=Vr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=kd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return os=e,null}function Ld(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qh()){case Pl:return 1;case _d:return 4;case as:case ep:return 16;case Nd:return 536870912;default:return 16}default:return 16}}var cr=null,Ll=null,Vi=null;function Ad(){if(Vi)return Vi;var e,t=Ll,n=t.length,r,a="value"in cr?cr.value:cr.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===a[i-r];r++);return Vi=a.slice(e,1<r?1-r:void 0)}function Yi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zi(){return!0}function ju(){return!1}function sn(e){function t(n,r,a,i,s){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?zi:ju,this.isPropagationStopped=ju,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),t}var Na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Al=sn(Na),gi=Ze({},Na,{view:0,detail:0}),hp=sn(gi),Xs,Qs,Ma,Ps=Ze({},gi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ma&&(Ma&&e.type==="mousemove"?(Xs=e.screenX-Ma.screenX,Qs=e.screenY-Ma.screenY):Qs=Xs=0,Ma=e),Xs)},movementY:function(e){return"movementY"in e?e.movementY:Qs}}),Eu=sn(Ps),pp=Ze({},Ps,{dataTransfer:0}),mp=sn(pp),gp=Ze({},gi,{relatedTarget:0}),Js=sn(gp),yp=Ze({},Na,{animationName:0,elapsedTime:0,pseudoElement:0}),xp=sn(yp),vp=Ze({},Na,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kp=sn(vp),wp=Ze({},Na,{data:0}),Pu=sn(wp),bp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_p={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Np(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_p[e])?!!t[e]:!1}function Dl(){return Np}var Cp=Ze({},gi,{key:function(e){if(e.key){var t=bp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Sp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dl,charCode:function(e){return e.type==="keypress"?Yi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jp=sn(Cp),Ep=Ze({},Ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zu=sn(Ep),Pp=Ze({},gi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dl}),zp=sn(Pp),Mp=Ze({},Na,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tp=sn(Mp),Lp=Ze({},Ps,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ap=sn(Lp),Dp=[9,13,27,32],Rl=Jn&&"CompositionEvent"in window,Wa=null;Jn&&"documentMode"in document&&(Wa=document.documentMode);var Rp=Jn&&"TextEvent"in window&&!Wa,Dd=Jn&&(!Rl||Wa&&8<Wa&&11>=Wa),Mu=" ",Tu=!1;function Rd(e,t){switch(e){case"keyup":return Dp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Id(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ta=!1;function Ip(e,t){switch(e){case"compositionend":return Id(t);case"keypress":return t.which!==32?null:(Tu=!0,Mu);case"textInput":return e=t.data,e===Mu&&Tu?null:e;default:return null}}function Op(e,t){if(ta)return e==="compositionend"||!Rl&&Rd(e,t)?(e=Ad(),Vi=Ll=cr=null,ta=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dd&&t.locale!=="ko"?null:t.data;default:return null}}var Fp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fp[e.type]:t==="textarea"}function Od(e,t,n,r){md(r),t=ls(t,"onChange"),0<t.length&&(n=new Al("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ga=null,ri=null;function $p(e){Zd(e,0)}function zs(e){var t=aa(e);if(ld(t))return e}function Up(e,t){if(e==="change")return t}var Fd=!1;if(Jn){var qs;if(Jn){var eo="oninput"in document;if(!eo){var Au=document.createElement("div");Au.setAttribute("oninput","return;"),eo=typeof Au.oninput=="function"}qs=eo}else qs=!1;Fd=qs&&(!document.documentMode||9<document.documentMode)}function Du(){Ga&&(Ga.detachEvent("onpropertychange",$d),ri=Ga=null)}function $d(e){if(e.propertyName==="value"&&zs(ri)){var t=[];Od(t,ri,e,El(e)),vd($p,t)}}function Bp(e,t,n){e==="focusin"?(Du(),Ga=t,ri=n,Ga.attachEvent("onpropertychange",$d)):e==="focusout"&&Du()}function Hp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zs(ri)}function Wp(e,t){if(e==="click")return zs(t)}function Gp(e,t){if(e==="input"||e==="change")return zs(t)}function Vp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zn=typeof Object.is=="function"?Object.is:Vp;function ai(e,t){if(zn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!wo.call(t,a)||!zn(e[a],t[a]))return!1}return!0}function Ru(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Iu(e,t){var n=Ru(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ru(n)}}function Ud(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ud(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Bd(){for(var e=window,t=ts();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ts(e.document)}return t}function Il(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Yp(e){var t=Bd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ud(n.ownerDocument.documentElement,n)){if(r!==null&&Il(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=Iu(n,i);var s=Iu(n,r);a&&s&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Kp=Jn&&"documentMode"in document&&11>=document.documentMode,na=null,$o=null,Va=null,Uo=!1;function Ou(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uo||na==null||na!==ts(r)||(r=na,"selectionStart"in r&&Il(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Va&&ai(Va,r)||(Va=r,r=ls($o,"onSelect"),0<r.length&&(t=new Al("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=na)))}function Mi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ra={animationend:Mi("Animation","AnimationEnd"),animationiteration:Mi("Animation","AnimationIteration"),animationstart:Mi("Animation","AnimationStart"),transitionend:Mi("Transition","TransitionEnd")},to={},Hd={};Jn&&(Hd=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function Ms(e){if(to[e])return to[e];if(!ra[e])return e;var t=ra[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Hd)return to[e]=t[n];return e}var Wd=Ms("animationend"),Gd=Ms("animationiteration"),Vd=Ms("animationstart"),Yd=Ms("transitionend"),Kd=new Map,Fu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){Kd.set(e,t),Gr(t,[e])}for(var no=0;no<Fu.length;no++){var ro=Fu[no],Zp=ro.toLowerCase(),Xp=ro[0].toUpperCase()+ro.slice(1);Sr(Zp,"on"+Xp)}Sr(Wd,"onAnimationEnd");Sr(Gd,"onAnimationIteration");Sr(Vd,"onAnimationStart");Sr("dblclick","onDoubleClick");Sr("focusin","onFocus");Sr("focusout","onBlur");Sr(Yd,"onTransitionEnd");ya("onMouseEnter",["mouseout","mouseover"]);ya("onMouseLeave",["mouseout","mouseover"]);ya("onPointerEnter",["pointerout","pointerover"]);ya("onPointerLeave",["pointerout","pointerover"]);Gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qp=new Set("cancel close invalid load scroll toggle".split(" ").concat($a));function $u(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Zh(r,t,void 0,e),e.currentTarget=null}function Zd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var l=r[s],u=l.instance,p=l.currentTarget;if(l=l.listener,u!==i&&a.isPropagationStopped())break e;$u(a,l,p),i=u}else for(s=0;s<r.length;s++){if(l=r[s],u=l.instance,p=l.currentTarget,l=l.listener,u!==i&&a.isPropagationStopped())break e;$u(a,l,p),i=u}}}if(rs)throw e=Ro,rs=!1,Ro=null,e}function We(e,t){var n=t[Vo];n===void 0&&(n=t[Vo]=new Set);var r=e+"__bubble";n.has(r)||(Xd(t,e,2,!1),n.add(r))}function ao(e,t,n){var r=0;t&&(r|=4),Xd(n,e,r,t)}var Ti="_reactListening"+Math.random().toString(36).slice(2);function ii(e){if(!e[Ti]){e[Ti]=!0,rd.forEach(function(n){n!=="selectionchange"&&(Qp.has(n)||ao(n,!1,e),ao(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ti]||(t[Ti]=!0,ao("selectionchange",!1,t))}}function Xd(e,t,n,r){switch(Ld(t)){case 1:var a=dp;break;case 4:a=fp;break;default:a=Tl}n=a.bind(null,t,n,e),a=void 0,!Do||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function io(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===a||u.nodeType===8&&u.parentNode===a))return;s=s.return}for(;l!==null;){if(s=Ar(l),s===null)return;if(u=s.tag,u===5||u===6){r=i=s;continue e}l=l.parentNode}}r=r.return}vd(function(){var p=i,v=El(n),k=[];e:{var y=Kd.get(e);if(y!==void 0){var g=Al,w=e;switch(e){case"keypress":if(Yi(n)===0)break e;case"keydown":case"keyup":g=jp;break;case"focusin":w="focus",g=Js;break;case"focusout":w="blur",g=Js;break;case"beforeblur":case"afterblur":g=Js;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Eu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=mp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=zp;break;case Wd:case Gd:case Vd:g=xp;break;case Yd:g=Tp;break;case"scroll":g=hp;break;case"wheel":g=Ap;break;case"copy":case"cut":case"paste":g=kp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=zu}var m=(t&4)!==0,b=!m&&e==="scroll",c=m?y!==null?y+"Capture":null:y;m=[];for(var d=p,x;d!==null;){x=d;var N=x.stateNode;if(x.tag===5&&N!==null&&(x=N,c!==null&&(N=qa(d,c),N!=null&&m.push(si(d,N,x)))),b)break;d=d.return}0<m.length&&(y=new g(y,w,null,n,v),k.push({event:y,listeners:m}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",y&&n!==Lo&&(w=n.relatedTarget||n.fromElement)&&(Ar(w)||w[qn]))break e;if((g||y)&&(y=v.window===v?v:(y=v.ownerDocument)?y.defaultView||y.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=p,w=w?Ar(w):null,w!==null&&(b=Vr(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=p),g!==w)){if(m=Eu,N="onMouseLeave",c="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(m=zu,N="onPointerLeave",c="onPointerEnter",d="pointer"),b=g==null?y:aa(g),x=w==null?y:aa(w),y=new m(N,d+"leave",g,n,v),y.target=b,y.relatedTarget=x,N=null,Ar(v)===p&&(m=new m(c,d+"enter",w,n,v),m.target=x,m.relatedTarget=b,N=m),b=N,g&&w)t:{for(m=g,c=w,d=0,x=m;x;x=Xr(x))d++;for(x=0,N=c;N;N=Xr(N))x++;for(;0<d-x;)m=Xr(m),d--;for(;0<x-d;)c=Xr(c),x--;for(;d--;){if(m===c||c!==null&&m===c.alternate)break t;m=Xr(m),c=Xr(c)}m=null}else m=null;g!==null&&Uu(k,y,g,m,!1),w!==null&&b!==null&&Uu(k,b,w,m,!0)}}e:{if(y=p?aa(p):window,g=y.nodeName&&y.nodeName.toLowerCase(),g==="select"||g==="input"&&y.type==="file")var j=Up;else if(Lu(y))if(Fd)j=Gp;else{j=Hp;var M=Bp}else(g=y.nodeName)&&g.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(j=Wp);if(j&&(j=j(e,p))){Od(k,j,n,v);break e}M&&M(e,y,p),e==="focusout"&&(M=y._wrapperState)&&M.controlled&&y.type==="number"&&Eo(y,"number",y.value)}switch(M=p?aa(p):window,e){case"focusin":(Lu(M)||M.contentEditable==="true")&&(na=M,$o=p,Va=null);break;case"focusout":Va=$o=na=null;break;case"mousedown":Uo=!0;break;case"contextmenu":case"mouseup":case"dragend":Uo=!1,Ou(k,n,v);break;case"selectionchange":if(Kp)break;case"keydown":case"keyup":Ou(k,n,v)}var A;if(Rl)e:{switch(e){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else ta?Rd(e,n)&&(H="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(H="onCompositionStart");H&&(Dd&&n.locale!=="ko"&&(ta||H!=="onCompositionStart"?H==="onCompositionEnd"&&ta&&(A=Ad()):(cr=v,Ll="value"in cr?cr.value:cr.textContent,ta=!0)),M=ls(p,H),0<M.length&&(H=new Pu(H,e,null,n,v),k.push({event:H,listeners:M}),A?H.data=A:(A=Id(n),A!==null&&(H.data=A)))),(A=Rp?Ip(e,n):Op(e,n))&&(p=ls(p,"onBeforeInput"),0<p.length&&(v=new Pu("onBeforeInput","beforeinput",null,n,v),k.push({event:v,listeners:p}),v.data=A))}Zd(k,t)})}function si(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ls(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=qa(e,n),i!=null&&r.unshift(si(e,i,a)),i=qa(e,t),i!=null&&r.push(si(e,i,a))),e=e.return}return r}function Xr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Uu(e,t,n,r,a){for(var i=t._reactName,s=[];n!==null&&n!==r;){var l=n,u=l.alternate,p=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&p!==null&&(l=p,a?(u=qa(n,i),u!=null&&s.unshift(si(n,u,l))):a||(u=qa(n,i),u!=null&&s.push(si(n,u,l)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var Jp=/\r\n?/g,qp=/\u0000|\uFFFD/g;function Bu(e){return(typeof e=="string"?e:""+e).replace(Jp,`
`).replace(qp,"")}function Li(e,t,n){if(t=Bu(t),Bu(e)!==t&&n)throw Error(ue(425))}function us(){}var Bo=null,Ho=null;function Wo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Go=typeof setTimeout=="function"?setTimeout:void 0,e0=typeof clearTimeout=="function"?clearTimeout:void 0,Hu=typeof Promise=="function"?Promise:void 0,t0=typeof queueMicrotask=="function"?queueMicrotask:typeof Hu<"u"?function(e){return Hu.resolve(null).then(e).catch(n0)}:Go;function n0(e){setTimeout(function(){throw e})}function so(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),ni(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);ni(t)}function gr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Wu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ca=Math.random().toString(36).slice(2),On="__reactFiber$"+Ca,oi="__reactProps$"+Ca,qn="__reactContainer$"+Ca,Vo="__reactEvents$"+Ca,r0="__reactListeners$"+Ca,a0="__reactHandles$"+Ca;function Ar(e){var t=e[On];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qn]||n[On]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Wu(e);e!==null;){if(n=e[On])return n;e=Wu(e)}return t}e=n,n=e.parentNode}return null}function yi(e){return e=e[On]||e[qn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function aa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ue(33))}function Ts(e){return e[oi]||null}var Yo=[],ia=-1;function _r(e){return{current:e}}function Ge(e){0>ia||(e.current=Yo[ia],Yo[ia]=null,ia--)}function He(e,t){ia++,Yo[ia]=e.current,e.current=t}var br={},Lt=_r(br),Kt=_r(!1),$r=br;function xa(e,t){var n=e.type.contextTypes;if(!n)return br;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Zt(e){return e=e.childContextTypes,e!=null}function cs(){Ge(Kt),Ge(Lt)}function Gu(e,t,n){if(Lt.current!==br)throw Error(ue(168));He(Lt,t),He(Kt,n)}function Qd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(ue(108,Bh(e)||"Unknown",a));return Ze({},n,r)}function ds(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||br,$r=Lt.current,He(Lt,e),He(Kt,Kt.current),!0}function Vu(e,t,n){var r=e.stateNode;if(!r)throw Error(ue(169));n?(e=Qd(e,t,$r),r.__reactInternalMemoizedMergedChildContext=e,Ge(Kt),Ge(Lt),He(Lt,e)):Ge(Kt),He(Kt,n)}var Yn=null,Ls=!1,oo=!1;function Jd(e){Yn===null?Yn=[e]:Yn.push(e)}function i0(e){Ls=!0,Jd(e)}function Nr(){if(!oo&&Yn!==null){oo=!0;var e=0,t=Oe;try{var n=Yn;for(Oe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Yn=null,Ls=!1}catch(a){throw Yn!==null&&(Yn=Yn.slice(e+1)),Sd(Pl,Nr),a}finally{Oe=t,oo=!1}}return null}var sa=[],oa=0,fs=null,hs=0,hn=[],pn=0,Ur=null,Kn=1,Zn="";function zr(e,t){sa[oa++]=hs,sa[oa++]=fs,fs=e,hs=t}function qd(e,t,n){hn[pn++]=Kn,hn[pn++]=Zn,hn[pn++]=Ur,Ur=e;var r=Kn;e=Zn;var a=32-En(r)-1;r&=~(1<<a),n+=1;var i=32-En(t)+a;if(30<i){var s=a-a%5;i=(r&(1<<s)-1).toString(32),r>>=s,a-=s,Kn=1<<32-En(t)+a|n<<a|r,Zn=i+e}else Kn=1<<i|n<<a|r,Zn=e}function Ol(e){e.return!==null&&(zr(e,1),qd(e,1,0))}function Fl(e){for(;e===fs;)fs=sa[--oa],sa[oa]=null,hs=sa[--oa],sa[oa]=null;for(;e===Ur;)Ur=hn[--pn],hn[pn]=null,Zn=hn[--pn],hn[pn]=null,Kn=hn[--pn],hn[pn]=null}var nn=null,tn=null,Ve=!1,Cn=null;function ef(e,t){var n=mn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Yu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,nn=e,tn=gr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,nn=e,tn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ur!==null?{id:Kn,overflow:Zn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=mn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,nn=e,tn=null,!0):!1;default:return!1}}function Ko(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Zo(e){if(Ve){var t=tn;if(t){var n=t;if(!Yu(e,t)){if(Ko(e))throw Error(ue(418));t=gr(n.nextSibling);var r=nn;t&&Yu(e,t)?ef(r,n):(e.flags=e.flags&-4097|2,Ve=!1,nn=e)}}else{if(Ko(e))throw Error(ue(418));e.flags=e.flags&-4097|2,Ve=!1,nn=e}}}function Ku(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;nn=e}function Ai(e){if(e!==nn)return!1;if(!Ve)return Ku(e),Ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Wo(e.type,e.memoizedProps)),t&&(t=tn)){if(Ko(e))throw tf(),Error(ue(418));for(;t;)ef(e,t),t=gr(t.nextSibling)}if(Ku(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ue(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){tn=gr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}tn=null}}else tn=nn?gr(e.stateNode.nextSibling):null;return!0}function tf(){for(var e=tn;e;)e=gr(e.nextSibling)}function va(){tn=nn=null,Ve=!1}function $l(e){Cn===null?Cn=[e]:Cn.push(e)}var s0=nr.ReactCurrentBatchConfig;function Ta(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ue(309));var r=n.stateNode}if(!r)throw Error(ue(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var l=a.refs;s===null?delete l[i]:l[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(ue(284));if(!n._owner)throw Error(ue(290,e))}return e}function Di(e,t){throw e=Object.prototype.toString.call(t),Error(ue(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zu(e){var t=e._init;return t(e._payload)}function nf(e){function t(c,d){if(e){var x=c.deletions;x===null?(c.deletions=[d],c.flags|=16):x.push(d)}}function n(c,d){if(!e)return null;for(;d!==null;)t(c,d),d=d.sibling;return null}function r(c,d){for(c=new Map;d!==null;)d.key!==null?c.set(d.key,d):c.set(d.index,d),d=d.sibling;return c}function a(c,d){return c=kr(c,d),c.index=0,c.sibling=null,c}function i(c,d,x){return c.index=x,e?(x=c.alternate,x!==null?(x=x.index,x<d?(c.flags|=2,d):x):(c.flags|=2,d)):(c.flags|=1048576,d)}function s(c){return e&&c.alternate===null&&(c.flags|=2),c}function l(c,d,x,N){return d===null||d.tag!==6?(d=mo(x,c.mode,N),d.return=c,d):(d=a(d,x),d.return=c,d)}function u(c,d,x,N){var j=x.type;return j===ea?v(c,d,x.props.children,N,x.key):d!==null&&(d.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===sr&&Zu(j)===d.type)?(N=a(d,x.props),N.ref=Ta(c,d,x),N.return=c,N):(N=es(x.type,x.key,x.props,null,c.mode,N),N.ref=Ta(c,d,x),N.return=c,N)}function p(c,d,x,N){return d===null||d.tag!==4||d.stateNode.containerInfo!==x.containerInfo||d.stateNode.implementation!==x.implementation?(d=go(x,c.mode,N),d.return=c,d):(d=a(d,x.children||[]),d.return=c,d)}function v(c,d,x,N,j){return d===null||d.tag!==7?(d=Or(x,c.mode,N,j),d.return=c,d):(d=a(d,x),d.return=c,d)}function k(c,d,x){if(typeof d=="string"&&d!==""||typeof d=="number")return d=mo(""+d,c.mode,x),d.return=c,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case _i:return x=es(d.type,d.key,d.props,null,c.mode,x),x.ref=Ta(c,null,d),x.return=c,x;case qr:return d=go(d,c.mode,x),d.return=c,d;case sr:var N=d._init;return k(c,N(d._payload),x)}if(Oa(d)||ja(d))return d=Or(d,c.mode,x,null),d.return=c,d;Di(c,d)}return null}function y(c,d,x,N){var j=d!==null?d.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return j!==null?null:l(c,d,""+x,N);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case _i:return x.key===j?u(c,d,x,N):null;case qr:return x.key===j?p(c,d,x,N):null;case sr:return j=x._init,y(c,d,j(x._payload),N)}if(Oa(x)||ja(x))return j!==null?null:v(c,d,x,N,null);Di(c,x)}return null}function g(c,d,x,N,j){if(typeof N=="string"&&N!==""||typeof N=="number")return c=c.get(x)||null,l(d,c,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case _i:return c=c.get(N.key===null?x:N.key)||null,u(d,c,N,j);case qr:return c=c.get(N.key===null?x:N.key)||null,p(d,c,N,j);case sr:var M=N._init;return g(c,d,x,M(N._payload),j)}if(Oa(N)||ja(N))return c=c.get(x)||null,v(d,c,N,j,null);Di(d,N)}return null}function w(c,d,x,N){for(var j=null,M=null,A=d,H=d=0,$=null;A!==null&&H<x.length;H++){A.index>H?($=A,A=null):$=A.sibling;var W=y(c,A,x[H],N);if(W===null){A===null&&(A=$);break}e&&A&&W.alternate===null&&t(c,A),d=i(W,d,H),M===null?j=W:M.sibling=W,M=W,A=$}if(H===x.length)return n(c,A),Ve&&zr(c,H),j;if(A===null){for(;H<x.length;H++)A=k(c,x[H],N),A!==null&&(d=i(A,d,H),M===null?j=A:M.sibling=A,M=A);return Ve&&zr(c,H),j}for(A=r(c,A);H<x.length;H++)$=g(A,c,H,x[H],N),$!==null&&(e&&$.alternate!==null&&A.delete($.key===null?H:$.key),d=i($,d,H),M===null?j=$:M.sibling=$,M=$);return e&&A.forEach(function(le){return t(c,le)}),Ve&&zr(c,H),j}function m(c,d,x,N){var j=ja(x);if(typeof j!="function")throw Error(ue(150));if(x=j.call(x),x==null)throw Error(ue(151));for(var M=j=null,A=d,H=d=0,$=null,W=x.next();A!==null&&!W.done;H++,W=x.next()){A.index>H?($=A,A=null):$=A.sibling;var le=y(c,A,W.value,N);if(le===null){A===null&&(A=$);break}e&&A&&le.alternate===null&&t(c,A),d=i(le,d,H),M===null?j=le:M.sibling=le,M=le,A=$}if(W.done)return n(c,A),Ve&&zr(c,H),j;if(A===null){for(;!W.done;H++,W=x.next())W=k(c,W.value,N),W!==null&&(d=i(W,d,H),M===null?j=W:M.sibling=W,M=W);return Ve&&zr(c,H),j}for(A=r(c,A);!W.done;H++,W=x.next())W=g(A,c,H,W.value,N),W!==null&&(e&&W.alternate!==null&&A.delete(W.key===null?H:W.key),d=i(W,d,H),M===null?j=W:M.sibling=W,M=W);return e&&A.forEach(function(C){return t(c,C)}),Ve&&zr(c,H),j}function b(c,d,x,N){if(typeof x=="object"&&x!==null&&x.type===ea&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case _i:e:{for(var j=x.key,M=d;M!==null;){if(M.key===j){if(j=x.type,j===ea){if(M.tag===7){n(c,M.sibling),d=a(M,x.props.children),d.return=c,c=d;break e}}else if(M.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===sr&&Zu(j)===M.type){n(c,M.sibling),d=a(M,x.props),d.ref=Ta(c,M,x),d.return=c,c=d;break e}n(c,M);break}else t(c,M);M=M.sibling}x.type===ea?(d=Or(x.props.children,c.mode,N,x.key),d.return=c,c=d):(N=es(x.type,x.key,x.props,null,c.mode,N),N.ref=Ta(c,d,x),N.return=c,c=N)}return s(c);case qr:e:{for(M=x.key;d!==null;){if(d.key===M)if(d.tag===4&&d.stateNode.containerInfo===x.containerInfo&&d.stateNode.implementation===x.implementation){n(c,d.sibling),d=a(d,x.children||[]),d.return=c,c=d;break e}else{n(c,d);break}else t(c,d);d=d.sibling}d=go(x,c.mode,N),d.return=c,c=d}return s(c);case sr:return M=x._init,b(c,d,M(x._payload),N)}if(Oa(x))return w(c,d,x,N);if(ja(x))return m(c,d,x,N);Di(c,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,d!==null&&d.tag===6?(n(c,d.sibling),d=a(d,x),d.return=c,c=d):(n(c,d),d=mo(x,c.mode,N),d.return=c,c=d),s(c)):n(c,d)}return b}var ka=nf(!0),rf=nf(!1),ps=_r(null),ms=null,la=null,Ul=null;function Bl(){Ul=la=ms=null}function Hl(e){var t=ps.current;Ge(ps),e._currentValue=t}function Xo(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ma(e,t){ms=e,Ul=la=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Yt=!0),e.firstContext=null)}function yn(e){var t=e._currentValue;if(Ul!==e)if(e={context:e,memoizedValue:t,next:null},la===null){if(ms===null)throw Error(ue(308));la=e,ms.dependencies={lanes:0,firstContext:e}}else la=la.next=e;return t}var Dr=null;function Wl(e){Dr===null?Dr=[e]:Dr.push(e)}function af(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,Wl(t)):(n.next=a.next,a.next=n),t.interleaved=n,er(e,r)}function er(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var or=!1;function Gl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function yr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,De&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,er(e,n)}return a=r.interleaved,a===null?(t.next=t,Wl(r)):(t.next=a.next,a.next=t),r.interleaved=t,er(e,n)}function Ki(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,zl(e,n)}}function Xu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function gs(e,t,n,r){var a=e.updateQueue;or=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var u=l,p=u.next;u.next=null,s===null?i=p:s.next=p,s=u;var v=e.alternate;v!==null&&(v=v.updateQueue,l=v.lastBaseUpdate,l!==s&&(l===null?v.firstBaseUpdate=p:l.next=p,v.lastBaseUpdate=u))}if(i!==null){var k=a.baseState;s=0,v=p=u=null,l=i;do{var y=l.lane,g=l.eventTime;if((r&y)===y){v!==null&&(v=v.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,m=l;switch(y=t,g=n,m.tag){case 1:if(w=m.payload,typeof w=="function"){k=w.call(g,k,y);break e}k=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=m.payload,y=typeof w=="function"?w.call(g,k,y):w,y==null)break e;k=Ze({},k,y);break e;case 2:or=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,y=a.effects,y===null?a.effects=[l]:y.push(l))}else g={eventTime:g,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},v===null?(p=v=g,u=k):v=v.next=g,s|=y;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;y=l,l=y.next,y.next=null,a.lastBaseUpdate=y,a.shared.pending=null}}while(!0);if(v===null&&(u=k),a.baseState=u,a.firstBaseUpdate=p,a.lastBaseUpdate=v,t=a.shared.interleaved,t!==null){a=t;do s|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Hr|=s,e.lanes=s,e.memoizedState=k}}function Qu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(ue(191,a));a.call(r)}}}var xi={},$n=_r(xi),li=_r(xi),ui=_r(xi);function Rr(e){if(e===xi)throw Error(ue(174));return e}function Vl(e,t){switch(He(ui,t),He(li,e),He($n,xi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:zo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=zo(t,e)}Ge($n),He($n,t)}function wa(){Ge($n),Ge(li),Ge(ui)}function of(e){Rr(ui.current);var t=Rr($n.current),n=zo(t,e.type);t!==n&&(He(li,e),He($n,n))}function Yl(e){li.current===e&&(Ge($n),Ge(li))}var Ye=_r(0);function ys(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function Kl(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var Zi=nr.ReactCurrentDispatcher,uo=nr.ReactCurrentBatchConfig,Br=0,Ke=null,ct=null,xt=null,xs=!1,Ya=!1,ci=0,o0=0;function zt(){throw Error(ue(321))}function Zl(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!zn(e[n],t[n]))return!1;return!0}function Xl(e,t,n,r,a,i){if(Br=i,Ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zi.current=e===null||e.memoizedState===null?d0:f0,e=n(r,a),Ya){i=0;do{if(Ya=!1,ci=0,25<=i)throw Error(ue(301));i+=1,xt=ct=null,t.updateQueue=null,Zi.current=h0,e=n(r,a)}while(Ya)}if(Zi.current=vs,t=ct!==null&&ct.next!==null,Br=0,xt=ct=Ke=null,xs=!1,t)throw Error(ue(300));return e}function Ql(){var e=ci!==0;return ci=0,e}function In(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Ke.memoizedState=xt=e:xt=xt.next=e,xt}function xn(){if(ct===null){var e=Ke.alternate;e=e!==null?e.memoizedState:null}else e=ct.next;var t=xt===null?Ke.memoizedState:xt.next;if(t!==null)xt=t,ct=e;else{if(e===null)throw Error(ue(310));ct=e,e={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},xt===null?Ke.memoizedState=xt=e:xt=xt.next=e}return xt}function di(e,t){return typeof t=="function"?t(e):t}function co(e){var t=xn(),n=t.queue;if(n===null)throw Error(ue(311));n.lastRenderedReducer=e;var r=ct,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var s=a.next;a.next=i.next,i.next=s}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var l=s=null,u=null,p=i;do{var v=p.lane;if((Br&v)===v)u!==null&&(u=u.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:e(r,p.action);else{var k={lane:v,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};u===null?(l=u=k,s=r):u=u.next=k,Ke.lanes|=v,Hr|=v}p=p.next}while(p!==null&&p!==i);u===null?s=r:u.next=l,zn(r,t.memoizedState)||(Yt=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,Ke.lanes|=i,Hr|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function fo(e){var t=xn(),n=t.queue;if(n===null)throw Error(ue(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do i=e(i,s.action),s=s.next;while(s!==a);zn(i,t.memoizedState)||(Yt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function lf(){}function uf(e,t){var n=Ke,r=xn(),a=t(),i=!zn(r.memoizedState,a);if(i&&(r.memoizedState=a,Yt=!0),r=r.queue,Jl(ff.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||xt!==null&&xt.memoizedState.tag&1){if(n.flags|=2048,fi(9,df.bind(null,n,r,a,t),void 0,null),vt===null)throw Error(ue(349));Br&30||cf(n,t,a)}return a}function cf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ke.updateQueue,t===null?(t={lastEffect:null,stores:null},Ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function df(e,t,n,r){t.value=n,t.getSnapshot=r,hf(t)&&pf(e)}function ff(e,t,n){return n(function(){hf(t)&&pf(e)})}function hf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zn(e,n)}catch{return!0}}function pf(e){var t=er(e,1);t!==null&&Pn(t,e,1,-1)}function Ju(e){var t=In();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:e},t.queue=e,e=e.dispatch=c0.bind(null,Ke,e),[t.memoizedState,e]}function fi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ke.updateQueue,t===null?(t={lastEffect:null,stores:null},Ke.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function mf(){return xn().memoizedState}function Xi(e,t,n,r){var a=In();Ke.flags|=e,a.memoizedState=fi(1|t,n,void 0,r===void 0?null:r)}function As(e,t,n,r){var a=xn();r=r===void 0?null:r;var i=void 0;if(ct!==null){var s=ct.memoizedState;if(i=s.destroy,r!==null&&Zl(r,s.deps)){a.memoizedState=fi(t,n,i,r);return}}Ke.flags|=e,a.memoizedState=fi(1|t,n,i,r)}function qu(e,t){return Xi(8390656,8,e,t)}function Jl(e,t){return As(2048,8,e,t)}function gf(e,t){return As(4,2,e,t)}function yf(e,t){return As(4,4,e,t)}function xf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vf(e,t,n){return n=n!=null?n.concat([e]):null,As(4,4,xf.bind(null,t,e),n)}function ql(){}function kf(e,t){var n=xn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Zl(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function wf(e,t){var n=xn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Zl(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function bf(e,t,n){return Br&21?(zn(n,t)||(n=Cd(),Ke.lanes|=n,Hr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Yt=!0),e.memoizedState=n)}function l0(e,t){var n=Oe;Oe=n!==0&&4>n?n:4,e(!0);var r=uo.transition;uo.transition={};try{e(!1),t()}finally{Oe=n,uo.transition=r}}function Sf(){return xn().memoizedState}function u0(e,t,n){var r=vr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_f(e))Nf(t,n);else if(n=af(e,t,n,r),n!==null){var a=Ot();Pn(n,e,r,a),Cf(n,t,r)}}function c0(e,t,n){var r=vr(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_f(e))Nf(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,l=i(s,n);if(a.hasEagerState=!0,a.eagerState=l,zn(l,s)){var u=t.interleaved;u===null?(a.next=a,Wl(t)):(a.next=u.next,u.next=a),t.interleaved=a;return}}catch{}finally{}n=af(e,t,a,r),n!==null&&(a=Ot(),Pn(n,e,r,a),Cf(n,t,r))}}function _f(e){var t=e.alternate;return e===Ke||t!==null&&t===Ke}function Nf(e,t){Ya=xs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Cf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,zl(e,n)}}var vs={readContext:yn,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},d0={readContext:yn,useCallback:function(e,t){return In().memoizedState=[e,t===void 0?null:t],e},useContext:yn,useEffect:qu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Xi(4194308,4,xf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Xi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xi(4,2,e,t)},useMemo:function(e,t){var n=In();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=In();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=u0.bind(null,Ke,e),[r.memoizedState,e]},useRef:function(e){var t=In();return e={current:e},t.memoizedState=e},useState:Ju,useDebugValue:ql,useDeferredValue:function(e){return In().memoizedState=e},useTransition:function(){var e=Ju(!1),t=e[0];return e=l0.bind(null,e[1]),In().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ke,a=In();if(Ve){if(n===void 0)throw Error(ue(407));n=n()}else{if(n=t(),vt===null)throw Error(ue(349));Br&30||cf(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,qu(ff.bind(null,r,i,e),[e]),r.flags|=2048,fi(9,df.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=In(),t=vt.identifierPrefix;if(Ve){var n=Zn,r=Kn;n=(r&~(1<<32-En(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ci++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=o0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},f0={readContext:yn,useCallback:kf,useContext:yn,useEffect:Jl,useImperativeHandle:vf,useInsertionEffect:gf,useLayoutEffect:yf,useMemo:wf,useReducer:co,useRef:mf,useState:function(){return co(di)},useDebugValue:ql,useDeferredValue:function(e){var t=xn();return bf(t,ct.memoizedState,e)},useTransition:function(){var e=co(di)[0],t=xn().memoizedState;return[e,t]},useMutableSource:lf,useSyncExternalStore:uf,useId:Sf,unstable_isNewReconciler:!1},h0={readContext:yn,useCallback:kf,useContext:yn,useEffect:Jl,useImperativeHandle:vf,useInsertionEffect:gf,useLayoutEffect:yf,useMemo:wf,useReducer:fo,useRef:mf,useState:function(){return fo(di)},useDebugValue:ql,useDeferredValue:function(e){var t=xn();return ct===null?t.memoizedState=e:bf(t,ct.memoizedState,e)},useTransition:function(){var e=fo(di)[0],t=xn().memoizedState;return[e,t]},useMutableSource:lf,useSyncExternalStore:uf,useId:Sf,unstable_isNewReconciler:!1};function _n(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Qo(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ds={isMounted:function(e){return(e=e._reactInternals)?Vr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ot(),a=vr(e),i=Qn(r,a);i.payload=t,n!=null&&(i.callback=n),t=yr(e,i,a),t!==null&&(Pn(t,e,a,r),Ki(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ot(),a=vr(e),i=Qn(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=yr(e,i,a),t!==null&&(Pn(t,e,a,r),Ki(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ot(),r=vr(e),a=Qn(n,r);a.tag=2,t!=null&&(a.callback=t),t=yr(e,a,r),t!==null&&(Pn(t,e,r,n),Ki(t,e,r))}};function ec(e,t,n,r,a,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,s):t.prototype&&t.prototype.isPureReactComponent?!ai(n,r)||!ai(a,i):!0}function jf(e,t,n){var r=!1,a=br,i=t.contextType;return typeof i=="object"&&i!==null?i=yn(i):(a=Zt(t)?$r:Lt.current,r=t.contextTypes,i=(r=r!=null)?xa(e,a):br),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ds,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function tc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ds.enqueueReplaceState(t,t.state,null)}function Jo(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Gl(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=yn(i):(i=Zt(t)?$r:Lt.current,a.context=xa(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Qo(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Ds.enqueueReplaceState(a,a.state,null),gs(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ba(e,t){try{var n="",r=t;do n+=Uh(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function ho(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function qo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var p0=typeof WeakMap=="function"?WeakMap:Map;function Ef(e,t,n){n=Qn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ws||(ws=!0,ul=r),qo(e,t)},n}function Pf(e,t,n){n=Qn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){qo(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){qo(e,t),typeof r!="function"&&(xr===null?xr=new Set([this]):xr.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function nc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new p0;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=E0.bind(null,e,t,n),t.then(e,e))}function rc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ac(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qn(-1,1),t.tag=2,yr(n,t,1))),n.lanes|=1),e)}var m0=nr.ReactCurrentOwner,Yt=!1;function It(e,t,n,r){t.child=e===null?rf(t,null,n,r):ka(t,e.child,n,r)}function ic(e,t,n,r,a){n=n.render;var i=t.ref;return ma(t,a),r=Xl(e,t,n,r,i,a),n=Ql(),e!==null&&!Yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,tr(e,t,a)):(Ve&&n&&Ol(t),t.flags|=1,It(e,t,r,a),t.child)}function sc(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!ou(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,zf(e,t,i,r,a)):(e=es(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:ai,n(s,r)&&e.ref===t.ref)return tr(e,t,a)}return t.flags|=1,e=kr(i,r),e.ref=t.ref,e.return=t,t.child=e}function zf(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(ai(i,r)&&e.ref===t.ref)if(Yt=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&(Yt=!0);else return t.lanes=e.lanes,tr(e,t,a)}return el(e,t,n,r,a)}function Mf(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(ca,en),en|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,He(ca,en),en|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,He(ca,en),en|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,He(ca,en),en|=r;return It(e,t,a,n),t.child}function Tf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function el(e,t,n,r,a){var i=Zt(n)?$r:Lt.current;return i=xa(t,i),ma(t,a),n=Xl(e,t,n,r,i,a),r=Ql(),e!==null&&!Yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,tr(e,t,a)):(Ve&&r&&Ol(t),t.flags|=1,It(e,t,n,a),t.child)}function oc(e,t,n,r,a){if(Zt(n)){var i=!0;ds(t)}else i=!1;if(ma(t,a),t.stateNode===null)Qi(e,t),jf(t,n,r),Jo(t,n,r,a),r=!0;else if(e===null){var s=t.stateNode,l=t.memoizedProps;s.props=l;var u=s.context,p=n.contextType;typeof p=="object"&&p!==null?p=yn(p):(p=Zt(n)?$r:Lt.current,p=xa(t,p));var v=n.getDerivedStateFromProps,k=typeof v=="function"||typeof s.getSnapshotBeforeUpdate=="function";k||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||u!==p)&&tc(t,s,r,p),or=!1;var y=t.memoizedState;s.state=y,gs(t,r,s,a),u=t.memoizedState,l!==r||y!==u||Kt.current||or?(typeof v=="function"&&(Qo(t,n,v,r),u=t.memoizedState),(l=or||ec(t,n,l,r,y,u,p))?(k||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),s.props=r,s.state=u,s.context=p,r=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,sf(e,t),l=t.memoizedProps,p=t.type===t.elementType?l:_n(t.type,l),s.props=p,k=t.pendingProps,y=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=yn(u):(u=Zt(n)?$r:Lt.current,u=xa(t,u));var g=n.getDerivedStateFromProps;(v=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==k||y!==u)&&tc(t,s,r,u),or=!1,y=t.memoizedState,s.state=y,gs(t,r,s,a);var w=t.memoizedState;l!==k||y!==w||Kt.current||or?(typeof g=="function"&&(Qo(t,n,g,r),w=t.memoizedState),(p=or||ec(t,n,p,r,y,w,u)||!1)?(v||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,w,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,w,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),s.props=r,s.state=w,s.context=u,r=p):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),r=!1)}return tl(e,t,n,r,i,a)}function tl(e,t,n,r,a,i){Tf(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return a&&Vu(t,n,!1),tr(e,t,i);r=t.stateNode,m0.current=t;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=ka(t,e.child,null,i),t.child=ka(t,null,l,i)):It(e,t,l,i),t.memoizedState=r.state,a&&Vu(t,n,!0),t.child}function Lf(e){var t=e.stateNode;t.pendingContext?Gu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Gu(e,t.context,!1),Vl(e,t.containerInfo)}function lc(e,t,n,r,a){return va(),$l(a),t.flags|=256,It(e,t,n,r),t.child}var nl={dehydrated:null,treeContext:null,retryLane:0};function rl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Af(e,t,n){var r=t.pendingProps,a=Ye.current,i=!1,s=(t.flags&128)!==0,l;if((l=s)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),He(Ye,a&1),e===null)return Zo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,i?(r=t.mode,i=t.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=Os(s,r,0,null),e=Or(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=rl(n),t.memoizedState=nl,e):eu(t,s));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return g0(e,t,s,r,l,a,n);if(i){i=r.fallback,s=t.mode,a=e.child,l=a.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=kr(a,u),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=kr(l,i):(i=Or(i,s,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,s=e.child.memoizedState,s=s===null?rl(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~n,t.memoizedState=nl,r}return i=e.child,e=i.sibling,r=kr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function eu(e,t){return t=Os({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ri(e,t,n,r){return r!==null&&$l(r),ka(t,e.child,null,n),e=eu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function g0(e,t,n,r,a,i,s){if(n)return t.flags&256?(t.flags&=-257,r=ho(Error(ue(422))),Ri(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Os({mode:"visible",children:r.children},a,0,null),i=Or(i,a,s,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&ka(t,e.child,null,s),t.child.memoizedState=rl(s),t.memoizedState=nl,i);if(!(t.mode&1))return Ri(e,t,s,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(ue(419)),r=ho(i,r,void 0),Ri(e,t,s,r)}if(l=(s&e.childLanes)!==0,Yt||l){if(r=vt,r!==null){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|s)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,er(e,a),Pn(r,e,a,-1))}return su(),r=ho(Error(ue(421))),Ri(e,t,s,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=P0.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,tn=gr(a.nextSibling),nn=t,Ve=!0,Cn=null,e!==null&&(hn[pn++]=Kn,hn[pn++]=Zn,hn[pn++]=Ur,Kn=e.id,Zn=e.overflow,Ur=t),t=eu(t,r.children),t.flags|=4096,t)}function uc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Xo(e.return,t,n)}function po(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Df(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(It(e,t,r.children,n),r=Ye.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uc(e,n,t);else if(e.tag===19)uc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(He(Ye,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&ys(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),po(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&ys(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}po(t,!0,n,null,i);break;case"together":po(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function tr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Hr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ue(153));if(t.child!==null){for(e=t.child,n=kr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=kr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function y0(e,t,n){switch(t.tag){case 3:Lf(t),va();break;case 5:of(t);break;case 1:Zt(t.type)&&ds(t);break;case 4:Vl(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;He(ps,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(He(Ye,Ye.current&1),t.flags|=128,null):n&t.child.childLanes?Af(e,t,n):(He(Ye,Ye.current&1),e=tr(e,t,n),e!==null?e.sibling:null);He(Ye,Ye.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Df(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),He(Ye,Ye.current),r)break;return null;case 22:case 23:return t.lanes=0,Mf(e,t,n)}return tr(e,t,n)}var Rf,al,If,Of;Rf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};al=function(){};If=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Rr($n.current);var i=null;switch(n){case"input":a=Co(e,a),r=Co(e,r),i=[];break;case"select":a=Ze({},a,{value:void 0}),r=Ze({},r,{value:void 0}),i=[];break;case"textarea":a=Po(e,a),r=Po(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=us)}Mo(n,r);var s;n=null;for(p in a)if(!r.hasOwnProperty(p)&&a.hasOwnProperty(p)&&a[p]!=null)if(p==="style"){var l=a[p];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Qa.hasOwnProperty(p)?i||(i=[]):(i=i||[]).push(p,null));for(p in r){var u=r[p];if(l=a!=null?a[p]:void 0,r.hasOwnProperty(p)&&u!==l&&(u!=null||l!=null))if(p==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(i||(i=[]),i.push(p,n)),n=u;else p==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(p,u)):p==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(p,""+u):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Qa.hasOwnProperty(p)?(u!=null&&p==="onScroll"&&We("scroll",e),i||l===u||(i=[])):(i=i||[]).push(p,u))}n&&(i=i||[]).push("style",n);var p=i;(t.updateQueue=p)&&(t.flags|=4)}};Of=function(e,t,n,r){n!==r&&(t.flags|=4)};function La(e,t){if(!Ve)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Mt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function x0(e,t,n){var r=t.pendingProps;switch(Fl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(t),null;case 1:return Zt(t.type)&&cs(),Mt(t),null;case 3:return r=t.stateNode,wa(),Ge(Kt),Ge(Lt),Kl(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ai(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Cn!==null&&(fl(Cn),Cn=null))),al(e,t),Mt(t),null;case 5:Yl(t);var a=Rr(ui.current);if(n=t.type,e!==null&&t.stateNode!=null)If(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ue(166));return Mt(t),null}if(e=Rr($n.current),Ai(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[On]=t,r[oi]=i,e=(t.mode&1)!==0,n){case"dialog":We("cancel",r),We("close",r);break;case"iframe":case"object":case"embed":We("load",r);break;case"video":case"audio":for(a=0;a<$a.length;a++)We($a[a],r);break;case"source":We("error",r);break;case"img":case"image":case"link":We("error",r),We("load",r);break;case"details":We("toggle",r);break;case"input":xu(r,i),We("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},We("invalid",r);break;case"textarea":ku(r,i),We("invalid",r)}Mo(n,i),a=null;for(var s in i)if(i.hasOwnProperty(s)){var l=i[s];s==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Li(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Li(r.textContent,l,e),a=["children",""+l]):Qa.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&We("scroll",r)}switch(n){case"input":Ni(r),vu(r,i,!0);break;case"textarea":Ni(r),wu(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=us)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[On]=t,e[oi]=r,Rf(e,t,!1,!1),t.stateNode=e;e:{switch(s=To(n,r),n){case"dialog":We("cancel",e),We("close",e),a=r;break;case"iframe":case"object":case"embed":We("load",e),a=r;break;case"video":case"audio":for(a=0;a<$a.length;a++)We($a[a],e);a=r;break;case"source":We("error",e),a=r;break;case"img":case"image":case"link":We("error",e),We("load",e),a=r;break;case"details":We("toggle",e),a=r;break;case"input":xu(e,r),a=Co(e,r),We("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Ze({},r,{value:void 0}),We("invalid",e);break;case"textarea":ku(e,r),a=Po(e,r),We("invalid",e);break;default:a=r}Mo(n,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?pd(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&fd(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ja(e,u):typeof u=="number"&&Ja(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Qa.hasOwnProperty(i)?u!=null&&i==="onScroll"&&We("scroll",e):u!=null&&_l(e,i,u,s))}switch(n){case"input":Ni(e),vu(e,r,!1);break;case"textarea":Ni(e),wu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+wr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?da(e,!!r.multiple,i,!1):r.defaultValue!=null&&da(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=us)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Mt(t),null;case 6:if(e&&t.stateNode!=null)Of(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ue(166));if(n=Rr(ui.current),Rr($n.current),Ai(t)){if(r=t.stateNode,n=t.memoizedProps,r[On]=t,(i=r.nodeValue!==n)&&(e=nn,e!==null))switch(e.tag){case 3:Li(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Li(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[On]=t,t.stateNode=r}return Mt(t),null;case 13:if(Ge(Ye),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ve&&tn!==null&&t.mode&1&&!(t.flags&128))tf(),va(),t.flags|=98560,i=!1;else if(i=Ai(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(ue(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ue(317));i[On]=t}else va(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Mt(t),i=!1}else Cn!==null&&(fl(Cn),Cn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ye.current&1?dt===0&&(dt=3):su())),t.updateQueue!==null&&(t.flags|=4),Mt(t),null);case 4:return wa(),al(e,t),e===null&&ii(t.stateNode.containerInfo),Mt(t),null;case 10:return Hl(t.type._context),Mt(t),null;case 17:return Zt(t.type)&&cs(),Mt(t),null;case 19:if(Ge(Ye),i=t.memoizedState,i===null)return Mt(t),null;if(r=(t.flags&128)!==0,s=i.rendering,s===null)if(r)La(i,!1);else{if(dt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=ys(e),s!==null){for(t.flags|=128,La(i,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return He(Ye,Ye.current&1|2),t.child}e=e.sibling}i.tail!==null&&rt()>Sa&&(t.flags|=128,r=!0,La(i,!1),t.lanes=4194304)}else{if(!r)if(e=ys(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),La(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!Ve)return Mt(t),null}else 2*rt()-i.renderingStartTime>Sa&&n!==1073741824&&(t.flags|=128,r=!0,La(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(n=i.last,n!==null?n.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=rt(),t.sibling=null,n=Ye.current,He(Ye,r?n&1|2:n&1),t):(Mt(t),null);case 22:case 23:return iu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?en&1073741824&&(Mt(t),t.subtreeFlags&6&&(t.flags|=8192)):Mt(t),null;case 24:return null;case 25:return null}throw Error(ue(156,t.tag))}function v0(e,t){switch(Fl(t),t.tag){case 1:return Zt(t.type)&&cs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return wa(),Ge(Kt),Ge(Lt),Kl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Yl(t),null;case 13:if(Ge(Ye),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ue(340));va()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ge(Ye),null;case 4:return wa(),null;case 10:return Hl(t.type._context),null;case 22:case 23:return iu(),null;case 24:return null;default:return null}}var Ii=!1,Tt=!1,k0=typeof WeakSet=="function"?WeakSet:Set,ye=null;function ua(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(e,t,r)}else n.current=null}function il(e,t,n){try{n()}catch(r){tt(e,t,r)}}var cc=!1;function w0(e,t){if(Bo=ss,e=Bd(),Il(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,p=0,v=0,k=e,y=null;t:for(;;){for(var g;k!==n||a!==0&&k.nodeType!==3||(l=s+a),k!==i||r!==0&&k.nodeType!==3||(u=s+r),k.nodeType===3&&(s+=k.nodeValue.length),(g=k.firstChild)!==null;)y=k,k=g;for(;;){if(k===e)break t;if(y===n&&++p===a&&(l=s),y===i&&++v===r&&(u=s),(g=k.nextSibling)!==null)break;k=y,y=k.parentNode}k=g}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ho={focusedElem:e,selectionRange:n},ss=!1,ye=t;ye!==null;)if(t=ye,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ye=e;else for(;ye!==null;){t=ye;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var m=w.memoizedProps,b=w.memoizedState,c=t.stateNode,d=c.getSnapshotBeforeUpdate(t.elementType===t.type?m:_n(t.type,m),b);c.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ue(163))}}catch(N){tt(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,ye=e;break}ye=t.return}return w=cc,cc=!1,w}function Ka(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&il(t,n,i)}a=a.next}while(a!==r)}}function Rs(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ff(e){var t=e.alternate;t!==null&&(e.alternate=null,Ff(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[On],delete t[oi],delete t[Vo],delete t[r0],delete t[a0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $f(e){return e.tag===5||e.tag===3||e.tag===4}function dc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$f(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ol(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=us));else if(r!==4&&(e=e.child,e!==null))for(ol(e,t,n),e=e.sibling;e!==null;)ol(e,t,n),e=e.sibling}function ll(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ll(e,t,n),e=e.sibling;e!==null;)ll(e,t,n),e=e.sibling}var Nt=null,Nn=!1;function ar(e,t,n){for(n=n.child;n!==null;)Uf(e,t,n),n=n.sibling}function Uf(e,t,n){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(Es,n)}catch{}switch(n.tag){case 5:Tt||ua(n,t);case 6:var r=Nt,a=Nn;Nt=null,ar(e,t,n),Nt=r,Nn=a,Nt!==null&&(Nn?(e=Nt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Nt.removeChild(n.stateNode));break;case 18:Nt!==null&&(Nn?(e=Nt,n=n.stateNode,e.nodeType===8?so(e.parentNode,n):e.nodeType===1&&so(e,n),ni(e)):so(Nt,n.stateNode));break;case 4:r=Nt,a=Nn,Nt=n.stateNode.containerInfo,Nn=!0,ar(e,t,n),Nt=r,Nn=a;break;case 0:case 11:case 14:case 15:if(!Tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&il(n,t,s),a=a.next}while(a!==r)}ar(e,t,n);break;case 1:if(!Tt&&(ua(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){tt(n,t,l)}ar(e,t,n);break;case 21:ar(e,t,n);break;case 22:n.mode&1?(Tt=(r=Tt)||n.memoizedState!==null,ar(e,t,n),Tt=r):ar(e,t,n);break;default:ar(e,t,n)}}function fc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new k0),t.forEach(function(r){var a=z0.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Sn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,s=t,l=s;e:for(;l!==null;){switch(l.tag){case 5:Nt=l.stateNode,Nn=!1;break e;case 3:Nt=l.stateNode.containerInfo,Nn=!0;break e;case 4:Nt=l.stateNode.containerInfo,Nn=!0;break e}l=l.return}if(Nt===null)throw Error(ue(160));Uf(i,s,a),Nt=null,Nn=!1;var u=a.alternate;u!==null&&(u.return=null),a.return=null}catch(p){tt(a,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Bf(t,e),t=t.sibling}function Bf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Sn(t,e),Dn(e),r&4){try{Ka(3,e,e.return),Rs(3,e)}catch(m){tt(e,e.return,m)}try{Ka(5,e,e.return)}catch(m){tt(e,e.return,m)}}break;case 1:Sn(t,e),Dn(e),r&512&&n!==null&&ua(n,n.return);break;case 5:if(Sn(t,e),Dn(e),r&512&&n!==null&&ua(n,n.return),e.flags&32){var a=e.stateNode;try{Ja(a,"")}catch(m){tt(e,e.return,m)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,s=n!==null?n.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ud(a,i),To(l,s);var p=To(l,i);for(s=0;s<u.length;s+=2){var v=u[s],k=u[s+1];v==="style"?pd(a,k):v==="dangerouslySetInnerHTML"?fd(a,k):v==="children"?Ja(a,k):_l(a,v,k,p)}switch(l){case"input":jo(a,i);break;case"textarea":cd(a,i);break;case"select":var y=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?da(a,!!i.multiple,g,!1):y!==!!i.multiple&&(i.defaultValue!=null?da(a,!!i.multiple,i.defaultValue,!0):da(a,!!i.multiple,i.multiple?[]:"",!1))}a[oi]=i}catch(m){tt(e,e.return,m)}}break;case 6:if(Sn(t,e),Dn(e),r&4){if(e.stateNode===null)throw Error(ue(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(m){tt(e,e.return,m)}}break;case 3:if(Sn(t,e),Dn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ni(t.containerInfo)}catch(m){tt(e,e.return,m)}break;case 4:Sn(t,e),Dn(e);break;case 13:Sn(t,e),Dn(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(ru=rt())),r&4&&fc(e);break;case 22:if(v=n!==null&&n.memoizedState!==null,e.mode&1?(Tt=(p=Tt)||v,Sn(t,e),Tt=p):Sn(t,e),Dn(e),r&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!v&&e.mode&1)for(ye=e,v=e.child;v!==null;){for(k=ye=v;ye!==null;){switch(y=ye,g=y.child,y.tag){case 0:case 11:case 14:case 15:Ka(4,y,y.return);break;case 1:ua(y,y.return);var w=y.stateNode;if(typeof w.componentWillUnmount=="function"){r=y,n=y.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(m){tt(r,n,m)}}break;case 5:ua(y,y.return);break;case 22:if(y.memoizedState!==null){pc(k);continue}}g!==null?(g.return=y,ye=g):pc(k)}v=v.sibling}e:for(v=null,k=e;;){if(k.tag===5){if(v===null){v=k;try{a=k.stateNode,p?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=k.stateNode,u=k.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=hd("display",s))}catch(m){tt(e,e.return,m)}}}else if(k.tag===6){if(v===null)try{k.stateNode.nodeValue=p?"":k.memoizedProps}catch(m){tt(e,e.return,m)}}else if((k.tag!==22&&k.tag!==23||k.memoizedState===null||k===e)&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===e)break e;for(;k.sibling===null;){if(k.return===null||k.return===e)break e;v===k&&(v=null),k=k.return}v===k&&(v=null),k.sibling.return=k.return,k=k.sibling}}break;case 19:Sn(t,e),Dn(e),r&4&&fc(e);break;case 21:break;default:Sn(t,e),Dn(e)}}function Dn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if($f(n)){var r=n;break e}n=n.return}throw Error(ue(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Ja(a,""),r.flags&=-33);var i=dc(e);ll(e,i,a);break;case 3:case 4:var s=r.stateNode.containerInfo,l=dc(e);ol(e,l,s);break;default:throw Error(ue(161))}}catch(u){tt(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function b0(e,t,n){ye=e,Hf(e)}function Hf(e,t,n){for(var r=(e.mode&1)!==0;ye!==null;){var a=ye,i=a.child;if(a.tag===22&&r){var s=a.memoizedState!==null||Ii;if(!s){var l=a.alternate,u=l!==null&&l.memoizedState!==null||Tt;l=Ii;var p=Tt;if(Ii=s,(Tt=u)&&!p)for(ye=a;ye!==null;)s=ye,u=s.child,s.tag===22&&s.memoizedState!==null?mc(a):u!==null?(u.return=s,ye=u):mc(a);for(;i!==null;)ye=i,Hf(i),i=i.sibling;ye=a,Ii=l,Tt=p}hc(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,ye=i):hc(e)}}function hc(e){for(;ye!==null;){var t=ye;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Tt||Rs(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Tt)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:_n(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Qu(t,i,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Qu(t,s,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var v=p.memoizedState;if(v!==null){var k=v.dehydrated;k!==null&&ni(k)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ue(163))}Tt||t.flags&512&&sl(t)}catch(y){tt(t,t.return,y)}}if(t===e){ye=null;break}if(n=t.sibling,n!==null){n.return=t.return,ye=n;break}ye=t.return}}function pc(e){for(;ye!==null;){var t=ye;if(t===e){ye=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ye=n;break}ye=t.return}}function mc(e){for(;ye!==null;){var t=ye;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Rs(4,t)}catch(u){tt(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(u){tt(t,a,u)}}var i=t.return;try{sl(t)}catch(u){tt(t,i,u)}break;case 5:var s=t.return;try{sl(t)}catch(u){tt(t,s,u)}}}catch(u){tt(t,t.return,u)}if(t===e){ye=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ye=l;break}ye=t.return}}var S0=Math.ceil,ks=nr.ReactCurrentDispatcher,tu=nr.ReactCurrentOwner,gn=nr.ReactCurrentBatchConfig,De=0,vt=null,ot=null,Ct=0,en=0,ca=_r(0),dt=0,hi=null,Hr=0,Is=0,nu=0,Za=null,Vt=null,ru=0,Sa=1/0,Vn=null,ws=!1,ul=null,xr=null,Oi=!1,dr=null,bs=0,Xa=0,cl=null,Ji=-1,qi=0;function Ot(){return De&6?rt():Ji!==-1?Ji:Ji=rt()}function vr(e){return e.mode&1?De&2&&Ct!==0?Ct&-Ct:s0.transition!==null?(qi===0&&(qi=Cd()),qi):(e=Oe,e!==0||(e=window.event,e=e===void 0?16:Ld(e.type)),e):1}function Pn(e,t,n,r){if(50<Xa)throw Xa=0,cl=null,Error(ue(185));mi(e,n,r),(!(De&2)||e!==vt)&&(e===vt&&(!(De&2)&&(Is|=n),dt===4&&ur(e,Ct)),Xt(e,r),n===1&&De===0&&!(t.mode&1)&&(Sa=rt()+500,Ls&&Nr()))}function Xt(e,t){var n=e.callbackNode;sp(e,t);var r=is(e,e===vt?Ct:0);if(r===0)n!==null&&_u(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&_u(n),t===1)e.tag===0?i0(gc.bind(null,e)):Jd(gc.bind(null,e)),t0(function(){!(De&6)&&Nr()}),n=null;else{switch(jd(r)){case 1:n=Pl;break;case 4:n=_d;break;case 16:n=as;break;case 536870912:n=Nd;break;default:n=as}n=Qf(n,Wf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Wf(e,t){if(Ji=-1,qi=0,De&6)throw Error(ue(327));var n=e.callbackNode;if(ga()&&e.callbackNode!==n)return null;var r=is(e,e===vt?Ct:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ss(e,r);else{t=r;var a=De;De|=2;var i=Vf();(vt!==e||Ct!==t)&&(Vn=null,Sa=rt()+500,Ir(e,t));do try{C0();break}catch(l){Gf(e,l)}while(!0);Bl(),ks.current=i,De=a,ot!==null?t=0:(vt=null,Ct=0,t=dt)}if(t!==0){if(t===2&&(a=Io(e),a!==0&&(r=a,t=dl(e,a))),t===1)throw n=hi,Ir(e,0),ur(e,r),Xt(e,rt()),n;if(t===6)ur(e,r);else{if(a=e.current.alternate,!(r&30)&&!_0(a)&&(t=Ss(e,r),t===2&&(i=Io(e),i!==0&&(r=i,t=dl(e,i))),t===1))throw n=hi,Ir(e,0),ur(e,r),Xt(e,rt()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(ue(345));case 2:Mr(e,Vt,Vn);break;case 3:if(ur(e,r),(r&130023424)===r&&(t=ru+500-rt(),10<t)){if(is(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){Ot(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Go(Mr.bind(null,e,Vt,Vn),t);break}Mr(e,Vt,Vn);break;case 4:if(ur(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-En(r);i=1<<s,s=t[s],s>a&&(a=s),r&=~i}if(r=a,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*S0(r/1960))-r,10<r){e.timeoutHandle=Go(Mr.bind(null,e,Vt,Vn),r);break}Mr(e,Vt,Vn);break;case 5:Mr(e,Vt,Vn);break;default:throw Error(ue(329))}}}return Xt(e,rt()),e.callbackNode===n?Wf.bind(null,e):null}function dl(e,t){var n=Za;return e.current.memoizedState.isDehydrated&&(Ir(e,t).flags|=256),e=Ss(e,t),e!==2&&(t=Vt,Vt=n,t!==null&&fl(t)),e}function fl(e){Vt===null?Vt=e:Vt.push.apply(Vt,e)}function _0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!zn(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ur(e,t){for(t&=~nu,t&=~Is,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-En(t),r=1<<n;e[n]=-1,t&=~r}}function gc(e){if(De&6)throw Error(ue(327));ga();var t=is(e,0);if(!(t&1))return Xt(e,rt()),null;var n=Ss(e,t);if(e.tag!==0&&n===2){var r=Io(e);r!==0&&(t=r,n=dl(e,r))}if(n===1)throw n=hi,Ir(e,0),ur(e,t),Xt(e,rt()),n;if(n===6)throw Error(ue(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Mr(e,Vt,Vn),Xt(e,rt()),null}function au(e,t){var n=De;De|=1;try{return e(t)}finally{De=n,De===0&&(Sa=rt()+500,Ls&&Nr())}}function Wr(e){dr!==null&&dr.tag===0&&!(De&6)&&ga();var t=De;De|=1;var n=gn.transition,r=Oe;try{if(gn.transition=null,Oe=1,e)return e()}finally{Oe=r,gn.transition=n,De=t,!(De&6)&&Nr()}}function iu(){en=ca.current,Ge(ca)}function Ir(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,e0(n)),ot!==null)for(n=ot.return;n!==null;){var r=n;switch(Fl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cs();break;case 3:wa(),Ge(Kt),Ge(Lt),Kl();break;case 5:Yl(r);break;case 4:wa();break;case 13:Ge(Ye);break;case 19:Ge(Ye);break;case 10:Hl(r.type._context);break;case 22:case 23:iu()}n=n.return}if(vt=e,ot=e=kr(e.current,null),Ct=en=t,dt=0,hi=null,nu=Is=Hr=0,Vt=Za=null,Dr!==null){for(t=0;t<Dr.length;t++)if(n=Dr[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=a,r.next=s}n.pending=r}Dr=null}return e}function Gf(e,t){do{var n=ot;try{if(Bl(),Zi.current=vs,xs){for(var r=Ke.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}xs=!1}if(Br=0,xt=ct=Ke=null,Ya=!1,ci=0,tu.current=null,n===null||n.return===null){dt=1,hi=t,ot=null;break}e:{var i=e,s=n.return,l=n,u=t;if(t=Ct,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var p=u,v=l,k=v.tag;if(!(v.mode&1)&&(k===0||k===11||k===15)){var y=v.alternate;y?(v.updateQueue=y.updateQueue,v.memoizedState=y.memoizedState,v.lanes=y.lanes):(v.updateQueue=null,v.memoizedState=null)}var g=rc(s);if(g!==null){g.flags&=-257,ac(g,s,l,i,t),g.mode&1&&nc(i,p,t),t=g,u=p;var w=t.updateQueue;if(w===null){var m=new Set;m.add(u),t.updateQueue=m}else w.add(u);break e}else{if(!(t&1)){nc(i,p,t),su();break e}u=Error(ue(426))}}else if(Ve&&l.mode&1){var b=rc(s);if(b!==null){!(b.flags&65536)&&(b.flags|=256),ac(b,s,l,i,t),$l(ba(u,l));break e}}i=u=ba(u,l),dt!==4&&(dt=2),Za===null?Za=[i]:Za.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var c=Ef(i,u,t);Xu(i,c);break e;case 1:l=u;var d=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof d.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(xr===null||!xr.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=Pf(i,l,t);Xu(i,N);break e}}i=i.return}while(i!==null)}Kf(n)}catch(j){t=j,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(!0)}function Vf(){var e=ks.current;return ks.current=vs,e===null?vs:e}function su(){(dt===0||dt===3||dt===2)&&(dt=4),vt===null||!(Hr&268435455)&&!(Is&268435455)||ur(vt,Ct)}function Ss(e,t){var n=De;De|=2;var r=Vf();(vt!==e||Ct!==t)&&(Vn=null,Ir(e,t));do try{N0();break}catch(a){Gf(e,a)}while(!0);if(Bl(),De=n,ks.current=r,ot!==null)throw Error(ue(261));return vt=null,Ct=0,dt}function N0(){for(;ot!==null;)Yf(ot)}function C0(){for(;ot!==null&&!Qh();)Yf(ot)}function Yf(e){var t=Xf(e.alternate,e,en);e.memoizedProps=e.pendingProps,t===null?Kf(e):ot=t,tu.current=null}function Kf(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=v0(n,t),n!==null){n.flags&=32767,ot=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{dt=6,ot=null;return}}else if(n=x0(n,t,en),n!==null){ot=n;return}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);dt===0&&(dt=5)}function Mr(e,t,n){var r=Oe,a=gn.transition;try{gn.transition=null,Oe=1,j0(e,t,n,r)}finally{gn.transition=a,Oe=r}return null}function j0(e,t,n,r){do ga();while(dr!==null);if(De&6)throw Error(ue(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ue(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(op(e,i),e===vt&&(ot=vt=null,Ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Oi||(Oi=!0,Qf(as,function(){return ga(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=gn.transition,gn.transition=null;var s=Oe;Oe=1;var l=De;De|=4,tu.current=null,w0(e,n),Bf(n,e),Yp(Ho),ss=!!Bo,Ho=Bo=null,e.current=n,b0(n),Jh(),De=l,Oe=s,gn.transition=i}else e.current=n;if(Oi&&(Oi=!1,dr=e,bs=a),i=e.pendingLanes,i===0&&(xr=null),tp(n.stateNode),Xt(e,rt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(ws)throw ws=!1,e=ul,ul=null,e;return bs&1&&e.tag!==0&&ga(),i=e.pendingLanes,i&1?e===cl?Xa++:(Xa=0,cl=e):Xa=0,Nr(),null}function ga(){if(dr!==null){var e=jd(bs),t=gn.transition,n=Oe;try{if(gn.transition=null,Oe=16>e?16:e,dr===null)var r=!1;else{if(e=dr,dr=null,bs=0,De&6)throw Error(ue(331));var a=De;for(De|=4,ye=e.current;ye!==null;){var i=ye,s=i.child;if(ye.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var p=l[u];for(ye=p;ye!==null;){var v=ye;switch(v.tag){case 0:case 11:case 15:Ka(8,v,i)}var k=v.child;if(k!==null)k.return=v,ye=k;else for(;ye!==null;){v=ye;var y=v.sibling,g=v.return;if(Ff(v),v===p){ye=null;break}if(y!==null){y.return=g,ye=y;break}ye=g}}}var w=i.alternate;if(w!==null){var m=w.child;if(m!==null){w.child=null;do{var b=m.sibling;m.sibling=null,m=b}while(m!==null)}}ye=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,ye=s;else e:for(;ye!==null;){if(i=ye,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ka(9,i,i.return)}var c=i.sibling;if(c!==null){c.return=i.return,ye=c;break e}ye=i.return}}var d=e.current;for(ye=d;ye!==null;){s=ye;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,ye=x;else e:for(s=d;ye!==null;){if(l=ye,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Rs(9,l)}}catch(j){tt(l,l.return,j)}if(l===s){ye=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,ye=N;break e}ye=l.return}}if(De=a,Nr(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(Es,e)}catch{}r=!0}return r}finally{Oe=n,gn.transition=t}}return!1}function yc(e,t,n){t=ba(n,t),t=Ef(e,t,1),e=yr(e,t,1),t=Ot(),e!==null&&(mi(e,1,t),Xt(e,t))}function tt(e,t,n){if(e.tag===3)yc(e,e,n);else for(;t!==null;){if(t.tag===3){yc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xr===null||!xr.has(r))){e=ba(n,e),e=Pf(t,e,1),t=yr(t,e,1),e=Ot(),t!==null&&(mi(t,1,e),Xt(t,e));break}}t=t.return}}function E0(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ot(),e.pingedLanes|=e.suspendedLanes&n,vt===e&&(Ct&n)===n&&(dt===4||dt===3&&(Ct&130023424)===Ct&&500>rt()-ru?Ir(e,0):nu|=n),Xt(e,t)}function Zf(e,t){t===0&&(e.mode&1?(t=Ei,Ei<<=1,!(Ei&130023424)&&(Ei=4194304)):t=1);var n=Ot();e=er(e,t),e!==null&&(mi(e,t,n),Xt(e,n))}function P0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Zf(e,n)}function z0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ue(314))}r!==null&&r.delete(t),Zf(e,n)}var Xf;Xf=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Kt.current)Yt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Yt=!1,y0(e,t,n);Yt=!!(e.flags&131072)}else Yt=!1,Ve&&t.flags&1048576&&qd(t,hs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Qi(e,t),e=t.pendingProps;var a=xa(t,Lt.current);ma(t,n),a=Xl(null,t,r,e,a,n);var i=Ql();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Zt(r)?(i=!0,ds(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Gl(t),a.updater=Ds,t.stateNode=a,a._reactInternals=t,Jo(t,r,e,n),t=tl(null,t,r,!0,i,n)):(t.tag=0,Ve&&i&&Ol(t),It(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Qi(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=T0(r),e=_n(r,e),a){case 0:t=el(null,t,r,e,n);break e;case 1:t=oc(null,t,r,e,n);break e;case 11:t=ic(null,t,r,e,n);break e;case 14:t=sc(null,t,r,_n(r.type,e),n);break e}throw Error(ue(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:_n(r,a),el(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:_n(r,a),oc(e,t,r,a,n);case 3:e:{if(Lf(t),e===null)throw Error(ue(387));r=t.pendingProps,i=t.memoizedState,a=i.element,sf(e,t),gs(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=ba(Error(ue(423)),t),t=lc(e,t,r,n,a);break e}else if(r!==a){a=ba(Error(ue(424)),t),t=lc(e,t,r,n,a);break e}else for(tn=gr(t.stateNode.containerInfo.firstChild),nn=t,Ve=!0,Cn=null,n=rf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(va(),r===a){t=tr(e,t,n);break e}It(e,t,r,n)}t=t.child}return t;case 5:return of(t),e===null&&Zo(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,s=a.children,Wo(r,a)?s=null:i!==null&&Wo(r,i)&&(t.flags|=32),Tf(e,t),It(e,t,s,n),t.child;case 6:return e===null&&Zo(t),null;case 13:return Af(e,t,n);case 4:return Vl(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ka(t,null,r,n):It(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:_n(r,a),ic(e,t,r,a,n);case 7:return It(e,t,t.pendingProps,n),t.child;case 8:return It(e,t,t.pendingProps.children,n),t.child;case 12:return It(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,s=a.value,He(ps,r._currentValue),r._currentValue=s,i!==null)if(zn(i.value,s)){if(i.children===a.children&&!Kt.current){t=tr(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){s=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Qn(-1,n&-n),u.tag=2;var p=i.updateQueue;if(p!==null){p=p.shared;var v=p.pending;v===null?u.next=u:(u.next=v.next,v.next=u),p.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Xo(i.return,n,t),l.lanes|=n;break}u=u.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(ue(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Xo(s,n,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}It(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,ma(t,n),a=yn(a),r=r(a),t.flags|=1,It(e,t,r,n),t.child;case 14:return r=t.type,a=_n(r,t.pendingProps),a=_n(r.type,a),sc(e,t,r,a,n);case 15:return zf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:_n(r,a),Qi(e,t),t.tag=1,Zt(r)?(e=!0,ds(t)):e=!1,ma(t,n),jf(t,r,a),Jo(t,r,a,n),tl(null,t,r,!0,e,n);case 19:return Df(e,t,n);case 22:return Mf(e,t,n)}throw Error(ue(156,t.tag))};function Qf(e,t){return Sd(e,t)}function M0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(e,t,n,r){return new M0(e,t,n,r)}function ou(e){return e=e.prototype,!(!e||!e.isReactComponent)}function T0(e){if(typeof e=="function")return ou(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Cl)return 11;if(e===jl)return 14}return 2}function kr(e,t){var n=e.alternate;return n===null?(n=mn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function es(e,t,n,r,a,i){var s=2;if(r=e,typeof e=="function")ou(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case ea:return Or(n.children,a,i,t);case Nl:s=8,a|=8;break;case bo:return e=mn(12,n,t,a|2),e.elementType=bo,e.lanes=i,e;case So:return e=mn(13,n,t,a),e.elementType=So,e.lanes=i,e;case _o:return e=mn(19,n,t,a),e.elementType=_o,e.lanes=i,e;case sd:return Os(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ad:s=10;break e;case id:s=9;break e;case Cl:s=11;break e;case jl:s=14;break e;case sr:s=16,r=null;break e}throw Error(ue(130,e==null?e:typeof e,""))}return t=mn(s,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function Or(e,t,n,r){return e=mn(7,e,r,t),e.lanes=n,e}function Os(e,t,n,r){return e=mn(22,e,r,t),e.elementType=sd,e.lanes=n,e.stateNode={isHidden:!1},e}function mo(e,t,n){return e=mn(6,e,null,t),e.lanes=n,e}function go(e,t,n){return t=mn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function L0(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zs(0),this.expirationTimes=Zs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zs(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function lu(e,t,n,r,a,i,s,l,u){return e=new L0(e,t,n,l,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=mn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gl(i),e}function A0(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Jf(e){if(!e)return br;e=e._reactInternals;e:{if(Vr(e)!==e||e.tag!==1)throw Error(ue(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Zt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ue(171))}if(e.tag===1){var n=e.type;if(Zt(n))return Qd(e,n,t)}return t}function qf(e,t,n,r,a,i,s,l,u){return e=lu(n,r,!0,e,a,i,s,l,u),e.context=Jf(null),n=e.current,r=Ot(),a=vr(n),i=Qn(r,a),i.callback=t??null,yr(n,i,a),e.current.lanes=a,mi(e,a,r),Xt(e,r),e}function Fs(e,t,n,r){var a=t.current,i=Ot(),s=vr(a);return n=Jf(n),t.context===null?t.context=n:t.pendingContext=n,t=Qn(i,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=yr(a,t,s),e!==null&&(Pn(e,a,s,i),Ki(e,a,s)),s}function _s(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function xc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function uu(e,t){xc(e,t),(e=e.alternate)&&xc(e,t)}function D0(){return null}var eh=typeof reportError=="function"?reportError:function(e){console.error(e)};function cu(e){this._internalRoot=e}$s.prototype.render=cu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ue(409));Fs(e,t,null,null)};$s.prototype.unmount=cu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wr(function(){Fs(null,e,null,null)}),t[qn]=null}};function $s(e){this._internalRoot=e}$s.prototype.unstable_scheduleHydration=function(e){if(e){var t=zd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<lr.length&&t!==0&&t<lr[n].priority;n++);lr.splice(n,0,e),n===0&&Td(e)}};function du(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Us(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function vc(){}function R0(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var p=_s(s);i.call(p)}}var s=qf(t,r,e,0,null,!1,!1,"",vc);return e._reactRootContainer=s,e[qn]=s.current,ii(e.nodeType===8?e.parentNode:e),Wr(),s}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var p=_s(u);l.call(p)}}var u=lu(e,0,!1,null,null,!1,!1,"",vc);return e._reactRootContainer=u,e[qn]=u.current,ii(e.nodeType===8?e.parentNode:e),Wr(function(){Fs(t,u,n,r)}),u}function Bs(e,t,n,r,a){var i=n._reactRootContainer;if(i){var s=i;if(typeof a=="function"){var l=a;a=function(){var u=_s(s);l.call(u)}}Fs(t,s,e,a)}else s=R0(n,t,e,a,r);return _s(s)}Ed=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Fa(t.pendingLanes);n!==0&&(zl(t,n|1),Xt(t,rt()),!(De&6)&&(Sa=rt()+500,Nr()))}break;case 13:Wr(function(){var r=er(e,1);if(r!==null){var a=Ot();Pn(r,e,1,a)}}),uu(e,1)}};Ml=function(e){if(e.tag===13){var t=er(e,134217728);if(t!==null){var n=Ot();Pn(t,e,134217728,n)}uu(e,134217728)}};Pd=function(e){if(e.tag===13){var t=vr(e),n=er(e,t);if(n!==null){var r=Ot();Pn(n,e,t,r)}uu(e,t)}};zd=function(){return Oe};Md=function(e,t){var n=Oe;try{return Oe=e,t()}finally{Oe=n}};Ao=function(e,t,n){switch(t){case"input":if(jo(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Ts(r);if(!a)throw Error(ue(90));ld(r),jo(r,a)}}}break;case"textarea":cd(e,n);break;case"select":t=n.value,t!=null&&da(e,!!n.multiple,t,!1)}};yd=au;xd=Wr;var I0={usingClientEntryPoint:!1,Events:[yi,aa,Ts,md,gd,au]},Aa={findFiberByHostInstance:Ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},O0={bundleType:Aa.bundleType,version:Aa.version,rendererPackageName:Aa.rendererPackageName,rendererConfig:Aa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wd(e),e===null?null:e.stateNode},findFiberByHostInstance:Aa.findFiberByHostInstance||D0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fi.isDisabled&&Fi.supportsFiber)try{Es=Fi.inject(O0),Fn=Fi}catch{}}an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I0;an.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!du(t))throw Error(ue(200));return A0(e,t,null,n)};an.createRoot=function(e,t){if(!du(e))throw Error(ue(299));var n=!1,r="",a=eh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=lu(e,1,!1,null,null,n,!1,r,a),e[qn]=t.current,ii(e.nodeType===8?e.parentNode:e),new cu(t)};an.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ue(188)):(e=Object.keys(e).join(","),Error(ue(268,e)));return e=wd(t),e=e===null?null:e.stateNode,e};an.flushSync=function(e){return Wr(e)};an.hydrate=function(e,t,n){if(!Us(t))throw Error(ue(200));return Bs(null,e,t,!0,n)};an.hydrateRoot=function(e,t,n){if(!du(e))throw Error(ue(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",s=eh;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=qf(t,null,e,1,n??null,a,!1,i,s),e[qn]=t.current,ii(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new $s(t)};an.render=function(e,t,n){if(!Us(t))throw Error(ue(200));return Bs(null,e,t,!1,n)};an.unmountComponentAtNode=function(e){if(!Us(e))throw Error(ue(40));return e._reactRootContainer?(Wr(function(){Bs(null,null,e,!1,function(){e._reactRootContainer=null,e[qn]=null})}),!0):!1};an.unstable_batchedUpdates=au;an.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Us(n))throw Error(ue(200));if(e==null||e._reactInternals===void 0)throw Error(ue(38));return Bs(e,t,n,!1,r)};an.version="18.3.1-next-f1338f8080-20240426";function th(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(th)}catch(e){console.error(e)}}th(),ed.exports=an;var F0=ed.exports,kc=F0;ko.createRoot=kc.createRoot,ko.hydrateRoot=kc.hydrateRoot;/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),_e=(e,t)=>{const n=O.forwardRef(({color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:l="",children:u,...p},v)=>O.createElement("svg",{ref:v,...$0,width:a,height:a,stroke:r,strokeWidth:s?Number(i)*24/Number(a):i,className:["lucide",`lucide-${U0(e)}`,l].join(" "),...p},[...t.map(([k,y])=>O.createElement(k,y)),...Array.isArray(u)?u:[u]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=_e("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=_e("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=_e("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=_e("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=_e("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=_e("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=_e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=_e("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=_e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=_e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=_e("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=_e("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=_e("Ear",[["path",{d:"M6 8.5a6.5 6.5 0 1 1 13 0c0 6-6 6-6 10a3.5 3.5 0 1 1-7 0",key:"1dfaln"}],["path",{d:"M15 8.5a2.5 2.5 0 0 0-5 0v1a2 2 0 1 1 0 4",key:"1qnva7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=_e("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=_e("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=_e("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=_e("FolderArchive",[["circle",{cx:"15",cy:"19",r:"2",key:"u2pros"}],["path",{d:"M20.9 19.8A2 2 0 0 0 22 18V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2h5.1",key:"1jj40k"}],["path",{d:"M15 11v-1",key:"cntcp"}],["path",{d:"M15 17v-2",key:"1279jj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=_e("Fullscreen",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["rect",{width:"10",height:"8",x:"7",y:"8",rx:"1",key:"vys8me"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=_e("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=_e("GitCommitVertical",[["path",{d:"M12 3v6",key:"1holv5"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M12 15v6",key:"a9ows0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=_e("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=_e("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=_e("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=_e("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=_e("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=_e("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=_e("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=_e("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=_e("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=_e("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=_e("MousePointer2",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=_e("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=_e("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=_e("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=_e("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=_e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=_e("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=_e("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5v0A5.5 5.5 0 0 0 9.5 20H13",key:"19mnr4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=_e("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=_e("ScanEye",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M5 12s2.5-5 7-5 7 5 7 5-2.5 5-7 5-7-5-7-5",key:"nhuolu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=_e("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=_e("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=_e("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=_e("TrainFront",[["path",{d:"M8 3.1V7a4 4 0 0 0 8 0V3.1",key:"1v71zp"}],["path",{d:"m9 15-1-1",key:"1yrq24"}],["path",{d:"m15 15 1-1",key:"1t0d6s"}],["path",{d:"M9 19c-2.8 0-5-2.2-5-5v-4a8 8 0 0 1 16 0v4c0 2.8-2.2 5-5 5Z",key:"1p0hjs"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m16 19 2 3",key:"xo31yx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=_e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=_e("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=_e("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=_e("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=_e("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=_e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=_e("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=_e("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),om=({spacing:e,viewBox:t,zoom:n=1,currentTool:r="select",hoverPoint:a=null,gridStyle:i="dots",gridThickness:s=1,gridOpacity:l=1})=>{const u=Math.floor(t.x/e)*e,p=Math.ceil((t.x+t.width)/e)*e,v=Math.floor(t.y/e)*e,k=Math.ceil((t.y+t.height)/e)*e,y=Math.min(3.5,2*n)*s,g=r==="station"||r==="createLine"||r==="drawPath",w=()=>{if(i==="none")return null;if(i==="dots"){const m=[];for(let b=u;b<=p;b+=e)for(let c=v;c<=k;c+=e)m.push({x:b,y:c,key:`${b}-${c}`});return m.map(b=>{const c=g&&a&&Math.abs(b.x-a.x)<1&&Math.abs(b.y-a.y)<1;return o.jsx("circle",{cx:b.x,cy:b.y,r:c?y*2:y,className:`grid-dot transition-all ${g?"cursor-pointer":""} ${c?"fill-blue-400 dark:fill-blue-500":g?"fill-gray-300 dark:fill-gray-600 hover:fill-blue-400 dark:hover:fill-blue-500":"fill-gray-300 dark:fill-gray-600"}`,opacity:l},b.key)})}if(i==="horizontal"){const m=[];for(let b=v;b<=k;b+=e)m.push(o.jsx("line",{x1:t.x,y1:b,x2:t.x+t.width,y2:b,className:"stroke-gray-300 dark:stroke-gray-600",strokeWidth:Math.min(1,.5*n)*s,opacity:l},`h-${b}`));return m}if(i==="vertical"){const m=[];for(let b=u;b<=p;b+=e)m.push(o.jsx("line",{x1:b,y1:t.y,x2:b,y2:t.y+t.height,className:"stroke-gray-300 dark:stroke-gray-600",strokeWidth:Math.min(1,.5*n)*s,opacity:l},`v-${b}`));return m}if(i==="grid"){const m=[];for(let b=v;b<=k;b+=e)m.push(o.jsx("line",{x1:t.x,y1:b,x2:t.x+t.width,y2:b,className:"stroke-gray-300 dark:stroke-gray-600",strokeWidth:Math.min(1,.5*n)*s,opacity:l},`h-${b}`));for(let b=u;b<=p;b+=e)m.push(o.jsx("line",{x1:b,y1:t.y,x2:b,y2:t.y+t.height,className:"stroke-gray-300 dark:stroke-gray-600",strokeWidth:Math.min(1,.5*n)*s,opacity:l},`v-${b}`));return m}if(i==="diagonal"){const m=[],b=t.x-e,c=t.x+t.width+e,d=t.y-e,x=t.y+t.height+e,N=d-c,j=x-b,M=Math.floor(N/e)*e,A=Math.ceil(j/e)*e;for(let C=M;C<=A;C+=e){let z=Math.max(b,d-C),h=z+C,V=Math.min(c,x-C),K=V+C;h<d&&(h=d,z=h-C),h>x&&(h=x,z=h-C),K<d&&(K=d,V=K-C),K>x&&(K=x,V=K-C),z<=c&&V>=b&&h<=x&&K>=d&&m.push(o.jsx("line",{x1:z,y1:h,x2:V,y2:K,className:"stroke-gray-300 dark:stroke-gray-600",strokeWidth:Math.min(1,.5*n)*s,opacity:l},`d1-${C}`))}const H=d+b,$=x+c,W=Math.floor(H/e)*e,le=Math.ceil($/e)*e;for(let C=W;C<=le;C+=e){let z=Math.max(b,C-x),h=C-z,V=Math.min(c,C-d),K=C-V;h<d&&(h=d,z=C-h),h>x&&(h=x,z=C-h),K<d&&(K=d,V=C-K),K>x&&(K=x,V=C-K),z<=c&&V>=b&&h<=x&&K>=d&&m.push(o.jsx("line",{x1:z,y1:h,x2:V,y2:K,className:"stroke-gray-300 dark:stroke-gray-600",strokeWidth:Math.min(1,.5*n)*s,opacity:l},`d2-${C}`))}return m}return null};return o.jsxs("g",{children:[o.jsx("rect",{x:t.x,y:t.y,width:t.width,height:t.height,className:"pointer-events-none",style:{fill:"var(--canvas-bg)"}}),w(),g&&a&&o.jsx("circle",{cx:a.x,cy:a.y,r:y*3,className:"fill-blue-400 dark:fill-blue-500 pointer-events-none",opacity:"0.3"})]})},Oc=({station:e,isSelected:t,isDragging:n,isHighlighted:r=!1,isPlaying:a=!1,onClick:i,onMouseDown:s,onTouchStart:l,allStations:u=[],labelSize:p=1,markerSize:v=1})=>{const k=14*p,y=16*p,g=12*p,m=18+(8*v-8),b=h=>{const V=k*.55;return h.length*V},d=b(e.name)+y*2,x=k+g,N=(h,V="top")=>{const K=b(h.name)+y*2,F=x,D={top:{x:h.x-K/2,y:h.y-m-F},bottom:{x:h.x-K/2,y:h.y+m},left:{x:h.x-K-15,y:h.y-F/2},right:{x:h.x+15,y:h.y-F/2}},U=D[V]||D.top;return{x:U.x,y:U.y,width:K,height:F}},j=(h,V,K,F,D)=>u.some(X=>X.id===e.id?!1:["top","bottom","left","right"].some(L=>{const Y=N(X,L);return!(h+K+5<Y.x||h-5>Y.x+Y.width||V+F+5<Y.y||V-5>Y.y+Y.height)})),M=[{x:e.x-d/2,y:e.y-m-x,name:"top"},{x:e.x-d/2,y:e.y+m,name:"bottom"},{x:e.x-d-15,y:e.y-x/2,name:"left"},{x:e.x+15,y:e.y-x/2,name:"right"}],A=u.findIndex(h=>h.id===e.id);if(u.filter(h=>Math.abs(h.y-e.y)<10&&h.x!==e.x).length>0){const h=A%2===1;M[0]=h?M[1]:M[0],M.splice(1,1)}let $=M[0];for(const h of M)if(!j(h.x,h.y,d,x,h.name)){$=h;break}const W=$.x,le=$.y,C=W+d/2,z=le+x/2;return o.jsxs("g",{onClick:i,onMouseDown:s,onTouchStart:l,className:n?"cursor-grabbing":"cursor-pointer",children:[r&&o.jsx("circle",{cx:e.x,cy:e.y,r:16*v,fill:"none",stroke:"rgba(156, 163, 175, 0.6)",strokeWidth:3*v,opacity:"0.8",className:a?"animate-[pulse_1s_ease-in-out_infinite] dark:stroke-white/40":"dark:stroke-white/40"}),o.jsx("circle",{cx:e.x,cy:e.y,r:n?10*v:8*v,fill:t?"#fbbf24":e.color,stroke:r?"rgba(156, 163, 175, 0.8)":"white",strokeWidth:r?3*v:2*v,className:"hover:r-10 dark:[stroke:rgba(255,255,255,0.5)]"}),o.jsx("circle",{cx:e.x,cy:e.y,r:3*v,fill:"white"}),o.jsx("rect",{x:W,y:le,width:d,height:x,rx:x/2,className:"fill-white dark:fill-gray-700 pointer-events-none",stroke:e.color,strokeWidth:"1.5"}),o.jsx("text",{x:C,y:z,textAnchor:"middle",dominantBaseline:"middle",className:"font-semibold fill-gray-800 dark:fill-gray-200 pointer-events-none select-none",style:{fontSize:`${k}px`},children:e.name})]})};function Qr(e){return function(){return e}}const gl=Math.PI,yl=2*gl,Tr=1e-6,lm=yl-Tr;function ih(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function um(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ih;const n=10**t;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class cm{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ih:um(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,a){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,n,r,a,i,s){this._append`C${+t},${+n},${+r},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(t,n,r,a,i){if(t=+t,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,l=this._y1,u=r-t,p=a-n,v=s-t,k=l-n,y=v*v+k*k;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(y>Tr)if(!(Math.abs(k*u-p*v)>Tr)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let g=r-s,w=a-l,m=u*u+p*p,b=g*g+w*w,c=Math.sqrt(m),d=Math.sqrt(y),x=i*Math.tan((gl-Math.acos((m+y-b)/(2*c*d)))/2),N=x/d,j=x/c;Math.abs(N-1)>Tr&&this._append`L${t+N*v},${n+N*k}`,this._append`A${i},${i},0,0,${+(k*g>v*w)},${this._x1=t+j*u},${this._y1=n+j*p}`}}arc(t,n,r,a,i,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(a),u=r*Math.sin(a),p=t+l,v=n+u,k=1^s,y=s?a-i:i-a;this._x1===null?this._append`M${p},${v}`:(Math.abs(this._x1-p)>Tr||Math.abs(this._y1-v)>Tr)&&this._append`L${p},${v}`,r&&(y<0&&(y=y%yl+yl),y>lm?this._append`A${r},${r},0,1,${k},${t-l},${n-u}A${r},${r},0,1,${k},${this._x1=p},${this._y1=v}`:y>Tr&&this._append`A${r},${r},0,${+(y>=gl)},${k},${this._x1=t+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(t,n,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function dm(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new cm(t)}function fm(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sh(e){this._context=e}sh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function oh(e){return new sh(e)}function hm(e){return e[0]}function pm(e){return e[1]}function Fc(e,t){var n=Qr(!0),r=null,a=oh,i=null,s=dm(l);e=typeof e=="function"?e:e===void 0?hm:Qr(e),t=typeof t=="function"?t:t===void 0?pm:Qr(t);function l(u){var p,v=(u=fm(u)).length,k,y=!1,g;for(r==null&&(i=a(g=s())),p=0;p<=v;++p)!(p<v&&n(k=u[p],p,u))===y&&((y=!y)?i.lineStart():i.lineEnd()),y&&i.point(+e(k,p,u),+t(k,p,u));if(g)return i=null,g+""||null}return l.x=function(u){return arguments.length?(e=typeof u=="function"?u:Qr(+u),l):e},l.y=function(u){return arguments.length?(t=typeof u=="function"?u:Qr(+u),l):t},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Qr(!!u),l):n},l.curve=function(u){return arguments.length?(a=u,r!=null&&(i=a(r)),l):a},l.context=function(u){return arguments.length?(u==null?r=i=null:i=a(r=u),l):r},l}function $c(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function lh(e,t){this._context=e,this._k=(1-t)/6}lh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:$c(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:$c(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const mm=function e(t){function n(r){return new lh(r,t)}return n.tension=function(r){return e(+r)},n}(0),yo=({line:e,stations:t,lineStyle:n="smooth",onClick:r,isEditing:a=!1,isGhost:i=!1,ghostPoints:s=null,color:l=null,lineThickness:u=1})=>{const p=s||e.pathPoints||e.stations.map(g=>t.find(w=>w.id===g)).filter(Boolean);if(p.length<2)return null;const k=(()=>{if(n==="direct")return Fc().x(w=>w.x).y(w=>w.y).curve(oh)(p);if(n==="minimal"){let g=`M ${p[0].x} ${p[0].y}`;for(let w=1;w<p.length;w++){const m=p[w-1],b=p[w],c=b.x-m.x,d=b.y-m.y,x=w>1?p[w-2]:null,N=w<p.length-1?p[w+1]:null;if(Math.abs(c)>5&&Math.abs(d)>5){const M=c>0?1:-1,A=d>0?1:-1;let H=Math.abs(c)>Math.abs(d);if(x){const W=m.x-x.x,le=m.y-x.y;Math.abs(W)>Math.abs(le)?H=!1:Math.abs(le)>Math.abs(W)&&(H=!0)}if(N){const W=N.x-b.x,le=N.y-b.y;Math.abs(le)>Math.abs(W)*1.5?H=!0:Math.abs(W)>Math.abs(le)*1.5&&(H=!1)}const $=.6;if(H){const W=m.x+c*$;g+=` L ${W-15*M} ${m.y}`,g+=` Q ${W} ${m.y}, ${W} ${m.y+15*A}`,g+=` L ${W} ${b.y-15*A}`,g+=` Q ${W} ${b.y}, ${W+15*M} ${b.y}`,g+=` L ${b.x} ${b.y}`}else{const W=m.y+d*$;g+=` L ${m.x} ${W-15*A}`,g+=` Q ${m.x} ${W}, ${m.x+15*M} ${W}`,g+=` L ${b.x-15*M} ${W}`,g+=` Q ${b.x} ${W}, ${b.x} ${W+15*A}`,g+=` L ${b.x} ${b.y}`}}else g+=` L ${b.x} ${b.y}`}return g}else return Fc().x(w=>w.x).y(w=>w.y).curve(mm.tension(-1))(p)})(),y=l||(e==null?void 0:e.color)||"#ef4444";return o.jsxs("g",{onClick:r,style:{cursor:r?"pointer":"default"},children:[!i&&o.jsx("path",{d:k,fill:"none",stroke:"transparent",strokeWidth:20*u,strokeLinecap:"round",strokeLinejoin:"round",style:{pointerEvents:r?"stroke":"none"}}),o.jsx("path",{d:k,fill:"none",stroke:y,strokeWidth:i?3*u:a?6*u:4*u,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:i?"5,5":"none",opacity:i?"0.5":a?"1":"0.8",style:{pointerEvents:"none"}})]})},fr={en:{appTitle:"Transit Designer",selectTool:"Select",addStationTool:"Add Station",createTrainLineTool:"Create Train Line",drawPathTool:"Draw Path",resetToDefault:"Reset to Default",switchToLightMode:"Switch to Light Mode",switchToDarkMode:"Switch to Dark Mode",apiKeySet:"API Key Set",setApiKey:"Set API Key",zoom:"Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",shiftScroll:"Shift + Scroll",removeSegment:"Remove segment",remove:"Remove",previousLine:"Previous line",nextLine:"Next line",previousInQueue:"Previous in Queue",playPauseQueue:"Play/Pause Queue",nextInQueue:"Next in Queue",resetSpeed:"Reset to 1x",addSegment:"Add segment",downloadCanvas:"Download canvas as PNG image",download:"Download",downloadAudio:"Audio",downloadCanvasLabel:"Canvas",lineStyle:"Line Style",lineStyleDirect:"Direct Path",lineStyleMinimal:"Path with Corners",lineStyleSmooth:"Smooth Path",gridStyle:"Grid Style",gridStyleNone:"None",gridStyleDots:"Dots",gridStyleHorizontal:"Horizontal Lines",gridStyleVertical:"Vertical Lines",gridStyleGrid:"Grid Lines",gridStyleDiagonal:"Diagonal Lines",canvasStyle:"Canvas Style",canvasSettings:"Canvas Settings",markerSize:"Marker Size",labelSize:"Label Size",lineThickness:"Line Thickness",gridThickness:"Grid Thickness",gridOpacity:"Grid Opacity",undo:"Undo",redo:"Redo",showStationNumbers:"Show Numbers",hideStationNumbers:"Hide Numbers",clickGridToAddStation:"Click on grid to add station",clickToAddStations:"Click grid points to add stations. Right-click to finish.",clickToDrawPath:"Click grid points to draw path. Right-click to finish.",tapToAddStations:'Tap grid points to add stations. Tap "Finish" when done.',tapToDrawPath:'Tap grid points to draw path. Tap "Finish" when done.',finishLine:"Finish Line",populateStations:"Populate Stations",centerView:"Center View",clickPresetToLoad:"Click any preset to load it onto the map",showPresets:"Presets",showAnnouncements:"Announcements",hideMenu:"Hide",editStation:"Edit Station",editLine:"Edit Line",editor:"Editor",name:"Name",color:"Color",delete:"Delete",trainLinePresets:"Transit Systems",loadPresetHint:"Load a system to get started",stations:"Stations",active:"Active",custom:"Custom",presets:"Presets",createEmpty:"Create empty transit system",createCustomLine:"Create Custom Transit System",createCustomLineDescription:"Choose how to start your custom transit system",createEmptyLine:"Start from Scratch",createEmptyLineDescription:"Create an empty line and add stations manually",createLineWithStations:"Quick Start with Stations",createLineWithStationsDescription:"Generate a line with random station positions",create:"Create",trainLine:"Transit System",randomizeName:"Randomize name",randomizeColor:"Randomize color",loopLine:"Loop Line",numberOfStations:"Number of Stations",emptySystemHint:"Start with an empty canvas and add stations manually",stationsWillBeRandomized:"Stations will be placed at random positions",pathShape:"Path Shape",pathLine:"Line",pathCurve:"Curve",pathS:"S-Curve",pathRandom:"Random",copy:"Copy","Simple Demo":"Simple Demo","Demo Line":"Demo Line","Yamanote Line":"Yamanote Line","Chuo Line":"Chuo Line","Ginza Line":"Ginza Line","Taiyokei Line":"Taiykei Line","Solar Express":"Solar Express",returnsTo:"Returns to {station}",Japan:"Japan","Solar System":"Solar System",Misc:"Misc","A simple 4-station demo route":"Misc","Solar System train line from Mercury to Pluto in Japanese":"Solar System","Solar System train line from Mercury to Pluto in English":"Solar System","Four stations in a simple loop. Good for testing the announcement system.":"Four stations in a simple loop. Good for testing the announcement system.","Tokyo's circular line with 21 stations. Connects major areas around central Tokyo.":"Tokyo's circular line with 21 stations. Connects major areas around central Tokyo.","East-west line through central Tokyo. Orange trains connect Tokyo Station to western suburbs.":"East-west line through central Tokyo. Orange trains connect Tokyo Station to western suburbs.","Tokyo's oldest subway line from 1927. Runs from Shibuya to Asakusa through Ginza and Ueno.":"Tokyo's oldest subway line from 1927. Runs from Shibuya to Asakusa through Ginza and Ueno.","Solar system route with Japanese announcements. Stations from Mercury to Pluto.":"Solar system route with Japanese announcements. Stations from Mercury to Pluto.","Solar system route with English announcements. Stations from Mercury to Pluto.":"Solar system route with English announcements. Stations from Mercury to Pluto.",announcements:"Announcements",generateAnnouncement:"Generate Announcement",setApiKeyToGenerate:"Set API key to generate announcements",addStationsFirst:"Add stations to the map first",noAnnouncementsYet:"No announcements yet",createFirstAnnouncement:"Create stations and generate your first announcement",audioQueue:"Queue",audioControlPanel:"Audio Control Panel",displayAudioCaptions:"Display audio captions",selectLine:"Select a line to manage announcements",noLinesYet:"No train lines created yet",createLineFirst:"Create a train line to add announcements",stationAnnouncement:"Station",betweenStations:"Between Stations",uploadAudio:"Upload",generateAudio:"Generate",selectPreset:"Preset",noAudioAssigned:"No audio assigned",playAudio:"Play",removeAudio:"Remove",audioTypePreset:"Preset",audioTypeUpload:"Uploaded",audioTypeGenerated:"AI Voice",presetArrival:"We are now arriving at {station}. Please prepare to exit.",presetDeparture:"This train is departing from {station}. Next stop: [Next Station Name].",presetTransfer:"Transfer here for other lines. This is {station}.",presetInformation:"Welcome to {station}. Please mind the gap between the train and the platform.",presetLive:"Attention passengers. Live announcement for {station}.",presetWarning:"Attention. Important safety announcement for {station}.",presetCentralStation:"Now arriving at {station}, the central station. Transfer available for all lines.",playAll:"Play All",stopPlayback:"Stop",previousStation:"Previous Station",nextStation:"Next Station",playPause:"Play/Pause",transcription:"Captions",playAllSequence:"Play All",cycleSpeed:"Cycle Speed",toggleVolume:"Toggle Volume",mute:"Mute",unmute:"Unmute",stationOf:"Station {current} of {total}",audioProcessing:"Audio Processing",audioPresetStandard:"Standard",audioPresetVacant:"Vacant",audioPresetCommuter:"Commuter",audioPresetExpress:"Express",audioPresetFirstClass:"First Class",audioPresetRadio:"Radio",audioPresetPlatform:"Platform",audioPresetUnderground:"Underground",audioPresetTunnel:"Tunnel",elevenLabsApiKey:"ElevenLabs API Key",apiKeyDescription:"Enter your ElevenLabs API key. It will be stored in your browser session only and cleared when you close the browser.",apiKeyPlaceholder:"sk_...",saveKey:"Save Key",cancel:"Cancel",close:"Close",getApiKeyFrom:"Get your API key from",station:"Station",stationNamePresets:["Tokyo","Osaka","Kyoto","Nagoya","Kobe","Fukuoka","Sapporo","Yokohama","Sendai","Hiroshima","Kanazawa","Nagano","Shinjuku","Shibuya","Ikebukuro","Shinagawa","Ueno","Akihabara","London","Paris","Berlin","Madrid","Rome","Amsterdam","New York","Los Angeles","Chicago","Boston","Seattle","San Francisco","Seoul","Beijing","Shanghai","Hong Kong","Taipei","Bangkok","Singapore","Sydney","Melbourne","Toronto","Vancouver","Mexico City","So Paulo","Buenos Aires","Moscow","Istanbul","Dubai","Mumbai","Delhi","Central","North","South","East","West","Northeast","Northwest","Southeast","Southwest","Station Front","City Hall","University","Hospital","Airport","Harbor","Park","Stadium","Convention Center","Museum","Platform A","Platform B","Platform C","Junction","Terminal","Express Stop","Local Stop","Transfer","Interchange","Depot","Yard"],lineNamePresets:["Express Line","Local Line","Rapid Line","Limited Express","Main Line","Branch Line","Loop Line","Circle Line","Metro Line","Subway Line","Commuter Line","Regional Line","Red Line","Blue Line","Green Line","Yellow Line","Orange Line","Purple Line","Pink Line","Brown Line","Silver Line","Gold Line","North Line","South Line","East Line","West Line","Downtown Line","Uptown Line","Crosstown Line","Harbor Line","Mountain Line","Coastal Line","River Line","Valley Line"],createLoopLine:"Create Loop Line",selectLoopStation:"Select which station to use",firstStation:"First station",lastStation:"Last station",stationTypes:"Station Types",centralStation:"Central Station",arrival:"Arrival",departure:"Departure",transfer:"Transfer",information:"Information",live:"Live",warning:"Warning",general:"General",misc:"Misc",chime:"Chime",music:"Music",ambience:"Ambience"},ja:{appTitle:"",selectTool:"",addStationTool:"",createTrainLineTool:"",drawPathTool:"",resetToDefault:"",switchToLightMode:"",switchToDarkMode:"",apiKeySet:"API",setApiKey:"API",zoom:"",zoomIn:"",zoomOut:"",shiftScroll:"Shift + ",removeSegment:"",remove:"",previousLine:"",nextLine:"",previousInQueue:"",playPauseQueue:"/",nextInQueue:"",resetSpeed:"1",addSegment:"",downloadCanvas:"PNG",download:"",downloadAudio:"",downloadCanvasLabel:"",lineStyle:"",lineStyleDirect:"",lineStyleMinimal:"",lineStyleSmooth:"",gridStyle:"",gridStyleNone:"",gridStyleDots:"",gridStyleHorizontal:"",gridStyleVertical:"",gridStyleGrid:"",gridStyleDiagonal:"",canvasStyle:"",canvasSettings:"",markerSize:"",labelSize:"",lineThickness:"",gridThickness:"",gridOpacity:"",undo:"",redo:"",showStationNumbers:"",hideStationNumbers:"",clickGridToAddStation:"",clickToAddStations:"",clickToDrawPath:"",tapToAddStations:"",tapToDrawPath:"",finishLine:"",populateStations:"",centerView:"",clickPresetToLoad:"",showPresets:"",showAnnouncements:"",hideMenu:"",editStation:"",editLine:"",editor:"",name:"",color:"",delete:"",trainLinePresets:"",loadPresetHint:"",stations:"",active:"",custom:"",presets:"",createEmpty:"",createCustomLine:"",createCustomLineDescription:"",createEmptyLine:"",createEmptyLineDescription:"",createLineWithStations:"",createLineWithStationsDescription:"",create:"",trainLine:"",randomizeName:"",randomizeColor:"",loopLine:"",numberOfStations:"",emptySystemHint:"",stationsWillBeRandomized:"",pathShape:"",pathLine:"",pathCurve:"",pathS:"S",pathRandom:"",copy:"","Simple Demo":"","Demo Line":"","Yamanote Line":"","Chuo Line":"","Ginza Line":"","Taiyokei Line":"","Solar Express":"",returnsTo:"{station}",Japan:"","Solar System":"",Misc:"","A simple 4-station demo route":"","Solar System train line from Mercury to Pluto in Japanese":"","Solar System train line from Mercury to Pluto in English":"","Four stations in a simple loop. Good for testing the announcement system.":"4","Tokyo's circular line with 21 stations. Connects major areas around central Tokyo.":"21","East-west line through central Tokyo. Orange trains connect Tokyo Station to western suburbs.":"","Tokyo's oldest subway line from 1927. Runs from Shibuya to Asakusa through Ginza and Ueno.":"1927","Solar system route with Japanese announcements. Stations from Mercury to Pluto.":"","Solar system route with English announcements. Stations from Mercury to Pluto.":"",announcements:"",generateAnnouncement:"",setApiKeyToGenerate:"API",addStationsFirst:"",noAnnouncementsYet:"",createFirstAnnouncement:"",audioQueue:"",audioControlPanel:"",displayAudioCaptions:"",selectLine:"",noLinesYet:"",createLineFirst:"",stationAnnouncement:"",betweenStations:"",uploadAudio:"",generateAudio:"",selectPreset:"",noAudioAssigned:"",playAudio:"",removeAudio:"",audioTypePreset:"",audioTypeUpload:"",audioTypeGenerated:"AI",presetArrival:"{station}{station}",presetDeparture:"{station}[]",presetTransfer:"{station}",presetInformation:"{station}",presetLive:"{station}",presetWarning:"{station}",presetCentralStation:"{station}{station}",playAll:"",stopPlayback:"",previousStation:"",nextStation:"",playPause:"/",transcription:"",playAllSequence:"",cycleSpeed:"",toggleVolume:"",mute:"",unmute:"",stationOf:" {current} / {total}",audioProcessing:"",audioPresetStandard:"",audioPresetVacant:"",audioPresetCommuter:"",audioPresetExpress:"",audioPresetFirstClass:"",audioPresetRadio:"",audioPresetPlatform:"",audioPresetUnderground:"",audioPresetTunnel:"",elevenLabsApiKey:"ElevenLabs API",apiKeyDescription:"ElevenLabs API",apiKeyPlaceholder:"sk_...",saveKey:"",cancel:"",close:"",getApiKeyFrom:"API",station:"",stationNamePresets:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],lineNamePresets:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],createLoopLine:"",selectLoopStation:"",firstStation:"",lastStation:"",stationTypes:"",centralStation:"",arrival:"",departure:"",transfer:"",information:"",live:"",warning:"",general:"",misc:"",chime:"",music:"",ambience:""}},Uc=[{code:"en",name:"English",flag:""},{code:"ja",name:"",flag:""}],Yr=e=>({t:n=>{var r;return((r=fr[e])==null?void 0:r[n])||fr.en[n]||n}}),gm=({station:e,line:t,lines:n=[],stations:r=[],onUpdateStation:a,onUpdateLine:i,onDeleteStation:s,onDeleteLine:l,onClose:u,language:p="en",setStationsAndLines:v})=>{var K;const{t:k}=Yr(p),[y,g]=O.useState(!1),[w,m]=O.useState(!1),[b,c]=O.useState(!1),[d,x]=O.useState(!1),N=e?(K=n.find(F=>{var D;return(D=F.stations)==null?void 0:D.includes(e.id)}))==null?void 0:K.id:null;N&&n.find(F=>F.id===N);const j=(t==null?void 0:t.id)||N,M=n.find(F=>F.id===j),A=F=>{if(e&&a){const D={...e,name:F.target.value};a(D)}},H=F=>{if(e&&a){const D={...e,color:F};a(D)}},$=F=>{if(M&&i){const D={...M,name:F.target.value};i(D)}},W=F=>{if(M){const D={...M,color:F},U=n.map(X=>X.id===D.id?D:X);if(D.stations&&v){const X=r.map(T=>D.stations.includes(T.id)?{...T,color:F}:T);v(X,U)}else i&&i(D,!0)}},le=(F,D)=>{D?H(F.target.value):W(F.target.value)},C=F=>{var X,T;F?(c(!0),setTimeout(()=>c(!1),200)):(x(!0),setTimeout(()=>x(!1),200));const D=F?((X=fr[p])==null?void 0:X.stationNamePresets)||fr.en.stationNamePresets:((T=fr[p])==null?void 0:T.lineNamePresets)||fr.en.lineNamePresets,U=D[Math.floor(Math.random()*D.length)];if(F){if(e&&a){const L={...e,name:U};a(L)}}else if(M&&i){const L={...M,name:U};i(L)}},z=F=>{F?(g(!0),setTimeout(()=>g(!1),200)):(m(!0),setTimeout(()=>m(!1),200));const D=Math.floor(Math.random()*360),U=Math.floor(Math.random()*60)+20,X=Math.floor(Math.random()*60)+20,L=((Y,ee,te)=>{ee/=100,te/=100;const pe=ee*Math.min(te,1-te),ke=me=>{const ve=(me+Y/30)%12,Ne=te-pe*Math.max(Math.min(ve-3,9-ve,1),-1);return Math.round(255*Ne).toString(16).padStart(2,"0")};return`#${ke(0)}${ke(8)}${ke(4)}`})(D,U,X);F?H(L):W(L)},h=(F,D,U,X,T,L,Y)=>{const ee=F===k("editStation");return o.jsxs("div",{className:"p-3 rounded-lg border border-transparent",style:{backgroundColor:"var(--btn-unselected-bg)"},children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 text-sm flex items-center gap-2",children:[F,L&&o.jsx("button",{onClick:()=>L(Y),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",title:k("delete"),children:o.jsx(rm,{size:14})})]})}),o.jsx("div",{className:"space-y-3",children:o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1 block",children:k("name")}),o.jsxs("div",{className:"flex gap-1.5",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx("input",{type:"text",value:D,onChange:X,className:"w-full px-3 py-1.5 pr-10 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.jsx("button",{onClick:()=>C(ee),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",title:"Randomize name",children:o.jsx(Cs,{size:14,className:`transition-transform ${ee&&b||!ee&&d?"animate-shuffle":""}`})})]}),o.jsxs("div",{className:"flex",children:[o.jsx("label",{className:"relative w-[34px] h-[34px] rounded-l-lg border border-r-0 border-gray-300 dark:border-gray-600 cursor-pointer overflow-hidden hover:opacity-80 transition-opacity flex-shrink-0",style:{backgroundColor:U},children:o.jsx("input",{type:"color",value:U,onChange:te=>le(te,ee),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})}),o.jsx("button",{onClick:()=>z(ee),className:"flex-shrink-0 w-[34px] h-[34px] flex items-center justify-center rounded-r-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",title:"Randomize color",children:o.jsx(Cs,{size:16,className:`text-gray-700 dark:text-gray-300 transition-transform ${ee&&y||!ee&&w?"animate-shuffle":""}`})})]})]})]})})]})},V=e?r.find(F=>F.id===e.id)||e:null;return o.jsxs("div",{className:"absolute top-4 right-4 bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 w-80 z-10 max-h-[calc(100vh-2rem)] overflow-y-auto",children:[o.jsxs("div",{className:"space-y-3",style:{"--editor-section-bg":"var(--btn-unselected-bg)"},children:[V&&h(k("editStation"),V.name,V.color,A,H,s,V.id),M&&h(k("editLine"),M.name,M.color,$,W,t?l:null,M.id)]}),o.jsx("button",{onClick:u,className:"w-full px-3 py-2 mt-4 bg-transparent hover:bg-gray-50 dark:hover:bg-gray-700/50 text-gray-600 dark:text-gray-300 rounded-lg transition-colors text-sm border border-gray-300 dark:border-gray-600",children:k("close")})]})},Rn=(e,t,n=50)=>{const r=O.useRef(null),a=O.useRef(null),i=O.useCallback(()=>{r.current||(r.current=setInterval(()=>{e(l=>{const u=l+t;return a.current=u,u})},n))},[e,t,n]),s=O.useCallback(()=>{r.current&&(clearInterval(r.current),r.current=null)},[]);return{startHold:i,stopHold:s}},xo={english:["Central Station","North Station","South Station","East Station","West Station","Downtown","Midtown","Uptown","Riverside","Hillside","Park View","Garden Plaza","Market Square","City Center","Town Hall","University","Hospital","Airport","Harbor","Bridge","Highland","Lakeside","Woodland","Meadow","Summit","Valley","Bay View","Oceanside","Sunset","Sunrise","Liberty","Victory","Union","Grand","Royal"],japanese:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],generic:["Station A","Station B","Station C","Station D","Station E","Station F","Station G","Station H","Station I","Station J","Station K","Station L","Station M","Station N","Station O","Station P","Station Q","Station R","Station S","Station T","Station U","Station V","Station W","Station X","Station Y","Station Z"]},$i=(e,t="en",n=null)=>{const r=new Set(e.map(i=>i.name));let a=xo.generic;t==="ja"?a=xo.japanese:t==="en"&&(a=xo.english);for(const i of a)if(!r.has(i))return i;return`Station ${e.length+1}`},ym=()=>"/Transit-Designer/",uh=e=>`${ym()}audio/presets/${e}`.replace(/\/\//g,"/"),xm=()=>["shinjuku1bansen-jihatu.mp3","shinjuku1bansen-sekkin.mp3","shinjuku1bansen-totyaku.mp3","Taioykei Mercury JP.mp3","Taioykei Dep Mercury JP.mp3","Taioykei Venus JP.mp3","Taioykei Dep Venus JP.mp3","Taioykei Earth JP.mp3","Taioykei Dep Earth JP.mp3","Taioykei Mars JP.mp3","Taioykei Dep Mars JP.mp3","Taioykei Jupiter JP.mp3","Taioykei Dep Jupiter JP.mp3","Taioykei Saturn JP.mp3","Taioykei Dep Saturn JP.mp3","Taioykei Uranus JP.mp3","Taioykei Dep Uranus JP.mp3","Taioykei Neptune JP.mp3","Taioykei Dep Neptune JP.mp3","Taioykei Pluto JP.mp3","Taioykei Mercury EN.mp3","Taioykei Dep Mercury EN.mp3","Taioykei Venus EN.mp3","Taioykei Dep Venus EN.mp3","Taioykei Earth EN.mp3","Taioykei Dep Earth EN.mp3","Taioykei Mars EN.mp3","Taioykei Dep Mars EN.mp3","Taioykei Jupiter EN.mp3","Taioykei Dep Jupiter EN.mp3","Taioykei Saturn EN.mp3","Taioykei Dep Saturn EN.mp3","Taioykei Uranus EN.mp3","Taioykei Dep Uranus EN.mp3","Taioykei Neptune EN.mp3","Taioykei Dep Neptune EN.mp3","Taioykei Pluto EN.mp3"].map((t,n)=>({id:`preset-${n}`,name:t.replace(".mp3",""),path:uh(t),index:n}));class vm{constructor(){this.audioContext=null,this.sourceNode=null,this.gainNode=null,this.dryGain=null,this.wetGain=null,this.makeupGain=null,this.compressor=null,this.lowShelf=null,this.midPeak=null,this.highShelf=null,this.convolver=null,this.lowpassFilter=null,this.highpassFilter=null,this.waveshaper=null,this.noiseGain=null,this.noiseSource=null,this.currentPreset="standard",this.targetNoiseLevel=0,this.isAudioPlaying=!1}initialize(){return this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),this.audioContext}createEffectsChain(t){this.audioContext||this.initialize(),this.audioContext.state==="suspended"&&this.audioContext.resume(),this.sourceNode=this.audioContext.createMediaElementSource(t),this.gainNode=this.audioContext.createGain(),this.dryGain=this.audioContext.createGain(),this.wetGain=this.audioContext.createGain(),this.makeupGain=this.audioContext.createGain(),this.compressor=this.audioContext.createDynamicsCompressor(),this.lowShelf=this.audioContext.createBiquadFilter(),this.lowShelf.type="lowshelf",this.lowShelf.frequency.value=200,this.midPeak=this.audioContext.createBiquadFilter(),this.midPeak.type="peaking",this.midPeak.frequency.value=2500,this.midPeak.Q.value=1,this.highShelf=this.audioContext.createBiquadFilter(),this.highShelf.type="highshelf",this.highShelf.frequency.value=6e3,this.lowpassFilter=this.audioContext.createBiquadFilter(),this.lowpassFilter.type="lowpass",this.lowpassFilter.frequency.value=2e4,this.highpassFilter=this.audioContext.createBiquadFilter(),this.highpassFilter.type="highpass",this.highpassFilter.frequency.value=20,this.convolver=this.audioContext.createConvolver(),this.createReverbImpulse(.001,1),this.waveshaper=this.audioContext.createWaveShaper(),this.waveshaper.curve=this.createDistortionCurve(0),this.waveshaper.oversample="4x",this.noiseGain=this.audioContext.createGain(),this.noiseGain.gain.value=0;const n=this.createNoise(2);return this.noiseSource=this.audioContext.createBufferSource(),this.noiseSource.buffer=n,this.noiseSource.loop=!0,this.noiseSource.connect(this.noiseGain),this.noiseSource.start(0),this.sourceNode.connect(this.dryGain),this.dryGain.connect(this.gainNode),this.sourceNode.connect(this.highpassFilter),this.noiseGain.connect(this.highpassFilter),this.highpassFilter.connect(this.lowpassFilter),this.lowpassFilter.connect(this.lowShelf),this.lowShelf.connect(this.midPeak),this.midPeak.connect(this.highShelf),this.highShelf.connect(this.compressor),this.compressor.connect(this.waveshaper),this.waveshaper.connect(this.convolver),this.convolver.connect(this.makeupGain),this.makeupGain.connect(this.wetGain),this.wetGain.connect(this.gainNode),this.gainNode.connect(this.audioContext.destination),this.gainNode}createReverbImpulse(t=.5,n=2){const r=this.audioContext.sampleRate,a=Math.max(1,Math.floor(r*t)),i=this.audioContext.createBuffer(2,a,r);for(let s=0;s<2;s++){const l=i.getChannelData(s);for(let u=0;u<a;u++)l[u]=(Math.random()*2-1)*Math.pow(1-u/a,n)}this.convolver.buffer=i}createDistortionCurve(t=0){const r=new Float32Array(44100),a=Math.PI/180;for(let i=0;i<44100;i++){const s=i*2/44100-1;t===0?r[i]=s:r[i]=(3+t)*s*20*a/(Math.PI+t*Math.abs(s))}return r}createNoise(t=.1){const n=this.audioContext.sampleRate,r=Math.floor(n*t),a=this.audioContext.createBuffer(2,r,n);for(let i=0;i<2;i++){const s=a.getChannelData(i);for(let l=0;l<r;l++)s[l]=Math.random()*2-1}return a}applyPreset(t){if(this.compressor)switch(this.currentPreset=t,t){case"standard":this.dryGain.gain.value=1,this.wetGain.gain.value=0,this.makeupGain.gain.value=1,this.waveshaper.curve=this.createDistortionCurve(0),this.targetNoiseLevel=0,this.noiseGain.gain.value=0;break;case"vacant":this.dryGain.gain.value=0,this.wetGain.gain.value=1,this.compressor.threshold.value=-30,this.compressor.knee.value=30,this.compressor.ratio.value=12,this.compressor.attack.value=.003,this.compressor.release.value=.25,this.lowShelf.gain.value=-8,this.midPeak.gain.value=4,this.highShelf.gain.value=-6,this.lowpassFilter.frequency.value=4e3,this.highpassFilter.frequency.value=300,this.waveshaper.curve=this.createDistortionCurve(0),this.targetNoiseLevel=0,this.noiseGain.gain.value=0,this.makeupGain.gain.value=6,this.createReverbImpulse(.3,3);break;case"underground":this.dryGain.gain.value=0,this.wetGain.gain.value=1,this.compressor.threshold.value=-30,this.compressor.knee.value=25,this.compressor.ratio.value=5,this.compressor.attack.value=.005,this.compressor.release.value=.3,this.lowShelf.gain.value=-2,this.midPeak.gain.value=3,this.highShelf.gain.value=-4,this.lowpassFilter.frequency.value=1e4,this.highpassFilter.frequency.value=150,this.waveshaper.curve=this.createDistortionCurve(0),this.targetNoiseLevel=0,this.noiseGain.gain.value=0,this.makeupGain.gain.value=4,this.createReverbImpulse(.8,2);break;case"express":this.dryGain.gain.value=0,this.wetGain.gain.value=1,this.compressor.threshold.value=-25,this.compressor.knee.value=20,this.compressor.ratio.value=8,this.compressor.attack.value=.001,this.compressor.release.value=.1,this.lowShelf.gain.value=2,this.midPeak.gain.value=5,this.highShelf.gain.value=3,this.lowpassFilter.frequency.value=12e3,this.highpassFilter.frequency.value=80,this.waveshaper.curve=this.createDistortionCurve(0),this.targetNoiseLevel=0,this.noiseGain.gain.value=0,this.makeupGain.gain.value=6,this.createReverbImpulse(.2,4);break;case"platform":this.dryGain.gain.value=0,this.wetGain.gain.value=1,this.compressor.threshold.value=-35,this.compressor.knee.value=30,this.compressor.ratio.value=6,this.compressor.attack.value=.003,this.compressor.release.value=.25,this.lowShelf.gain.value=-8,this.midPeak.gain.value=3,this.highShelf.gain.value=1,this.lowpassFilter.frequency.value=8e3,this.highpassFilter.frequency.value=250,this.waveshaper.curve=this.createDistortionCurve(0),this.targetNoiseLevel=0,this.noiseGain.gain.value=0,this.makeupGain.gain.value=3,this.createReverbImpulse(1,5);break;case"radio":this.dryGain.gain.value=0,this.wetGain.gain.value=1,this.compressor.threshold.value=-8,this.compressor.knee.value=2,this.compressor.ratio.value=20,this.compressor.attack.value=5e-5,this.compressor.release.value=.015,this.lowShelf.gain.value=-15,this.midPeak.gain.value=12,this.highShelf.gain.value=-12,this.lowpassFilter.frequency.value=2200,this.highpassFilter.frequency.value=700,this.waveshaper.curve=this.createDistortionCurve(80),this.targetNoiseLevel=0,this.noiseGain.gain.value=this.isAudioPlaying?this.targetNoiseLevel:0,this.makeupGain.gain.value=4,this.createReverbImpulse(.5,2.5);break;case"tunnel":this.dryGain.gain.value=0,this.wetGain.gain.value=1,this.compressor.threshold.value=-32,this.compressor.knee.value=40,this.compressor.ratio.value=8,this.compressor.attack.value=.005,this.compressor.release.value=.3,this.lowShelf.gain.value=8,this.midPeak.gain.value=-2,this.highShelf.gain.value=-8,this.lowpassFilter.frequency.value=4500,this.highpassFilter.frequency.value=150,this.waveshaper.curve=this.createDistortionCurve(0),this.targetNoiseLevel=0,this.noiseGain.gain.value=0,this.makeupGain.gain.value=4,this.createReverbImpulse(2,1.5);break;case"commuter":this.dryGain.gain.value=0,this.wetGain.gain.value=1,this.compressor.threshold.value=-20,this.compressor.knee.value=15,this.compressor.ratio.value=10,this.compressor.attack.value=.001,this.compressor.release.value=.05,this.lowShelf.gain.value=-10,this.midPeak.gain.value=6,this.highShelf.gain.value=-8,this.lowpassFilter.frequency.value=3500,this.highpassFilter.frequency.value=400,this.waveshaper.curve=this.createDistortionCurve(0),this.targetNoiseLevel=0,this.noiseGain.gain.value=0,this.makeupGain.gain.value=9,this.createReverbImpulse(.1,5);break;case"firstClass":this.dryGain.gain.value=0,this.wetGain.gain.value=1,this.compressor.threshold.value=-22,this.compressor.knee.value=18,this.compressor.ratio.value=6,this.compressor.attack.value=.001,this.compressor.release.value=.08,this.lowShelf.gain.value=1,this.midPeak.gain.value=4,this.highShelf.gain.value=5,this.lowpassFilter.frequency.value=15e3,this.highpassFilter.frequency.value=60,this.waveshaper.curve=this.createDistortionCurve(0),this.targetNoiseLevel=0,this.noiseGain.gain.value=0,this.makeupGain.gain.value=7,this.createReverbImpulse(.15,4);break;default:this.applyPreset("standard")}}setVolume(t){this.gainNode&&(this.gainNode.gain.value=t)}setPlaybackState(t){this.isAudioPlaying=t,this.noiseGain&&(this.noiseGain.gain.value=t?this.targetNoiseLevel:0)}disconnect(){if(this.sourceNode)try{this.sourceNode.disconnect()}catch{}if(this.noiseSource)try{this.noiseSource.stop(),this.noiseSource.disconnect()}catch{}this.sourceNode=null,this.noiseSource=null}getCurrentPreset(){return this.currentPreset}isAvailable(){return!!(window.AudioContext||window.webkitAudioContext)}}let vo=null;const km=()=>(vo||(vo=new vm),vo),wm=async(e,t,n={})=>{const r="https://api.elevenlabs.io/v1/sound-generation",{loop:a=!1,durationSeconds:i=null,promptInfluence:s=.3,modelId:l="eleven_text_to_sound_v2",outputFormat:u="mp3_44100_128"}=n;try{const p={text:e,loop:a,prompt_influence:s,model_id:l};i!==null&&(p.duration_seconds=i);const v=await fetch(`${r}?output_format=${u}`,{method:"POST",headers:{"Content-Type":"application/json","xi-api-key":t},body:JSON.stringify(p)});if(!v.ok){const y=await v.text();throw new Error(`API Error: ${y}`)}const k=await v.blob();return URL.createObjectURL(k)}catch(p){throw console.error("Error generating sound effect:",p),p}};function Ui(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ch={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,a,i){function s(p,v){if(!a[p]){if(!r[p]){var k=typeof Ui=="function"&&Ui;if(!v&&k)return k(p,!0);if(l)return l(p,!0);var y=new Error("Cannot find module '"+p+"'");throw y.code="MODULE_NOT_FOUND",y}var g=a[p]={exports:{}};r[p][0].call(g.exports,function(w){var m=r[p][1][w];return s(m||w)},g,g.exports,n,r,a,i)}return a[p].exports}for(var l=typeof Ui=="function"&&Ui,u=0;u<i.length;u++)s(i[u]);return s}({1:[function(n,r,a){var i=n("./utils"),s=n("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(u){for(var p,v,k,y,g,w,m,b=[],c=0,d=u.length,x=d,N=i.getTypeOf(u)!=="string";c<u.length;)x=d-c,k=N?(p=u[c++],v=c<d?u[c++]:0,c<d?u[c++]:0):(p=u.charCodeAt(c++),v=c<d?u.charCodeAt(c++):0,c<d?u.charCodeAt(c++):0),y=p>>2,g=(3&p)<<4|v>>4,w=1<x?(15&v)<<2|k>>6:64,m=2<x?63&k:64,b.push(l.charAt(y)+l.charAt(g)+l.charAt(w)+l.charAt(m));return b.join("")},a.decode=function(u){var p,v,k,y,g,w,m=0,b=0,c="data:";if(u.substr(0,c.length)===c)throw new Error("Invalid base64 input, it looks like a data url.");var d,x=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===l.charAt(64)&&x--,u.charAt(u.length-2)===l.charAt(64)&&x--,x%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=s.uint8array?new Uint8Array(0|x):new Array(0|x);m<u.length;)p=l.indexOf(u.charAt(m++))<<2|(y=l.indexOf(u.charAt(m++)))>>4,v=(15&y)<<4|(g=l.indexOf(u.charAt(m++)))>>2,k=(3&g)<<6|(w=l.indexOf(u.charAt(m++))),d[b++]=p,g!==64&&(d[b++]=v),w!==64&&(d[b++]=k);return d}},{"./support":30,"./utils":32}],2:[function(n,r,a){var i=n("./external"),s=n("./stream/DataWorker"),l=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function p(v,k,y,g,w){this.compressedSize=v,this.uncompressedSize=k,this.crc32=y,this.compression=g,this.compressedContent=w}p.prototype={getContentWorker:function(){var v=new s(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),k=this;return v.on("end",function(){if(this.streamInfo.data_length!==k.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),v},getCompressedWorker:function(){return new s(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(v,k,y){return v.pipe(new l).pipe(new u("uncompressedSize")).pipe(k.compressWorker(y)).pipe(new u("compressedSize")).withStreamInfo("compression",k)},r.exports=p},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,a){var i=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,a){var i=n("./utils"),s=function(){for(var l,u=[],p=0;p<256;p++){l=p;for(var v=0;v<8;v++)l=1&l?3988292384^l>>>1:l>>>1;u[p]=l}return u}();r.exports=function(l,u){return l!==void 0&&l.length?i.getTypeOf(l)!=="string"?function(p,v,k,y){var g=s,w=y+k;p^=-1;for(var m=y;m<w;m++)p=p>>>8^g[255&(p^v[m])];return-1^p}(0|u,l,l.length,0):function(p,v,k,y){var g=s,w=y+k;p^=-1;for(var m=y;m<w;m++)p=p>>>8^g[255&(p^v.charCodeAt(m))];return-1^p}(0|u,l,l.length,0):0}},{"./utils":32}],5:[function(n,r,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,r,a){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=n("pako"),l=n("./utils"),u=n("./stream/GenericWorker"),p=i?"uint8array":"array";function v(k,y){u.call(this,"FlateWorker/"+k),this._pako=null,this._pakoAction=k,this._pakoOptions=y,this.meta={}}a.magic="\b\0",l.inherits(v,u),v.prototype.processChunk=function(k){this.meta=k.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(p,k.data),!1)},v.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},v.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},v.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var k=this;this._pako.onData=function(y){k.push({data:y,meta:k.meta})}},a.compressWorker=function(k){return new v("Deflate",k)},a.uncompressWorker=function(){return new v("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,a){function i(g,w){var m,b="";for(m=0;m<w;m++)b+=String.fromCharCode(255&g),g>>>=8;return b}function s(g,w,m,b,c,d){var x,N,j=g.file,M=g.compression,A=d!==p.utf8encode,H=l.transformTo("string",d(j.name)),$=l.transformTo("string",p.utf8encode(j.name)),W=j.comment,le=l.transformTo("string",d(W)),C=l.transformTo("string",p.utf8encode(W)),z=$.length!==j.name.length,h=C.length!==W.length,V="",K="",F="",D=j.dir,U=j.date,X={crc32:0,compressedSize:0,uncompressedSize:0};w&&!m||(X.crc32=g.crc32,X.compressedSize=g.compressedSize,X.uncompressedSize=g.uncompressedSize);var T=0;w&&(T|=8),A||!z&&!h||(T|=2048);var L=0,Y=0;D&&(L|=16),c==="UNIX"?(Y=798,L|=function(te,pe){var ke=te;return te||(ke=pe?16893:33204),(65535&ke)<<16}(j.unixPermissions,D)):(Y=20,L|=function(te){return 63&(te||0)}(j.dosPermissions)),x=U.getUTCHours(),x<<=6,x|=U.getUTCMinutes(),x<<=5,x|=U.getUTCSeconds()/2,N=U.getUTCFullYear()-1980,N<<=4,N|=U.getUTCMonth()+1,N<<=5,N|=U.getUTCDate(),z&&(K=i(1,1)+i(v(H),4)+$,V+="up"+i(K.length,2)+K),h&&(F=i(1,1)+i(v(le),4)+C,V+="uc"+i(F.length,2)+F);var ee="";return ee+=`
\0`,ee+=i(T,2),ee+=M.magic,ee+=i(x,2),ee+=i(N,2),ee+=i(X.crc32,4),ee+=i(X.compressedSize,4),ee+=i(X.uncompressedSize,4),ee+=i(H.length,2),ee+=i(V.length,2),{fileRecord:k.LOCAL_FILE_HEADER+ee+H+V,dirRecord:k.CENTRAL_FILE_HEADER+i(Y,2)+ee+i(le.length,2)+"\0\0\0\0"+i(L,4)+i(b,4)+H+V+le}}var l=n("../utils"),u=n("../stream/GenericWorker"),p=n("../utf8"),v=n("../crc32"),k=n("../signature");function y(g,w,m,b){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=m,this.encodeFileName=b,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(y,u),y.prototype.push=function(g){var w=g.meta.percent||0,m=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,u.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:m?(w+100*(m-b-1))/m:100}}))},y.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var w=this.streamFiles&&!g.file.dir;if(w){var m=s(g,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(g){this.accumulate=!1;var w=this.streamFiles&&!g.file.dir,m=s(g,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),w)this.push({data:function(b){return k.DATA_DESCRIPTOR+i(b.crc32,4)+i(b.compressedSize,4)+i(b.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var g=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var m=this.bytesWritten-g,b=function(c,d,x,N,j){var M=l.transformTo("string",j(N));return k.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(c,2)+i(c,2)+i(d,4)+i(x,4)+i(M.length,2)+M}(this.dirRecords.length,m,g,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(g){this._sources.push(g);var w=this;return g.on("data",function(m){w.processChunk(m)}),g.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),g.on("error",function(m){w.error(m)}),this},y.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(g){var w=this._sources;if(!u.prototype.error.call(this,g))return!1;for(var m=0;m<w.length;m++)try{w[m].error(g)}catch{}return!0},y.prototype.lock=function(){u.prototype.lock.call(this);for(var g=this._sources,w=0;w<g.length;w++)g[w].lock()},r.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,a){var i=n("../compressions"),s=n("./ZipFileWorker");a.generateWorker=function(l,u,p){var v=new s(u.streamFiles,p,u.platform,u.encodeFileName),k=0;try{l.forEach(function(y,g){k++;var w=function(d,x){var N=d||x,j=i[N];if(!j)throw new Error(N+" is not a valid compression method !");return j}(g.options.compression,u.compression),m=g.options.compressionOptions||u.compressionOptions||{},b=g.dir,c=g.date;g._compressWorker(w,m).withStreamInfo("file",{name:y,dir:b,date:c,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(v)}),v.entriesCount=k}catch(y){v.error(y)}return v}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new i;for(var l in this)typeof this[l]!="function"&&(s[l]=this[l]);return s}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(s,l){return new i().loadAsync(s,l)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,a){var i=n("./utils"),s=n("./external"),l=n("./utf8"),u=n("./zipEntries"),p=n("./stream/Crc32Probe"),v=n("./nodejsUtils");function k(y){return new s.Promise(function(g,w){var m=y.decompressed.getContentWorker().pipe(new p);m.on("error",function(b){w(b)}).on("end",function(){m.streamInfo.crc32!==y.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(y,g){var w=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),v.isNode&&v.isStream(y)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",y,!0,g.optimizedBinaryString,g.base64).then(function(m){var b=new u(g);return b.load(m),b}).then(function(m){var b=[s.Promise.resolve(m)],c=m.files;if(g.checkCRC32)for(var d=0;d<c.length;d++)b.push(k(c[d]));return s.Promise.all(b)}).then(function(m){for(var b=m.shift(),c=b.files,d=0;d<c.length;d++){var x=c[d],N=x.fileNameStr,j=i.resolve(x.fileNameStr);w.file(j,x.decompressed,{binary:!0,optimizedBinaryString:!0,date:x.date,dir:x.dir,comment:x.fileCommentStr.length?x.fileCommentStr:null,unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions,createFolders:g.createFolders}),x.dir||(w.file(j).unsafeOriginalName=N)}return b.zipComment.length&&(w.comment=b.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,a){var i=n("../utils"),s=n("../stream/GenericWorker");function l(u,p){s.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(p)}i.inherits(l,s),l.prototype._bindStream=function(u){var p=this;(this._stream=u).pause(),u.on("data",function(v){p.push({data:v,meta:{percent:0}})}).on("error",function(v){p.isPaused?this.generatedError=v:p.error(v)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},l.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,a){var i=n("readable-stream").Readable;function s(l,u,p){i.call(this,u),this._helper=l;var v=this;l.on("data",function(k,y){v.push(k)||v._helper.pause(),p&&p(y)}).on("error",function(k){v.emit("error",k)}).on("end",function(){v.push(null)})}n("../utils").inherits(s,i),s.prototype._read=function(){this._helper.resume()},r.exports=s},{"../utils":32,"readable-stream":16}],14:[function(n,r,a){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,s);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,s)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var s=new Buffer(i);return s.fill(0),s},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,a){function i(j,M,A){var H,$=l.getTypeOf(M),W=l.extend(A||{},v);W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),typeof W.unixPermissions=="string"&&(W.unixPermissions=parseInt(W.unixPermissions,8)),W.unixPermissions&&16384&W.unixPermissions&&(W.dir=!0),W.dosPermissions&&16&W.dosPermissions&&(W.dir=!0),W.dir&&(j=c(j)),W.createFolders&&(H=b(j))&&d.call(this,H,!0);var le=$==="string"&&W.binary===!1&&W.base64===!1;A&&A.binary!==void 0||(W.binary=!le),(M instanceof k&&M.uncompressedSize===0||W.dir||!M||M.length===0)&&(W.base64=!1,W.binary=!0,M="",W.compression="STORE",$="string");var C=null;C=M instanceof k||M instanceof u?M:w.isNode&&w.isStream(M)?new m(j,M):l.prepareContent(j,M,W.binary,W.optimizedBinaryString,W.base64);var z=new y(j,C,W);this.files[j]=z}var s=n("./utf8"),l=n("./utils"),u=n("./stream/GenericWorker"),p=n("./stream/StreamHelper"),v=n("./defaults"),k=n("./compressedObject"),y=n("./zipObject"),g=n("./generate"),w=n("./nodejsUtils"),m=n("./nodejs/NodejsStreamInputAdapter"),b=function(j){j.slice(-1)==="/"&&(j=j.substring(0,j.length-1));var M=j.lastIndexOf("/");return 0<M?j.substring(0,M):""},c=function(j){return j.slice(-1)!=="/"&&(j+="/"),j},d=function(j,M){return M=M!==void 0?M:v.createFolders,j=c(j),this.files[j]||i.call(this,j,null,{dir:!0,createFolders:M}),this.files[j]};function x(j){return Object.prototype.toString.call(j)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(j){var M,A,H;for(M in this.files)H=this.files[M],(A=M.slice(this.root.length,M.length))&&M.slice(0,this.root.length)===this.root&&j(A,H)},filter:function(j){var M=[];return this.forEach(function(A,H){j(A,H)&&M.push(H)}),M},file:function(j,M,A){if(arguments.length!==1)return j=this.root+j,i.call(this,j,M,A),this;if(x(j)){var H=j;return this.filter(function(W,le){return!le.dir&&H.test(W)})}var $=this.files[this.root+j];return $&&!$.dir?$:null},folder:function(j){if(!j)return this;if(x(j))return this.filter(function($,W){return W.dir&&j.test($)});var M=this.root+j,A=d.call(this,M),H=this.clone();return H.root=A.name,H},remove:function(j){j=this.root+j;var M=this.files[j];if(M||(j.slice(-1)!=="/"&&(j+="/"),M=this.files[j]),M&&!M.dir)delete this.files[j];else for(var A=this.filter(function($,W){return W.name.slice(0,j.length)===j}),H=0;H<A.length;H++)delete this.files[A[H].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(j){var M,A={};try{if((A=l.extend(j||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=A.type.toLowerCase(),A.compression=A.compression.toUpperCase(),A.type==="binarystring"&&(A.type="string"),!A.type)throw new Error("No output type specified.");l.checkSupport(A.type),A.platform!=="darwin"&&A.platform!=="freebsd"&&A.platform!=="linux"&&A.platform!=="sunos"||(A.platform="UNIX"),A.platform==="win32"&&(A.platform="DOS");var H=A.comment||this.comment||"";M=g.generateWorker(this,A,H)}catch($){(M=new u("error")).error($)}return new p(M,A.type||"string",A.mimeType)},generateAsync:function(j,M){return this.generateInternalStream(j).accumulate(M)},generateNodeStream:function(j,M){return(j=j||{}).type||(j.type="nodebuffer"),this.generateInternalStream(j).toNodejsStream(M)}};r.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,a){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,a){var i=n("./DataReader");function s(l){i.call(this,l);for(var u=0;u<this.data.length;u++)l[u]=255&l[u]}n("../utils").inherits(s,i),s.prototype.byteAt=function(l){return this.data[this.zero+l]},s.prototype.lastIndexOfSignature=function(l){for(var u=l.charCodeAt(0),p=l.charCodeAt(1),v=l.charCodeAt(2),k=l.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===u&&this.data[y+1]===p&&this.data[y+2]===v&&this.data[y+3]===k)return y-this.zero;return-1},s.prototype.readAndCheckSignature=function(l){var u=l.charCodeAt(0),p=l.charCodeAt(1),v=l.charCodeAt(2),k=l.charCodeAt(3),y=this.readData(4);return u===y[0]&&p===y[1]&&v===y[2]&&k===y[3]},s.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=s},{"../utils":32,"./DataReader":18}],18:[function(n,r,a){var i=n("../utils");function s(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var u,p=0;for(this.checkOffset(l),u=this.index+l-1;u>=this.index;u--)p=(p<<8)+this.byteAt(u);return this.index+=l,p},readString:function(l){return i.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},r.exports=s},{"../utils":32}],19:[function(n,r,a){var i=n("./Uint8ArrayReader");function s(l){i.call(this,l)}n("../utils").inherits(s,i),s.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,a){var i=n("./DataReader");function s(l){i.call(this,l)}n("../utils").inherits(s,i),s.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},s.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},s.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},s.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=s},{"../utils":32,"./DataReader":18}],21:[function(n,r,a){var i=n("./ArrayReader");function s(l){i.call(this,l)}n("../utils").inherits(s,i),s.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,a){var i=n("../utils"),s=n("../support"),l=n("./ArrayReader"),u=n("./StringReader"),p=n("./NodeBufferReader"),v=n("./Uint8ArrayReader");r.exports=function(k){var y=i.getTypeOf(k);return i.checkSupport(y),y!=="string"||s.uint8array?y==="nodebuffer"?new p(k):s.uint8array?new v(i.transformTo("uint8array",k)):new l(i.transformTo("array",k)):new u(k)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,a){var i=n("./GenericWorker"),s=n("../utils");function l(u){i.call(this,"ConvertWorker to "+u),this.destType=u}s.inherits(l,i),l.prototype.processChunk=function(u){this.push({data:s.transformTo(this.destType,u.data),meta:u.meta})},r.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,a){var i=n("./GenericWorker"),s=n("../crc32");function l(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(l,i),l.prototype.processChunk=function(u){this.streamInfo.crc32=s(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,a){var i=n("../utils"),s=n("./GenericWorker");function l(u){s.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}i.inherits(l,s),l.prototype.processChunk=function(u){if(u){var p=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=p+u.data.length}s.prototype.processChunk.call(this,u)},r.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,a){var i=n("../utils"),s=n("./GenericWorker");function l(u){s.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(v){p.dataIsReady=!0,p.data=v,p.max=v&&v.length||0,p.type=i.getTypeOf(v),p.isPaused||p._tickAndRepeat()},function(v){p.error(v)})}i.inherits(l,s),l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,p);break;case"uint8array":u=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":u=this.data.slice(this.index,p)}return this.index=p,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,a){function i(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,l){return this._listeners[s].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,l){if(this._listeners[s])for(var u=0;u<this._listeners[s].length;u++)this._listeners[s][u].call(this,l)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var l=this;return s.on("data",function(u){l.processChunk(u)}),s.on("end",function(){l.end()}),s.on("error",function(u){l.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,l){return this.extraStreamInfo[s]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},r.exports=i},{}],29:[function(n,r,a){var i=n("../utils"),s=n("./ConvertWorker"),l=n("./GenericWorker"),u=n("../base64"),p=n("../support"),v=n("../external"),k=null;if(p.nodestream)try{k=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(w,m){return new v.Promise(function(b,c){var d=[],x=w._internalType,N=w._outputType,j=w._mimeType;w.on("data",function(M,A){d.push(M),m&&m(A)}).on("error",function(M){d=[],c(M)}).on("end",function(){try{var M=function(A,H,$){switch(A){case"blob":return i.newBlob(i.transformTo("arraybuffer",H),$);case"base64":return u.encode(H);default:return i.transformTo(A,H)}}(N,function(A,H){var $,W=0,le=null,C=0;for($=0;$<H.length;$++)C+=H[$].length;switch(A){case"string":return H.join("");case"array":return Array.prototype.concat.apply([],H);case"uint8array":for(le=new Uint8Array(C),$=0;$<H.length;$++)le.set(H[$],W),W+=H[$].length;return le;case"nodebuffer":return Buffer.concat(H);default:throw new Error("concat : unsupported type '"+A+"'")}}(x,d),j);b(M)}catch(A){c(A)}d=[]}).resume()})}function g(w,m,b){var c=m;switch(m){case"blob":case"arraybuffer":c="uint8array";break;case"base64":c="string"}try{this._internalType=c,this._outputType=m,this._mimeType=b,i.checkSupport(c),this._worker=w.pipe(new s(c)),w.lock()}catch(d){this._worker=new l("error"),this._worker.error(d)}}g.prototype={accumulate:function(w){return y(this,w)},on:function(w,m){var b=this;return w==="data"?this._worker.on(w,function(c){m.call(b,c.data,c.meta)}):this._worker.on(w,function(){i.delay(m,arguments,b)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new k(this,{objectMode:this._outputType!=="nodebuffer"},w)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(i),a.blob=s.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,a){for(var i=n("./utils"),s=n("./support"),l=n("./nodejsUtils"),u=n("./stream/GenericWorker"),p=new Array(256),v=0;v<256;v++)p[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;p[254]=p[254]=1;function k(){u.call(this,"utf-8 decode"),this.leftOver=null}function y(){u.call(this,"utf-8 encode")}a.utf8encode=function(g){return s.nodebuffer?l.newBufferFrom(g,"utf-8"):function(w){var m,b,c,d,x,N=w.length,j=0;for(d=0;d<N;d++)(64512&(b=w.charCodeAt(d)))==55296&&d+1<N&&(64512&(c=w.charCodeAt(d+1)))==56320&&(b=65536+(b-55296<<10)+(c-56320),d++),j+=b<128?1:b<2048?2:b<65536?3:4;for(m=s.uint8array?new Uint8Array(j):new Array(j),d=x=0;x<j;d++)(64512&(b=w.charCodeAt(d)))==55296&&d+1<N&&(64512&(c=w.charCodeAt(d+1)))==56320&&(b=65536+(b-55296<<10)+(c-56320),d++),b<128?m[x++]=b:(b<2048?m[x++]=192|b>>>6:(b<65536?m[x++]=224|b>>>12:(m[x++]=240|b>>>18,m[x++]=128|b>>>12&63),m[x++]=128|b>>>6&63),m[x++]=128|63&b);return m}(g)},a.utf8decode=function(g){return s.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):function(w){var m,b,c,d,x=w.length,N=new Array(2*x);for(m=b=0;m<x;)if((c=w[m++])<128)N[b++]=c;else if(4<(d=p[c]))N[b++]=65533,m+=d-1;else{for(c&=d===2?31:d===3?15:7;1<d&&m<x;)c=c<<6|63&w[m++],d--;1<d?N[b++]=65533:c<65536?N[b++]=c:(c-=65536,N[b++]=55296|c>>10&1023,N[b++]=56320|1023&c)}return N.length!==b&&(N.subarray?N=N.subarray(0,b):N.length=b),i.applyFromCharCode(N)}(g=i.transformTo(s.uint8array?"uint8array":"array",g))},i.inherits(k,u),k.prototype.processChunk=function(g){var w=i.transformTo(s.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var m=w;(w=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),w.set(m,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var b=function(d,x){var N;for((x=x||d.length)>d.length&&(x=d.length),N=x-1;0<=N&&(192&d[N])==128;)N--;return N<0||N===0?x:N+p[d[N]]>x?N:x}(w),c=w;b!==w.length&&(s.uint8array?(c=w.subarray(0,b),this.leftOver=w.subarray(b,w.length)):(c=w.slice(0,b),this.leftOver=w.slice(b,w.length))),this.push({data:a.utf8decode(c),meta:g.meta})},k.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=k,i.inherits(y,u),y.prototype.processChunk=function(g){this.push({data:a.utf8encode(g.data),meta:g.meta})},a.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,a){var i=n("./support"),s=n("./base64"),l=n("./nodejsUtils"),u=n("./external");function p(m){return m}function v(m,b){for(var c=0;c<m.length;++c)b[c]=255&m.charCodeAt(c);return b}n("setimmediate"),a.newBlob=function(m,b){a.checkSupport("blob");try{return new Blob([m],{type:b})}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return c.append(m),c.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var k={stringifyByChunk:function(m,b,c){var d=[],x=0,N=m.length;if(N<=c)return String.fromCharCode.apply(null,m);for(;x<N;)b==="array"||b==="nodebuffer"?d.push(String.fromCharCode.apply(null,m.slice(x,Math.min(x+c,N)))):d.push(String.fromCharCode.apply(null,m.subarray(x,Math.min(x+c,N)))),x+=c;return d.join("")},stringifyByChar:function(m){for(var b="",c=0;c<m.length;c++)b+=String.fromCharCode(m[c]);return b},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function y(m){var b=65536,c=a.getTypeOf(m),d=!0;if(c==="uint8array"?d=k.applyCanBeUsed.uint8array:c==="nodebuffer"&&(d=k.applyCanBeUsed.nodebuffer),d)for(;1<b;)try{return k.stringifyByChunk(m,c,b)}catch{b=Math.floor(b/2)}return k.stringifyByChar(m)}function g(m,b){for(var c=0;c<m.length;c++)b[c]=m[c];return b}a.applyFromCharCode=y;var w={};w.string={string:p,array:function(m){return v(m,new Array(m.length))},arraybuffer:function(m){return w.string.uint8array(m).buffer},uint8array:function(m){return v(m,new Uint8Array(m.length))},nodebuffer:function(m){return v(m,l.allocBuffer(m.length))}},w.array={string:y,array:p,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return l.newBufferFrom(m)}},w.arraybuffer={string:function(m){return y(new Uint8Array(m))},array:function(m){return g(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:p,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return l.newBufferFrom(new Uint8Array(m))}},w.uint8array={string:y,array:function(m){return g(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:p,nodebuffer:function(m){return l.newBufferFrom(m)}},w.nodebuffer={string:y,array:function(m){return g(m,new Array(m.length))},arraybuffer:function(m){return w.nodebuffer.uint8array(m).buffer},uint8array:function(m){return g(m,new Uint8Array(m.length))},nodebuffer:p},a.transformTo=function(m,b){if(b=b||"",!m)return b;a.checkSupport(m);var c=a.getTypeOf(b);return w[c][m](b)},a.resolve=function(m){for(var b=m.split("/"),c=[],d=0;d<b.length;d++){var x=b[d];x==="."||x===""&&d!==0&&d!==b.length-1||(x===".."?c.pop():c.push(x))}return c.join("/")},a.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":i.nodebuffer&&l.isBuffer(m)?"nodebuffer":i.uint8array&&m instanceof Uint8Array?"uint8array":i.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(m){if(!i[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(m){var b,c,d="";for(c=0;c<(m||"").length;c++)d+="\\x"+((b=m.charCodeAt(c))<16?"0":"")+b.toString(16).toUpperCase();return d},a.delay=function(m,b,c){setImmediate(function(){m.apply(c||null,b||[])})},a.inherits=function(m,b){function c(){}c.prototype=b.prototype,m.prototype=new c},a.extend=function(){var m,b,c={};for(m=0;m<arguments.length;m++)for(b in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],b)&&c[b]===void 0&&(c[b]=arguments[m][b]);return c},a.prepareContent=function(m,b,c,d,x){return u.Promise.resolve(b).then(function(N){return i.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new u.Promise(function(j,M){var A=new FileReader;A.onload=function(H){j(H.target.result)},A.onerror=function(H){M(H.target.error)},A.readAsArrayBuffer(N)}):N}).then(function(N){var j=a.getTypeOf(N);return j?(j==="arraybuffer"?N=a.transformTo("uint8array",N):j==="string"&&(x?N=s.decode(N):c&&d!==!0&&(N=function(M){return v(M,i.uint8array?new Uint8Array(M.length):new Array(M.length))}(N))),N):u.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,a){var i=n("./reader/readerFor"),s=n("./utils"),l=n("./signature"),u=n("./zipEntry"),p=n("./support");function v(k){this.files=[],this.loadOptions=k}v.prototype={checkSignature:function(k){if(!this.reader.readAndCheckSignature(k)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(y)+", expected "+s.pretty(k)+")")}},isSignature:function(k,y){var g=this.reader.index;this.reader.setIndex(k);var w=this.reader.readString(4)===y;return this.reader.setIndex(g),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var k=this.reader.readData(this.zipCommentLength),y=p.uint8array?"uint8array":"array",g=s.transformTo(y,k);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var k,y,g,w=this.zip64EndOfCentralSize-44;0<w;)k=this.reader.readInt(2),y=this.reader.readInt(4),g=this.reader.readData(y),this.zip64ExtensibleData[k]={id:k,length:y,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var k,y;for(k=0;k<this.files.length;k++)y=this.files[k],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var k;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(k=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(k);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var k=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(k<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(k);var y=k;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(k=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(k),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var w=y-g;if(0<w)this.isSignature(y,l.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(k){this.reader=i(k)},load:function(k){this.prepareReader(k),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=v},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,a){var i=n("./reader/readerFor"),s=n("./utils"),l=n("./compressedObject"),u=n("./crc32"),p=n("./utf8"),v=n("./compressions"),k=n("./support");function y(g,w){this.options=g,this.loadOptions=w}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var w,m;if(g.skip(22),this.fileNameLength=g.readInt(2),m=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(b){for(var c in v)if(Object.prototype.hasOwnProperty.call(v,c)&&v[c].magic===b)return v[c];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,w,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var w=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(w),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var w,m,b,c=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<c;)w=g.readInt(2),m=g.readInt(2),b=g.readData(m),this.extraFields[w]={id:w,length:m,value:b};g.setIndex(c)},handleUTF8:function(){var g=k.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var m=s.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var c=s.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(c)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var w=i(g.value);return w.readInt(1)!==1||u(this.fileName)!==w.readInt(4)?null:p.utf8decode(w.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var w=i(g.value);return w.readInt(1)!==1||u(this.fileComment)!==w.readInt(4)?null:p.utf8decode(w.readData(g.length-5))}return null}},r.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,a){function i(w,m,b){this.name=w,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=m,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var s=n("./stream/StreamHelper"),l=n("./stream/DataWorker"),u=n("./utf8"),p=n("./compressedObject"),v=n("./stream/GenericWorker");i.prototype={internalStream:function(w){var m=null,b="string";try{if(!w)throw new Error("No output type specified.");var c=(b=w.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),m=this._decompressWorker();var d=!this._dataBinary;d&&!c&&(m=m.pipe(new u.Utf8EncodeWorker)),!d&&c&&(m=m.pipe(new u.Utf8DecodeWorker))}catch(x){(m=new v("error")).error(x)}return new s(m,b,"")},async:function(w,m){return this.internalStream(w).accumulate(m)},nodeStream:function(w,m){return this.internalStream(w||"nodebuffer").toNodejsStream(m)},_compressWorker:function(w,m){if(this._data instanceof p&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new u.Utf8EncodeWorker)),p.createWorkerFrom(b,w,m)},_decompressWorker:function(){return this._data instanceof p?this._data.getContentWorker():this._data instanceof v?this._data:new l(this._data)}};for(var k=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<k.length;g++)i.prototype[k[g]]=y;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,a){(function(i){var s,l,u=i.MutationObserver||i.WebKitMutationObserver;if(u){var p=0,v=new u(w),k=i.document.createTextNode("");v.observe(k,{characterData:!0}),s=function(){k.data=p=++p%2}}else if(i.setImmediate||i.MessageChannel===void 0)s="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var m=i.document.createElement("script");m.onreadystatechange=function(){w(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},i.document.documentElement.appendChild(m)}:function(){setTimeout(w,0)};else{var y=new i.MessageChannel;y.port1.onmessage=w,s=function(){y.port2.postMessage(0)}}var g=[];function w(){var m,b;l=!0;for(var c=g.length;c;){for(b=g,g=[],m=-1;++m<c;)b[m]();c=g.length}l=!1}r.exports=function(m){g.push(m)!==1||l||s()}}).call(this,typeof bi<"u"?bi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,a){var i=n("immediate");function s(){}var l={},u=["REJECTED"],p=["FULFILLED"],v=["PENDING"];function k(c){if(typeof c!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,c!==s&&m(this,c)}function y(c,d,x){this.promise=c,typeof d=="function"&&(this.onFulfilled=d,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}function g(c,d,x){i(function(){var N;try{N=d(x)}catch(j){return l.reject(c,j)}N===c?l.reject(c,new TypeError("Cannot resolve promise with itself")):l.resolve(c,N)})}function w(c){var d=c&&c.then;if(c&&(typeof c=="object"||typeof c=="function")&&typeof d=="function")return function(){d.apply(c,arguments)}}function m(c,d){var x=!1;function N(A){x||(x=!0,l.reject(c,A))}function j(A){x||(x=!0,l.resolve(c,A))}var M=b(function(){d(j,N)});M.status==="error"&&N(M.value)}function b(c,d){var x={};try{x.value=c(d),x.status="success"}catch(N){x.status="error",x.value=N}return x}(r.exports=k).prototype.finally=function(c){if(typeof c!="function")return this;var d=this.constructor;return this.then(function(x){return d.resolve(c()).then(function(){return x})},function(x){return d.resolve(c()).then(function(){throw x})})},k.prototype.catch=function(c){return this.then(null,c)},k.prototype.then=function(c,d){if(typeof c!="function"&&this.state===p||typeof d!="function"&&this.state===u)return this;var x=new this.constructor(s);return this.state!==v?g(x,this.state===p?c:d,this.outcome):this.queue.push(new y(x,c,d)),x},y.prototype.callFulfilled=function(c){l.resolve(this.promise,c)},y.prototype.otherCallFulfilled=function(c){g(this.promise,this.onFulfilled,c)},y.prototype.callRejected=function(c){l.reject(this.promise,c)},y.prototype.otherCallRejected=function(c){g(this.promise,this.onRejected,c)},l.resolve=function(c,d){var x=b(w,d);if(x.status==="error")return l.reject(c,x.value);var N=x.value;if(N)m(c,N);else{c.state=p,c.outcome=d;for(var j=-1,M=c.queue.length;++j<M;)c.queue[j].callFulfilled(d)}return c},l.reject=function(c,d){c.state=u,c.outcome=d;for(var x=-1,N=c.queue.length;++x<N;)c.queue[x].callRejected(d);return c},k.resolve=function(c){return c instanceof this?c:l.resolve(new this(s),c)},k.reject=function(c){var d=new this(s);return l.reject(d,c)},k.all=function(c){var d=this;if(Object.prototype.toString.call(c)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=c.length,N=!1;if(!x)return this.resolve([]);for(var j=new Array(x),M=0,A=-1,H=new this(s);++A<x;)$(c[A],A);return H;function $(W,le){d.resolve(W).then(function(C){j[le]=C,++M!==x||N||(N=!0,l.resolve(H,j))},function(C){N||(N=!0,l.reject(H,C))})}},k.race=function(c){var d=this;if(Object.prototype.toString.call(c)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=c.length,N=!1;if(!x)return this.resolve([]);for(var j=-1,M=new this(s);++j<x;)A=c[j],d.resolve(A).then(function(H){N||(N=!0,l.resolve(M,H))},function(H){N||(N=!0,l.reject(M,H))});var A;return M}},{immediate:36}],38:[function(n,r,a){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,a){var i=n("./zlib/deflate"),s=n("./utils/common"),l=n("./utils/strings"),u=n("./zlib/messages"),p=n("./zlib/zstream"),v=Object.prototype.toString,k=0,y=-1,g=0,w=8;function m(c){if(!(this instanceof m))return new m(c);this.options=s.assign({level:y,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},c||{});var d=this.options;d.raw&&0<d.windowBits?d.windowBits=-d.windowBits:d.gzip&&0<d.windowBits&&d.windowBits<16&&(d.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var x=i.deflateInit2(this.strm,d.level,d.method,d.windowBits,d.memLevel,d.strategy);if(x!==k)throw new Error(u[x]);if(d.header&&i.deflateSetHeader(this.strm,d.header),d.dictionary){var N;if(N=typeof d.dictionary=="string"?l.string2buf(d.dictionary):v.call(d.dictionary)==="[object ArrayBuffer]"?new Uint8Array(d.dictionary):d.dictionary,(x=i.deflateSetDictionary(this.strm,N))!==k)throw new Error(u[x]);this._dict_set=!0}}function b(c,d){var x=new m(d);if(x.push(c,!0),x.err)throw x.msg||u[x.err];return x.result}m.prototype.push=function(c,d){var x,N,j=this.strm,M=this.options.chunkSize;if(this.ended)return!1;N=d===~~d?d:d===!0?4:0,typeof c=="string"?j.input=l.string2buf(c):v.call(c)==="[object ArrayBuffer]"?j.input=new Uint8Array(c):j.input=c,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new s.Buf8(M),j.next_out=0,j.avail_out=M),(x=i.deflate(j,N))!==1&&x!==k)return this.onEnd(x),!(this.ended=!0);j.avail_out!==0&&(j.avail_in!==0||N!==4&&N!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(s.shrinkBuf(j.output,j.next_out))):this.onData(s.shrinkBuf(j.output,j.next_out)))}while((0<j.avail_in||j.avail_out===0)&&x!==1);return N===4?(x=i.deflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===k):N!==2||(this.onEnd(k),!(j.avail_out=0))},m.prototype.onData=function(c){this.chunks.push(c)},m.prototype.onEnd=function(c){c===k&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg},a.Deflate=m,a.deflate=b,a.deflateRaw=function(c,d){return(d=d||{}).raw=!0,b(c,d)},a.gzip=function(c,d){return(d=d||{}).gzip=!0,b(c,d)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,a){var i=n("./zlib/inflate"),s=n("./utils/common"),l=n("./utils/strings"),u=n("./zlib/constants"),p=n("./zlib/messages"),v=n("./zlib/zstream"),k=n("./zlib/gzheader"),y=Object.prototype.toString;function g(m){if(!(this instanceof g))return new g(m);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},m||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||m&&m.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var c=i.inflateInit2(this.strm,b.windowBits);if(c!==u.Z_OK)throw new Error(p[c]);this.header=new k,i.inflateGetHeader(this.strm,this.header)}function w(m,b){var c=new g(b);if(c.push(m,!0),c.err)throw c.msg||p[c.err];return c.result}g.prototype.push=function(m,b){var c,d,x,N,j,M,A=this.strm,H=this.options.chunkSize,$=this.options.dictionary,W=!1;if(this.ended)return!1;d=b===~~b?b:b===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof m=="string"?A.input=l.binstring2buf(m):y.call(m)==="[object ArrayBuffer]"?A.input=new Uint8Array(m):A.input=m,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new s.Buf8(H),A.next_out=0,A.avail_out=H),(c=i.inflate(A,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&$&&(M=typeof $=="string"?l.string2buf($):y.call($)==="[object ArrayBuffer]"?new Uint8Array($):$,c=i.inflateSetDictionary(this.strm,M)),c===u.Z_BUF_ERROR&&W===!0&&(c=u.Z_OK,W=!1),c!==u.Z_STREAM_END&&c!==u.Z_OK)return this.onEnd(c),!(this.ended=!0);A.next_out&&(A.avail_out!==0&&c!==u.Z_STREAM_END&&(A.avail_in!==0||d!==u.Z_FINISH&&d!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(x=l.utf8border(A.output,A.next_out),N=A.next_out-x,j=l.buf2string(A.output,x),A.next_out=N,A.avail_out=H-N,N&&s.arraySet(A.output,A.output,x,N,0),this.onData(j)):this.onData(s.shrinkBuf(A.output,A.next_out)))),A.avail_in===0&&A.avail_out===0&&(W=!0)}while((0<A.avail_in||A.avail_out===0)&&c!==u.Z_STREAM_END);return c===u.Z_STREAM_END&&(d=u.Z_FINISH),d===u.Z_FINISH?(c=i.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===u.Z_OK):d!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(A.avail_out=0))},g.prototype.onData=function(m){this.chunks.push(m)},g.prototype.onEnd=function(m){m===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},a.Inflate=g,a.inflate=w,a.inflateRaw=function(m,b){return(b=b||{}).raw=!0,w(m,b)},a.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(u){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var v=p.shift();if(v){if(typeof v!="object")throw new TypeError(v+"must be non-object");for(var k in v)v.hasOwnProperty(k)&&(u[k]=v[k])}}return u},a.shrinkBuf=function(u,p){return u.length===p?u:u.subarray?u.subarray(0,p):(u.length=p,u)};var s={arraySet:function(u,p,v,k,y){if(p.subarray&&u.subarray)u.set(p.subarray(v,v+k),y);else for(var g=0;g<k;g++)u[y+g]=p[v+g]},flattenChunks:function(u){var p,v,k,y,g,w;for(p=k=0,v=u.length;p<v;p++)k+=u[p].length;for(w=new Uint8Array(k),p=y=0,v=u.length;p<v;p++)g=u[p],w.set(g,y),y+=g.length;return w}},l={arraySet:function(u,p,v,k,y){for(var g=0;g<k;g++)u[y+g]=p[v+g]},flattenChunks:function(u){return[].concat.apply([],u)}};a.setTyped=function(u){u?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,s)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,l))},a.setTyped(i)},{}],42:[function(n,r,a){var i=n("./common"),s=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var u=new i.Buf8(256),p=0;p<256;p++)u[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function v(k,y){if(y<65537&&(k.subarray&&l||!k.subarray&&s))return String.fromCharCode.apply(null,i.shrinkBuf(k,y));for(var g="",w=0;w<y;w++)g+=String.fromCharCode(k[w]);return g}u[254]=u[254]=1,a.string2buf=function(k){var y,g,w,m,b,c=k.length,d=0;for(m=0;m<c;m++)(64512&(g=k.charCodeAt(m)))==55296&&m+1<c&&(64512&(w=k.charCodeAt(m+1)))==56320&&(g=65536+(g-55296<<10)+(w-56320),m++),d+=g<128?1:g<2048?2:g<65536?3:4;for(y=new i.Buf8(d),m=b=0;b<d;m++)(64512&(g=k.charCodeAt(m)))==55296&&m+1<c&&(64512&(w=k.charCodeAt(m+1)))==56320&&(g=65536+(g-55296<<10)+(w-56320),m++),g<128?y[b++]=g:(g<2048?y[b++]=192|g>>>6:(g<65536?y[b++]=224|g>>>12:(y[b++]=240|g>>>18,y[b++]=128|g>>>12&63),y[b++]=128|g>>>6&63),y[b++]=128|63&g);return y},a.buf2binstring=function(k){return v(k,k.length)},a.binstring2buf=function(k){for(var y=new i.Buf8(k.length),g=0,w=y.length;g<w;g++)y[g]=k.charCodeAt(g);return y},a.buf2string=function(k,y){var g,w,m,b,c=y||k.length,d=new Array(2*c);for(g=w=0;g<c;)if((m=k[g++])<128)d[w++]=m;else if(4<(b=u[m]))d[w++]=65533,g+=b-1;else{for(m&=b===2?31:b===3?15:7;1<b&&g<c;)m=m<<6|63&k[g++],b--;1<b?d[w++]=65533:m<65536?d[w++]=m:(m-=65536,d[w++]=55296|m>>10&1023,d[w++]=56320|1023&m)}return v(d,w)},a.utf8border=function(k,y){var g;for((y=y||k.length)>k.length&&(y=k.length),g=y-1;0<=g&&(192&k[g])==128;)g--;return g<0||g===0?y:g+u[k[g]]>y?g:y}},{"./common":41}],43:[function(n,r,a){r.exports=function(i,s,l,u){for(var p=65535&i|0,v=i>>>16&65535|0,k=0;l!==0;){for(l-=k=2e3<l?2e3:l;v=v+(p=p+s[u++]|0)|0,--k;);p%=65521,v%=65521}return p|v<<16|0}},{}],44:[function(n,r,a){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,a){var i=function(){for(var s,l=[],u=0;u<256;u++){s=u;for(var p=0;p<8;p++)s=1&s?3988292384^s>>>1:s>>>1;l[u]=s}return l}();r.exports=function(s,l,u,p){var v=i,k=p+u;s^=-1;for(var y=p;y<k;y++)s=s>>>8^v[255&(s^l[y])];return-1^s}},{}],46:[function(n,r,a){var i,s=n("../utils/common"),l=n("./trees"),u=n("./adler32"),p=n("./crc32"),v=n("./messages"),k=0,y=4,g=0,w=-2,m=-1,b=4,c=2,d=8,x=9,N=286,j=30,M=19,A=2*N+1,H=15,$=3,W=258,le=W+$+1,C=42,z=113,h=1,V=2,K=3,F=4;function D(f,q){return f.msg=v[q],q}function U(f){return(f<<1)-(4<f?9:0)}function X(f){for(var q=f.length;0<=--q;)f[q]=0}function T(f){var q=f.state,Z=q.pending;Z>f.avail_out&&(Z=f.avail_out),Z!==0&&(s.arraySet(f.output,q.pending_buf,q.pending_out,Z,f.next_out),f.next_out+=Z,q.pending_out+=Z,f.total_out+=Z,f.avail_out-=Z,q.pending-=Z,q.pending===0&&(q.pending_out=0))}function L(f,q){l._tr_flush_block(f,0<=f.block_start?f.block_start:-1,f.strstart-f.block_start,q),f.block_start=f.strstart,T(f.strm)}function Y(f,q){f.pending_buf[f.pending++]=q}function ee(f,q){f.pending_buf[f.pending++]=q>>>8&255,f.pending_buf[f.pending++]=255&q}function te(f,q){var Z,E,_=f.max_chain_length,I=f.strstart,ne=f.prev_length,ae=f.nice_match,G=f.strstart>f.w_size-le?f.strstart-(f.w_size-le):0,ie=f.window,he=f.w_mask,oe=f.prev,ge=f.strstart+W,Ee=ie[I+ne-1],Se=ie[I+ne];f.prev_length>=f.good_match&&(_>>=2),ae>f.lookahead&&(ae=f.lookahead);do if(ie[(Z=q)+ne]===Se&&ie[Z+ne-1]===Ee&&ie[Z]===ie[I]&&ie[++Z]===ie[I+1]){I+=2,Z++;do;while(ie[++I]===ie[++Z]&&ie[++I]===ie[++Z]&&ie[++I]===ie[++Z]&&ie[++I]===ie[++Z]&&ie[++I]===ie[++Z]&&ie[++I]===ie[++Z]&&ie[++I]===ie[++Z]&&ie[++I]===ie[++Z]&&I<ge);if(E=W-(ge-I),I=ge-W,ne<E){if(f.match_start=q,ae<=(ne=E))break;Ee=ie[I+ne-1],Se=ie[I+ne]}}while((q=oe[q&he])>G&&--_!=0);return ne<=f.lookahead?ne:f.lookahead}function pe(f){var q,Z,E,_,I,ne,ae,G,ie,he,oe=f.w_size;do{if(_=f.window_size-f.lookahead-f.strstart,f.strstart>=oe+(oe-le)){for(s.arraySet(f.window,f.window,oe,oe,0),f.match_start-=oe,f.strstart-=oe,f.block_start-=oe,q=Z=f.hash_size;E=f.head[--q],f.head[q]=oe<=E?E-oe:0,--Z;);for(q=Z=oe;E=f.prev[--q],f.prev[q]=oe<=E?E-oe:0,--Z;);_+=oe}if(f.strm.avail_in===0)break;if(ne=f.strm,ae=f.window,G=f.strstart+f.lookahead,ie=_,he=void 0,he=ne.avail_in,ie<he&&(he=ie),Z=he===0?0:(ne.avail_in-=he,s.arraySet(ae,ne.input,ne.next_in,he,G),ne.state.wrap===1?ne.adler=u(ne.adler,ae,he,G):ne.state.wrap===2&&(ne.adler=p(ne.adler,ae,he,G)),ne.next_in+=he,ne.total_in+=he,he),f.lookahead+=Z,f.lookahead+f.insert>=$)for(I=f.strstart-f.insert,f.ins_h=f.window[I],f.ins_h=(f.ins_h<<f.hash_shift^f.window[I+1])&f.hash_mask;f.insert&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[I+$-1])&f.hash_mask,f.prev[I&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=I,I++,f.insert--,!(f.lookahead+f.insert<$)););}while(f.lookahead<le&&f.strm.avail_in!==0)}function ke(f,q){for(var Z,E;;){if(f.lookahead<le){if(pe(f),f.lookahead<le&&q===k)return h;if(f.lookahead===0)break}if(Z=0,f.lookahead>=$&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+$-1])&f.hash_mask,Z=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),Z!==0&&f.strstart-Z<=f.w_size-le&&(f.match_length=te(f,Z)),f.match_length>=$)if(E=l._tr_tally(f,f.strstart-f.match_start,f.match_length-$),f.lookahead-=f.match_length,f.match_length<=f.max_lazy_match&&f.lookahead>=$){for(f.match_length--;f.strstart++,f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+$-1])&f.hash_mask,Z=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart,--f.match_length!=0;);f.strstart++}else f.strstart+=f.match_length,f.match_length=0,f.ins_h=f.window[f.strstart],f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+1])&f.hash_mask;else E=l._tr_tally(f,0,f.window[f.strstart]),f.lookahead--,f.strstart++;if(E&&(L(f,!1),f.strm.avail_out===0))return h}return f.insert=f.strstart<$-1?f.strstart:$-1,q===y?(L(f,!0),f.strm.avail_out===0?K:F):f.last_lit&&(L(f,!1),f.strm.avail_out===0)?h:V}function me(f,q){for(var Z,E,_;;){if(f.lookahead<le){if(pe(f),f.lookahead<le&&q===k)return h;if(f.lookahead===0)break}if(Z=0,f.lookahead>=$&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+$-1])&f.hash_mask,Z=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),f.prev_length=f.match_length,f.prev_match=f.match_start,f.match_length=$-1,Z!==0&&f.prev_length<f.max_lazy_match&&f.strstart-Z<=f.w_size-le&&(f.match_length=te(f,Z),f.match_length<=5&&(f.strategy===1||f.match_length===$&&4096<f.strstart-f.match_start)&&(f.match_length=$-1)),f.prev_length>=$&&f.match_length<=f.prev_length){for(_=f.strstart+f.lookahead-$,E=l._tr_tally(f,f.strstart-1-f.prev_match,f.prev_length-$),f.lookahead-=f.prev_length-1,f.prev_length-=2;++f.strstart<=_&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+$-1])&f.hash_mask,Z=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),--f.prev_length!=0;);if(f.match_available=0,f.match_length=$-1,f.strstart++,E&&(L(f,!1),f.strm.avail_out===0))return h}else if(f.match_available){if((E=l._tr_tally(f,0,f.window[f.strstart-1]))&&L(f,!1),f.strstart++,f.lookahead--,f.strm.avail_out===0)return h}else f.match_available=1,f.strstart++,f.lookahead--}return f.match_available&&(E=l._tr_tally(f,0,f.window[f.strstart-1]),f.match_available=0),f.insert=f.strstart<$-1?f.strstart:$-1,q===y?(L(f,!0),f.strm.avail_out===0?K:F):f.last_lit&&(L(f,!1),f.strm.avail_out===0)?h:V}function ve(f,q,Z,E,_){this.good_length=f,this.max_lazy=q,this.nice_length=Z,this.max_chain=E,this.func=_}function Ne(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=d,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*A),this.dyn_dtree=new s.Buf16(2*(2*j+1)),this.bl_tree=new s.Buf16(2*(2*M+1)),X(this.dyn_ltree),X(this.dyn_dtree),X(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(H+1),this.heap=new s.Buf16(2*N+1),X(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*N+1),X(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Te(f){var q;return f&&f.state?(f.total_in=f.total_out=0,f.data_type=c,(q=f.state).pending=0,q.pending_out=0,q.wrap<0&&(q.wrap=-q.wrap),q.status=q.wrap?C:z,f.adler=q.wrap===2?0:1,q.last_flush=k,l._tr_init(q),g):D(f,w)}function $e(f){var q=Te(f);return q===g&&function(Z){Z.window_size=2*Z.w_size,X(Z.head),Z.max_lazy_match=i[Z.level].max_lazy,Z.good_match=i[Z.level].good_length,Z.nice_match=i[Z.level].nice_length,Z.max_chain_length=i[Z.level].max_chain,Z.strstart=0,Z.block_start=0,Z.lookahead=0,Z.insert=0,Z.match_length=Z.prev_length=$-1,Z.match_available=0,Z.ins_h=0}(f.state),q}function Xe(f,q,Z,E,_,I){if(!f)return w;var ne=1;if(q===m&&(q=6),E<0?(ne=0,E=-E):15<E&&(ne=2,E-=16),_<1||x<_||Z!==d||E<8||15<E||q<0||9<q||I<0||b<I)return D(f,w);E===8&&(E=9);var ae=new Ne;return(f.state=ae).strm=f,ae.wrap=ne,ae.gzhead=null,ae.w_bits=E,ae.w_size=1<<ae.w_bits,ae.w_mask=ae.w_size-1,ae.hash_bits=_+7,ae.hash_size=1<<ae.hash_bits,ae.hash_mask=ae.hash_size-1,ae.hash_shift=~~((ae.hash_bits+$-1)/$),ae.window=new s.Buf8(2*ae.w_size),ae.head=new s.Buf16(ae.hash_size),ae.prev=new s.Buf16(ae.w_size),ae.lit_bufsize=1<<_+6,ae.pending_buf_size=4*ae.lit_bufsize,ae.pending_buf=new s.Buf8(ae.pending_buf_size),ae.d_buf=1*ae.lit_bufsize,ae.l_buf=3*ae.lit_bufsize,ae.level=q,ae.strategy=I,ae.method=Z,$e(f)}i=[new ve(0,0,0,0,function(f,q){var Z=65535;for(Z>f.pending_buf_size-5&&(Z=f.pending_buf_size-5);;){if(f.lookahead<=1){if(pe(f),f.lookahead===0&&q===k)return h;if(f.lookahead===0)break}f.strstart+=f.lookahead,f.lookahead=0;var E=f.block_start+Z;if((f.strstart===0||f.strstart>=E)&&(f.lookahead=f.strstart-E,f.strstart=E,L(f,!1),f.strm.avail_out===0)||f.strstart-f.block_start>=f.w_size-le&&(L(f,!1),f.strm.avail_out===0))return h}return f.insert=0,q===y?(L(f,!0),f.strm.avail_out===0?K:F):(f.strstart>f.block_start&&(L(f,!1),f.strm.avail_out),h)}),new ve(4,4,8,4,ke),new ve(4,5,16,8,ke),new ve(4,6,32,32,ke),new ve(4,4,16,16,me),new ve(8,16,32,32,me),new ve(8,16,128,128,me),new ve(8,32,128,256,me),new ve(32,128,258,1024,me),new ve(32,258,258,4096,me)],a.deflateInit=function(f,q){return Xe(f,q,d,15,8,0)},a.deflateInit2=Xe,a.deflateReset=$e,a.deflateResetKeep=Te,a.deflateSetHeader=function(f,q){return f&&f.state?f.state.wrap!==2?w:(f.state.gzhead=q,g):w},a.deflate=function(f,q){var Z,E,_,I;if(!f||!f.state||5<q||q<0)return f?D(f,w):w;if(E=f.state,!f.output||!f.input&&f.avail_in!==0||E.status===666&&q!==y)return D(f,f.avail_out===0?-5:w);if(E.strm=f,Z=E.last_flush,E.last_flush=q,E.status===C)if(E.wrap===2)f.adler=0,Y(E,31),Y(E,139),Y(E,8),E.gzhead?(Y(E,(E.gzhead.text?1:0)+(E.gzhead.hcrc?2:0)+(E.gzhead.extra?4:0)+(E.gzhead.name?8:0)+(E.gzhead.comment?16:0)),Y(E,255&E.gzhead.time),Y(E,E.gzhead.time>>8&255),Y(E,E.gzhead.time>>16&255),Y(E,E.gzhead.time>>24&255),Y(E,E.level===9?2:2<=E.strategy||E.level<2?4:0),Y(E,255&E.gzhead.os),E.gzhead.extra&&E.gzhead.extra.length&&(Y(E,255&E.gzhead.extra.length),Y(E,E.gzhead.extra.length>>8&255)),E.gzhead.hcrc&&(f.adler=p(f.adler,E.pending_buf,E.pending,0)),E.gzindex=0,E.status=69):(Y(E,0),Y(E,0),Y(E,0),Y(E,0),Y(E,0),Y(E,E.level===9?2:2<=E.strategy||E.level<2?4:0),Y(E,3),E.status=z);else{var ne=d+(E.w_bits-8<<4)<<8;ne|=(2<=E.strategy||E.level<2?0:E.level<6?1:E.level===6?2:3)<<6,E.strstart!==0&&(ne|=32),ne+=31-ne%31,E.status=z,ee(E,ne),E.strstart!==0&&(ee(E,f.adler>>>16),ee(E,65535&f.adler)),f.adler=1}if(E.status===69)if(E.gzhead.extra){for(_=E.pending;E.gzindex<(65535&E.gzhead.extra.length)&&(E.pending!==E.pending_buf_size||(E.gzhead.hcrc&&E.pending>_&&(f.adler=p(f.adler,E.pending_buf,E.pending-_,_)),T(f),_=E.pending,E.pending!==E.pending_buf_size));)Y(E,255&E.gzhead.extra[E.gzindex]),E.gzindex++;E.gzhead.hcrc&&E.pending>_&&(f.adler=p(f.adler,E.pending_buf,E.pending-_,_)),E.gzindex===E.gzhead.extra.length&&(E.gzindex=0,E.status=73)}else E.status=73;if(E.status===73)if(E.gzhead.name){_=E.pending;do{if(E.pending===E.pending_buf_size&&(E.gzhead.hcrc&&E.pending>_&&(f.adler=p(f.adler,E.pending_buf,E.pending-_,_)),T(f),_=E.pending,E.pending===E.pending_buf_size)){I=1;break}I=E.gzindex<E.gzhead.name.length?255&E.gzhead.name.charCodeAt(E.gzindex++):0,Y(E,I)}while(I!==0);E.gzhead.hcrc&&E.pending>_&&(f.adler=p(f.adler,E.pending_buf,E.pending-_,_)),I===0&&(E.gzindex=0,E.status=91)}else E.status=91;if(E.status===91)if(E.gzhead.comment){_=E.pending;do{if(E.pending===E.pending_buf_size&&(E.gzhead.hcrc&&E.pending>_&&(f.adler=p(f.adler,E.pending_buf,E.pending-_,_)),T(f),_=E.pending,E.pending===E.pending_buf_size)){I=1;break}I=E.gzindex<E.gzhead.comment.length?255&E.gzhead.comment.charCodeAt(E.gzindex++):0,Y(E,I)}while(I!==0);E.gzhead.hcrc&&E.pending>_&&(f.adler=p(f.adler,E.pending_buf,E.pending-_,_)),I===0&&(E.status=103)}else E.status=103;if(E.status===103&&(E.gzhead.hcrc?(E.pending+2>E.pending_buf_size&&T(f),E.pending+2<=E.pending_buf_size&&(Y(E,255&f.adler),Y(E,f.adler>>8&255),f.adler=0,E.status=z)):E.status=z),E.pending!==0){if(T(f),f.avail_out===0)return E.last_flush=-1,g}else if(f.avail_in===0&&U(q)<=U(Z)&&q!==y)return D(f,-5);if(E.status===666&&f.avail_in!==0)return D(f,-5);if(f.avail_in!==0||E.lookahead!==0||q!==k&&E.status!==666){var ae=E.strategy===2?function(G,ie){for(var he;;){if(G.lookahead===0&&(pe(G),G.lookahead===0)){if(ie===k)return h;break}if(G.match_length=0,he=l._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++,he&&(L(G,!1),G.strm.avail_out===0))return h}return G.insert=0,ie===y?(L(G,!0),G.strm.avail_out===0?K:F):G.last_lit&&(L(G,!1),G.strm.avail_out===0)?h:V}(E,q):E.strategy===3?function(G,ie){for(var he,oe,ge,Ee,Se=G.window;;){if(G.lookahead<=W){if(pe(G),G.lookahead<=W&&ie===k)return h;if(G.lookahead===0)break}if(G.match_length=0,G.lookahead>=$&&0<G.strstart&&(oe=Se[ge=G.strstart-1])===Se[++ge]&&oe===Se[++ge]&&oe===Se[++ge]){Ee=G.strstart+W;do;while(oe===Se[++ge]&&oe===Se[++ge]&&oe===Se[++ge]&&oe===Se[++ge]&&oe===Se[++ge]&&oe===Se[++ge]&&oe===Se[++ge]&&oe===Se[++ge]&&ge<Ee);G.match_length=W-(Ee-ge),G.match_length>G.lookahead&&(G.match_length=G.lookahead)}if(G.match_length>=$?(he=l._tr_tally(G,1,G.match_length-$),G.lookahead-=G.match_length,G.strstart+=G.match_length,G.match_length=0):(he=l._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++),he&&(L(G,!1),G.strm.avail_out===0))return h}return G.insert=0,ie===y?(L(G,!0),G.strm.avail_out===0?K:F):G.last_lit&&(L(G,!1),G.strm.avail_out===0)?h:V}(E,q):i[E.level].func(E,q);if(ae!==K&&ae!==F||(E.status=666),ae===h||ae===K)return f.avail_out===0&&(E.last_flush=-1),g;if(ae===V&&(q===1?l._tr_align(E):q!==5&&(l._tr_stored_block(E,0,0,!1),q===3&&(X(E.head),E.lookahead===0&&(E.strstart=0,E.block_start=0,E.insert=0))),T(f),f.avail_out===0))return E.last_flush=-1,g}return q!==y?g:E.wrap<=0?1:(E.wrap===2?(Y(E,255&f.adler),Y(E,f.adler>>8&255),Y(E,f.adler>>16&255),Y(E,f.adler>>24&255),Y(E,255&f.total_in),Y(E,f.total_in>>8&255),Y(E,f.total_in>>16&255),Y(E,f.total_in>>24&255)):(ee(E,f.adler>>>16),ee(E,65535&f.adler)),T(f),0<E.wrap&&(E.wrap=-E.wrap),E.pending!==0?g:1)},a.deflateEnd=function(f){var q;return f&&f.state?(q=f.state.status)!==C&&q!==69&&q!==73&&q!==91&&q!==103&&q!==z&&q!==666?D(f,w):(f.state=null,q===z?D(f,-3):g):w},a.deflateSetDictionary=function(f,q){var Z,E,_,I,ne,ae,G,ie,he=q.length;if(!f||!f.state||(I=(Z=f.state).wrap)===2||I===1&&Z.status!==C||Z.lookahead)return w;for(I===1&&(f.adler=u(f.adler,q,he,0)),Z.wrap=0,he>=Z.w_size&&(I===0&&(X(Z.head),Z.strstart=0,Z.block_start=0,Z.insert=0),ie=new s.Buf8(Z.w_size),s.arraySet(ie,q,he-Z.w_size,Z.w_size,0),q=ie,he=Z.w_size),ne=f.avail_in,ae=f.next_in,G=f.input,f.avail_in=he,f.next_in=0,f.input=q,pe(Z);Z.lookahead>=$;){for(E=Z.strstart,_=Z.lookahead-($-1);Z.ins_h=(Z.ins_h<<Z.hash_shift^Z.window[E+$-1])&Z.hash_mask,Z.prev[E&Z.w_mask]=Z.head[Z.ins_h],Z.head[Z.ins_h]=E,E++,--_;);Z.strstart=E,Z.lookahead=$-1,pe(Z)}return Z.strstart+=Z.lookahead,Z.block_start=Z.strstart,Z.insert=Z.lookahead,Z.lookahead=0,Z.match_length=Z.prev_length=$-1,Z.match_available=0,f.next_in=ae,f.input=G,f.avail_in=ne,Z.wrap=I,g},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,a){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,a){r.exports=function(i,s){var l,u,p,v,k,y,g,w,m,b,c,d,x,N,j,M,A,H,$,W,le,C,z,h,V;l=i.state,u=i.next_in,h=i.input,p=u+(i.avail_in-5),v=i.next_out,V=i.output,k=v-(s-i.avail_out),y=v+(i.avail_out-257),g=l.dmax,w=l.wsize,m=l.whave,b=l.wnext,c=l.window,d=l.hold,x=l.bits,N=l.lencode,j=l.distcode,M=(1<<l.lenbits)-1,A=(1<<l.distbits)-1;e:do{x<15&&(d+=h[u++]<<x,x+=8,d+=h[u++]<<x,x+=8),H=N[d&M];t:for(;;){if(d>>>=$=H>>>24,x-=$,($=H>>>16&255)===0)V[v++]=65535&H;else{if(!(16&$)){if(!(64&$)){H=N[(65535&H)+(d&(1<<$)-1)];continue t}if(32&$){l.mode=12;break e}i.msg="invalid literal/length code",l.mode=30;break e}W=65535&H,($&=15)&&(x<$&&(d+=h[u++]<<x,x+=8),W+=d&(1<<$)-1,d>>>=$,x-=$),x<15&&(d+=h[u++]<<x,x+=8,d+=h[u++]<<x,x+=8),H=j[d&A];n:for(;;){if(d>>>=$=H>>>24,x-=$,!(16&($=H>>>16&255))){if(!(64&$)){H=j[(65535&H)+(d&(1<<$)-1)];continue n}i.msg="invalid distance code",l.mode=30;break e}if(le=65535&H,x<($&=15)&&(d+=h[u++]<<x,(x+=8)<$&&(d+=h[u++]<<x,x+=8)),g<(le+=d&(1<<$)-1)){i.msg="invalid distance too far back",l.mode=30;break e}if(d>>>=$,x-=$,($=v-k)<le){if(m<($=le-$)&&l.sane){i.msg="invalid distance too far back",l.mode=30;break e}if(z=c,(C=0)===b){if(C+=w-$,$<W){for(W-=$;V[v++]=c[C++],--$;);C=v-le,z=V}}else if(b<$){if(C+=w+b-$,($-=b)<W){for(W-=$;V[v++]=c[C++],--$;);if(C=0,b<W){for(W-=$=b;V[v++]=c[C++],--$;);C=v-le,z=V}}}else if(C+=b-$,$<W){for(W-=$;V[v++]=c[C++],--$;);C=v-le,z=V}for(;2<W;)V[v++]=z[C++],V[v++]=z[C++],V[v++]=z[C++],W-=3;W&&(V[v++]=z[C++],1<W&&(V[v++]=z[C++]))}else{for(C=v-le;V[v++]=V[C++],V[v++]=V[C++],V[v++]=V[C++],2<(W-=3););W&&(V[v++]=V[C++],1<W&&(V[v++]=V[C++]))}break}}break}}while(u<p&&v<y);u-=W=x>>3,d&=(1<<(x-=W<<3))-1,i.next_in=u,i.next_out=v,i.avail_in=u<p?p-u+5:5-(u-p),i.avail_out=v<y?y-v+257:257-(v-y),l.hold=d,l.bits=x}},{}],49:[function(n,r,a){var i=n("../utils/common"),s=n("./adler32"),l=n("./crc32"),u=n("./inffast"),p=n("./inftrees"),v=1,k=2,y=0,g=-2,w=1,m=852,b=592;function c(C){return(C>>>24&255)+(C>>>8&65280)+((65280&C)<<8)+((255&C)<<24)}function d(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function x(C){var z;return C&&C.state?(z=C.state,C.total_in=C.total_out=z.total=0,C.msg="",z.wrap&&(C.adler=1&z.wrap),z.mode=w,z.last=0,z.havedict=0,z.dmax=32768,z.head=null,z.hold=0,z.bits=0,z.lencode=z.lendyn=new i.Buf32(m),z.distcode=z.distdyn=new i.Buf32(b),z.sane=1,z.back=-1,y):g}function N(C){var z;return C&&C.state?((z=C.state).wsize=0,z.whave=0,z.wnext=0,x(C)):g}function j(C,z){var h,V;return C&&C.state?(V=C.state,z<0?(h=0,z=-z):(h=1+(z>>4),z<48&&(z&=15)),z&&(z<8||15<z)?g:(V.window!==null&&V.wbits!==z&&(V.window=null),V.wrap=h,V.wbits=z,N(C))):g}function M(C,z){var h,V;return C?(V=new d,(C.state=V).window=null,(h=j(C,z))!==y&&(C.state=null),h):g}var A,H,$=!0;function W(C){if($){var z;for(A=new i.Buf32(512),H=new i.Buf32(32),z=0;z<144;)C.lens[z++]=8;for(;z<256;)C.lens[z++]=9;for(;z<280;)C.lens[z++]=7;for(;z<288;)C.lens[z++]=8;for(p(v,C.lens,0,288,A,0,C.work,{bits:9}),z=0;z<32;)C.lens[z++]=5;p(k,C.lens,0,32,H,0,C.work,{bits:5}),$=!1}C.lencode=A,C.lenbits=9,C.distcode=H,C.distbits=5}function le(C,z,h,V){var K,F=C.state;return F.window===null&&(F.wsize=1<<F.wbits,F.wnext=0,F.whave=0,F.window=new i.Buf8(F.wsize)),V>=F.wsize?(i.arraySet(F.window,z,h-F.wsize,F.wsize,0),F.wnext=0,F.whave=F.wsize):(V<(K=F.wsize-F.wnext)&&(K=V),i.arraySet(F.window,z,h-V,K,F.wnext),(V-=K)?(i.arraySet(F.window,z,h-V,V,0),F.wnext=V,F.whave=F.wsize):(F.wnext+=K,F.wnext===F.wsize&&(F.wnext=0),F.whave<F.wsize&&(F.whave+=K))),0}a.inflateReset=N,a.inflateReset2=j,a.inflateResetKeep=x,a.inflateInit=function(C){return M(C,15)},a.inflateInit2=M,a.inflate=function(C,z){var h,V,K,F,D,U,X,T,L,Y,ee,te,pe,ke,me,ve,Ne,Te,$e,Xe,f,q,Z,E,_=0,I=new i.Buf8(4),ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!C||!C.state||!C.output||!C.input&&C.avail_in!==0)return g;(h=C.state).mode===12&&(h.mode=13),D=C.next_out,K=C.output,X=C.avail_out,F=C.next_in,V=C.input,U=C.avail_in,T=h.hold,L=h.bits,Y=U,ee=X,q=y;e:for(;;)switch(h.mode){case w:if(h.wrap===0){h.mode=13;break}for(;L<16;){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}if(2&h.wrap&&T===35615){I[h.check=0]=255&T,I[1]=T>>>8&255,h.check=l(h.check,I,2,0),L=T=0,h.mode=2;break}if(h.flags=0,h.head&&(h.head.done=!1),!(1&h.wrap)||(((255&T)<<8)+(T>>8))%31){C.msg="incorrect header check",h.mode=30;break}if((15&T)!=8){C.msg="unknown compression method",h.mode=30;break}if(L-=4,f=8+(15&(T>>>=4)),h.wbits===0)h.wbits=f;else if(f>h.wbits){C.msg="invalid window size",h.mode=30;break}h.dmax=1<<f,C.adler=h.check=1,h.mode=512&T?10:12,L=T=0;break;case 2:for(;L<16;){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}if(h.flags=T,(255&h.flags)!=8){C.msg="unknown compression method",h.mode=30;break}if(57344&h.flags){C.msg="unknown header flags set",h.mode=30;break}h.head&&(h.head.text=T>>8&1),512&h.flags&&(I[0]=255&T,I[1]=T>>>8&255,h.check=l(h.check,I,2,0)),L=T=0,h.mode=3;case 3:for(;L<32;){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}h.head&&(h.head.time=T),512&h.flags&&(I[0]=255&T,I[1]=T>>>8&255,I[2]=T>>>16&255,I[3]=T>>>24&255,h.check=l(h.check,I,4,0)),L=T=0,h.mode=4;case 4:for(;L<16;){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}h.head&&(h.head.xflags=255&T,h.head.os=T>>8),512&h.flags&&(I[0]=255&T,I[1]=T>>>8&255,h.check=l(h.check,I,2,0)),L=T=0,h.mode=5;case 5:if(1024&h.flags){for(;L<16;){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}h.length=T,h.head&&(h.head.extra_len=T),512&h.flags&&(I[0]=255&T,I[1]=T>>>8&255,h.check=l(h.check,I,2,0)),L=T=0}else h.head&&(h.head.extra=null);h.mode=6;case 6:if(1024&h.flags&&(U<(te=h.length)&&(te=U),te&&(h.head&&(f=h.head.extra_len-h.length,h.head.extra||(h.head.extra=new Array(h.head.extra_len)),i.arraySet(h.head.extra,V,F,te,f)),512&h.flags&&(h.check=l(h.check,V,te,F)),U-=te,F+=te,h.length-=te),h.length))break e;h.length=0,h.mode=7;case 7:if(2048&h.flags){if(U===0)break e;for(te=0;f=V[F+te++],h.head&&f&&h.length<65536&&(h.head.name+=String.fromCharCode(f)),f&&te<U;);if(512&h.flags&&(h.check=l(h.check,V,te,F)),U-=te,F+=te,f)break e}else h.head&&(h.head.name=null);h.length=0,h.mode=8;case 8:if(4096&h.flags){if(U===0)break e;for(te=0;f=V[F+te++],h.head&&f&&h.length<65536&&(h.head.comment+=String.fromCharCode(f)),f&&te<U;);if(512&h.flags&&(h.check=l(h.check,V,te,F)),U-=te,F+=te,f)break e}else h.head&&(h.head.comment=null);h.mode=9;case 9:if(512&h.flags){for(;L<16;){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}if(T!==(65535&h.check)){C.msg="header crc mismatch",h.mode=30;break}L=T=0}h.head&&(h.head.hcrc=h.flags>>9&1,h.head.done=!0),C.adler=h.check=0,h.mode=12;break;case 10:for(;L<32;){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}C.adler=h.check=c(T),L=T=0,h.mode=11;case 11:if(h.havedict===0)return C.next_out=D,C.avail_out=X,C.next_in=F,C.avail_in=U,h.hold=T,h.bits=L,2;C.adler=h.check=1,h.mode=12;case 12:if(z===5||z===6)break e;case 13:if(h.last){T>>>=7&L,L-=7&L,h.mode=27;break}for(;L<3;){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}switch(h.last=1&T,L-=1,3&(T>>>=1)){case 0:h.mode=14;break;case 1:if(W(h),h.mode=20,z!==6)break;T>>>=2,L-=2;break e;case 2:h.mode=17;break;case 3:C.msg="invalid block type",h.mode=30}T>>>=2,L-=2;break;case 14:for(T>>>=7&L,L-=7&L;L<32;){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}if((65535&T)!=(T>>>16^65535)){C.msg="invalid stored block lengths",h.mode=30;break}if(h.length=65535&T,L=T=0,h.mode=15,z===6)break e;case 15:h.mode=16;case 16:if(te=h.length){if(U<te&&(te=U),X<te&&(te=X),te===0)break e;i.arraySet(K,V,F,te,D),U-=te,F+=te,X-=te,D+=te,h.length-=te;break}h.mode=12;break;case 17:for(;L<14;){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}if(h.nlen=257+(31&T),T>>>=5,L-=5,h.ndist=1+(31&T),T>>>=5,L-=5,h.ncode=4+(15&T),T>>>=4,L-=4,286<h.nlen||30<h.ndist){C.msg="too many length or distance symbols",h.mode=30;break}h.have=0,h.mode=18;case 18:for(;h.have<h.ncode;){for(;L<3;){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}h.lens[ne[h.have++]]=7&T,T>>>=3,L-=3}for(;h.have<19;)h.lens[ne[h.have++]]=0;if(h.lencode=h.lendyn,h.lenbits=7,Z={bits:h.lenbits},q=p(0,h.lens,0,19,h.lencode,0,h.work,Z),h.lenbits=Z.bits,q){C.msg="invalid code lengths set",h.mode=30;break}h.have=0,h.mode=19;case 19:for(;h.have<h.nlen+h.ndist;){for(;ve=(_=h.lencode[T&(1<<h.lenbits)-1])>>>16&255,Ne=65535&_,!((me=_>>>24)<=L);){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}if(Ne<16)T>>>=me,L-=me,h.lens[h.have++]=Ne;else{if(Ne===16){for(E=me+2;L<E;){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}if(T>>>=me,L-=me,h.have===0){C.msg="invalid bit length repeat",h.mode=30;break}f=h.lens[h.have-1],te=3+(3&T),T>>>=2,L-=2}else if(Ne===17){for(E=me+3;L<E;){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}L-=me,f=0,te=3+(7&(T>>>=me)),T>>>=3,L-=3}else{for(E=me+7;L<E;){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}L-=me,f=0,te=11+(127&(T>>>=me)),T>>>=7,L-=7}if(h.have+te>h.nlen+h.ndist){C.msg="invalid bit length repeat",h.mode=30;break}for(;te--;)h.lens[h.have++]=f}}if(h.mode===30)break;if(h.lens[256]===0){C.msg="invalid code -- missing end-of-block",h.mode=30;break}if(h.lenbits=9,Z={bits:h.lenbits},q=p(v,h.lens,0,h.nlen,h.lencode,0,h.work,Z),h.lenbits=Z.bits,q){C.msg="invalid literal/lengths set",h.mode=30;break}if(h.distbits=6,h.distcode=h.distdyn,Z={bits:h.distbits},q=p(k,h.lens,h.nlen,h.ndist,h.distcode,0,h.work,Z),h.distbits=Z.bits,q){C.msg="invalid distances set",h.mode=30;break}if(h.mode=20,z===6)break e;case 20:h.mode=21;case 21:if(6<=U&&258<=X){C.next_out=D,C.avail_out=X,C.next_in=F,C.avail_in=U,h.hold=T,h.bits=L,u(C,ee),D=C.next_out,K=C.output,X=C.avail_out,F=C.next_in,V=C.input,U=C.avail_in,T=h.hold,L=h.bits,h.mode===12&&(h.back=-1);break}for(h.back=0;ve=(_=h.lencode[T&(1<<h.lenbits)-1])>>>16&255,Ne=65535&_,!((me=_>>>24)<=L);){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}if(ve&&!(240&ve)){for(Te=me,$e=ve,Xe=Ne;ve=(_=h.lencode[Xe+((T&(1<<Te+$e)-1)>>Te)])>>>16&255,Ne=65535&_,!(Te+(me=_>>>24)<=L);){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}T>>>=Te,L-=Te,h.back+=Te}if(T>>>=me,L-=me,h.back+=me,h.length=Ne,ve===0){h.mode=26;break}if(32&ve){h.back=-1,h.mode=12;break}if(64&ve){C.msg="invalid literal/length code",h.mode=30;break}h.extra=15&ve,h.mode=22;case 22:if(h.extra){for(E=h.extra;L<E;){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}h.length+=T&(1<<h.extra)-1,T>>>=h.extra,L-=h.extra,h.back+=h.extra}h.was=h.length,h.mode=23;case 23:for(;ve=(_=h.distcode[T&(1<<h.distbits)-1])>>>16&255,Ne=65535&_,!((me=_>>>24)<=L);){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}if(!(240&ve)){for(Te=me,$e=ve,Xe=Ne;ve=(_=h.distcode[Xe+((T&(1<<Te+$e)-1)>>Te)])>>>16&255,Ne=65535&_,!(Te+(me=_>>>24)<=L);){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}T>>>=Te,L-=Te,h.back+=Te}if(T>>>=me,L-=me,h.back+=me,64&ve){C.msg="invalid distance code",h.mode=30;break}h.offset=Ne,h.extra=15&ve,h.mode=24;case 24:if(h.extra){for(E=h.extra;L<E;){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}h.offset+=T&(1<<h.extra)-1,T>>>=h.extra,L-=h.extra,h.back+=h.extra}if(h.offset>h.dmax){C.msg="invalid distance too far back",h.mode=30;break}h.mode=25;case 25:if(X===0)break e;if(te=ee-X,h.offset>te){if((te=h.offset-te)>h.whave&&h.sane){C.msg="invalid distance too far back",h.mode=30;break}pe=te>h.wnext?(te-=h.wnext,h.wsize-te):h.wnext-te,te>h.length&&(te=h.length),ke=h.window}else ke=K,pe=D-h.offset,te=h.length;for(X<te&&(te=X),X-=te,h.length-=te;K[D++]=ke[pe++],--te;);h.length===0&&(h.mode=21);break;case 26:if(X===0)break e;K[D++]=h.length,X--,h.mode=21;break;case 27:if(h.wrap){for(;L<32;){if(U===0)break e;U--,T|=V[F++]<<L,L+=8}if(ee-=X,C.total_out+=ee,h.total+=ee,ee&&(C.adler=h.check=h.flags?l(h.check,K,ee,D-ee):s(h.check,K,ee,D-ee)),ee=X,(h.flags?T:c(T))!==h.check){C.msg="incorrect data check",h.mode=30;break}L=T=0}h.mode=28;case 28:if(h.wrap&&h.flags){for(;L<32;){if(U===0)break e;U--,T+=V[F++]<<L,L+=8}if(T!==(4294967295&h.total)){C.msg="incorrect length check",h.mode=30;break}L=T=0}h.mode=29;case 29:q=1;break e;case 30:q=-3;break e;case 31:return-4;case 32:default:return g}return C.next_out=D,C.avail_out=X,C.next_in=F,C.avail_in=U,h.hold=T,h.bits=L,(h.wsize||ee!==C.avail_out&&h.mode<30&&(h.mode<27||z!==4))&&le(C,C.output,C.next_out,ee-C.avail_out)?(h.mode=31,-4):(Y-=C.avail_in,ee-=C.avail_out,C.total_in+=Y,C.total_out+=ee,h.total+=ee,h.wrap&&ee&&(C.adler=h.check=h.flags?l(h.check,K,ee,C.next_out-ee):s(h.check,K,ee,C.next_out-ee)),C.data_type=h.bits+(h.last?64:0)+(h.mode===12?128:0)+(h.mode===20||h.mode===15?256:0),(Y==0&&ee===0||z===4)&&q===y&&(q=-5),q)},a.inflateEnd=function(C){if(!C||!C.state)return g;var z=C.state;return z.window&&(z.window=null),C.state=null,y},a.inflateGetHeader=function(C,z){var h;return C&&C.state&&2&(h=C.state).wrap?((h.head=z).done=!1,y):g},a.inflateSetDictionary=function(C,z){var h,V=z.length;return C&&C.state?(h=C.state).wrap!==0&&h.mode!==11?g:h.mode===11&&s(1,z,V,0)!==h.check?-3:le(C,z,V,V)?(h.mode=31,-4):(h.havedict=1,y):g},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,a){var i=n("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(v,k,y,g,w,m,b,c){var d,x,N,j,M,A,H,$,W,le=c.bits,C=0,z=0,h=0,V=0,K=0,F=0,D=0,U=0,X=0,T=0,L=null,Y=0,ee=new i.Buf16(16),te=new i.Buf16(16),pe=null,ke=0;for(C=0;C<=15;C++)ee[C]=0;for(z=0;z<g;z++)ee[k[y+z]]++;for(K=le,V=15;1<=V&&ee[V]===0;V--);if(V<K&&(K=V),V===0)return w[m++]=20971520,w[m++]=20971520,c.bits=1,0;for(h=1;h<V&&ee[h]===0;h++);for(K<h&&(K=h),C=U=1;C<=15;C++)if(U<<=1,(U-=ee[C])<0)return-1;if(0<U&&(v===0||V!==1))return-1;for(te[1]=0,C=1;C<15;C++)te[C+1]=te[C]+ee[C];for(z=0;z<g;z++)k[y+z]!==0&&(b[te[k[y+z]]++]=z);if(A=v===0?(L=pe=b,19):v===1?(L=s,Y-=257,pe=l,ke-=257,256):(L=u,pe=p,-1),C=h,M=m,D=z=T=0,N=-1,j=(X=1<<(F=K))-1,v===1&&852<X||v===2&&592<X)return 1;for(;;){for(H=C-D,W=b[z]<A?($=0,b[z]):b[z]>A?($=pe[ke+b[z]],L[Y+b[z]]):($=96,0),d=1<<C-D,h=x=1<<F;w[M+(T>>D)+(x-=d)]=H<<24|$<<16|W|0,x!==0;);for(d=1<<C-1;T&d;)d>>=1;if(d!==0?(T&=d-1,T+=d):T=0,z++,--ee[C]==0){if(C===V)break;C=k[y+b[z]]}if(K<C&&(T&j)!==N){for(D===0&&(D=K),M+=h,U=1<<(F=C-D);F+D<V&&!((U-=ee[F+D])<=0);)F++,U<<=1;if(X+=1<<F,v===1&&852<X||v===2&&592<X)return 1;w[N=T&j]=K<<24|F<<16|M-m|0}}return T!==0&&(w[M+T]=C-D<<24|64<<16|0),c.bits=K,0}},{"../utils/common":41}],51:[function(n,r,a){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,a){var i=n("../utils/common"),s=0,l=1;function u(_){for(var I=_.length;0<=--I;)_[I]=0}var p=0,v=29,k=256,y=k+1+v,g=30,w=19,m=2*y+1,b=15,c=16,d=7,x=256,N=16,j=17,M=18,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],H=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],$=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],le=new Array(2*(y+2));u(le);var C=new Array(2*g);u(C);var z=new Array(512);u(z);var h=new Array(256);u(h);var V=new Array(v);u(V);var K,F,D,U=new Array(g);function X(_,I,ne,ae,G){this.static_tree=_,this.extra_bits=I,this.extra_base=ne,this.elems=ae,this.max_length=G,this.has_stree=_&&_.length}function T(_,I){this.dyn_tree=_,this.max_code=0,this.stat_desc=I}function L(_){return _<256?z[_]:z[256+(_>>>7)]}function Y(_,I){_.pending_buf[_.pending++]=255&I,_.pending_buf[_.pending++]=I>>>8&255}function ee(_,I,ne){_.bi_valid>c-ne?(_.bi_buf|=I<<_.bi_valid&65535,Y(_,_.bi_buf),_.bi_buf=I>>c-_.bi_valid,_.bi_valid+=ne-c):(_.bi_buf|=I<<_.bi_valid&65535,_.bi_valid+=ne)}function te(_,I,ne){ee(_,ne[2*I],ne[2*I+1])}function pe(_,I){for(var ne=0;ne|=1&_,_>>>=1,ne<<=1,0<--I;);return ne>>>1}function ke(_,I,ne){var ae,G,ie=new Array(b+1),he=0;for(ae=1;ae<=b;ae++)ie[ae]=he=he+ne[ae-1]<<1;for(G=0;G<=I;G++){var oe=_[2*G+1];oe!==0&&(_[2*G]=pe(ie[oe]++,oe))}}function me(_){var I;for(I=0;I<y;I++)_.dyn_ltree[2*I]=0;for(I=0;I<g;I++)_.dyn_dtree[2*I]=0;for(I=0;I<w;I++)_.bl_tree[2*I]=0;_.dyn_ltree[2*x]=1,_.opt_len=_.static_len=0,_.last_lit=_.matches=0}function ve(_){8<_.bi_valid?Y(_,_.bi_buf):0<_.bi_valid&&(_.pending_buf[_.pending++]=_.bi_buf),_.bi_buf=0,_.bi_valid=0}function Ne(_,I,ne,ae){var G=2*I,ie=2*ne;return _[G]<_[ie]||_[G]===_[ie]&&ae[I]<=ae[ne]}function Te(_,I,ne){for(var ae=_.heap[ne],G=ne<<1;G<=_.heap_len&&(G<_.heap_len&&Ne(I,_.heap[G+1],_.heap[G],_.depth)&&G++,!Ne(I,ae,_.heap[G],_.depth));)_.heap[ne]=_.heap[G],ne=G,G<<=1;_.heap[ne]=ae}function $e(_,I,ne){var ae,G,ie,he,oe=0;if(_.last_lit!==0)for(;ae=_.pending_buf[_.d_buf+2*oe]<<8|_.pending_buf[_.d_buf+2*oe+1],G=_.pending_buf[_.l_buf+oe],oe++,ae===0?te(_,G,I):(te(_,(ie=h[G])+k+1,I),(he=A[ie])!==0&&ee(_,G-=V[ie],he),te(_,ie=L(--ae),ne),(he=H[ie])!==0&&ee(_,ae-=U[ie],he)),oe<_.last_lit;);te(_,x,I)}function Xe(_,I){var ne,ae,G,ie=I.dyn_tree,he=I.stat_desc.static_tree,oe=I.stat_desc.has_stree,ge=I.stat_desc.elems,Ee=-1;for(_.heap_len=0,_.heap_max=m,ne=0;ne<ge;ne++)ie[2*ne]!==0?(_.heap[++_.heap_len]=Ee=ne,_.depth[ne]=0):ie[2*ne+1]=0;for(;_.heap_len<2;)ie[2*(G=_.heap[++_.heap_len]=Ee<2?++Ee:0)]=1,_.depth[G]=0,_.opt_len--,oe&&(_.static_len-=he[2*G+1]);for(I.max_code=Ee,ne=_.heap_len>>1;1<=ne;ne--)Te(_,ie,ne);for(G=ge;ne=_.heap[1],_.heap[1]=_.heap[_.heap_len--],Te(_,ie,1),ae=_.heap[1],_.heap[--_.heap_max]=ne,_.heap[--_.heap_max]=ae,ie[2*G]=ie[2*ne]+ie[2*ae],_.depth[G]=(_.depth[ne]>=_.depth[ae]?_.depth[ne]:_.depth[ae])+1,ie[2*ne+1]=ie[2*ae+1]=G,_.heap[1]=G++,Te(_,ie,1),2<=_.heap_len;);_.heap[--_.heap_max]=_.heap[1],function(Se,Qe){var At,at,ft,Fe,Ut,Le,it=Qe.dyn_tree,ht=Qe.max_code,pt=Qe.stat_desc.static_tree,kt=Qe.stat_desc.has_stree,on=Qe.stat_desc.extra_bits,mt=Qe.stat_desc.extra_base,Mn=Qe.stat_desc.max_length,vn=0;for(Fe=0;Fe<=b;Fe++)Se.bl_count[Fe]=0;for(it[2*Se.heap[Se.heap_max]+1]=0,At=Se.heap_max+1;At<m;At++)Mn<(Fe=it[2*it[2*(at=Se.heap[At])+1]+1]+1)&&(Fe=Mn,vn++),it[2*at+1]=Fe,ht<at||(Se.bl_count[Fe]++,Ut=0,mt<=at&&(Ut=on[at-mt]),Le=it[2*at],Se.opt_len+=Le*(Fe+Ut),kt&&(Se.static_len+=Le*(pt[2*at+1]+Ut)));if(vn!==0){do{for(Fe=Mn-1;Se.bl_count[Fe]===0;)Fe--;Se.bl_count[Fe]--,Se.bl_count[Fe+1]+=2,Se.bl_count[Mn]--,vn-=2}while(0<vn);for(Fe=Mn;Fe!==0;Fe--)for(at=Se.bl_count[Fe];at!==0;)ht<(ft=Se.heap[--At])||(it[2*ft+1]!==Fe&&(Se.opt_len+=(Fe-it[2*ft+1])*it[2*ft],it[2*ft+1]=Fe),at--)}}(_,I),ke(ie,Ee,_.bl_count)}function f(_,I,ne){var ae,G,ie=-1,he=I[1],oe=0,ge=7,Ee=4;for(he===0&&(ge=138,Ee=3),I[2*(ne+1)+1]=65535,ae=0;ae<=ne;ae++)G=he,he=I[2*(ae+1)+1],++oe<ge&&G===he||(oe<Ee?_.bl_tree[2*G]+=oe:G!==0?(G!==ie&&_.bl_tree[2*G]++,_.bl_tree[2*N]++):oe<=10?_.bl_tree[2*j]++:_.bl_tree[2*M]++,ie=G,Ee=(oe=0)===he?(ge=138,3):G===he?(ge=6,3):(ge=7,4))}function q(_,I,ne){var ae,G,ie=-1,he=I[1],oe=0,ge=7,Ee=4;for(he===0&&(ge=138,Ee=3),ae=0;ae<=ne;ae++)if(G=he,he=I[2*(ae+1)+1],!(++oe<ge&&G===he)){if(oe<Ee)for(;te(_,G,_.bl_tree),--oe!=0;);else G!==0?(G!==ie&&(te(_,G,_.bl_tree),oe--),te(_,N,_.bl_tree),ee(_,oe-3,2)):oe<=10?(te(_,j,_.bl_tree),ee(_,oe-3,3)):(te(_,M,_.bl_tree),ee(_,oe-11,7));ie=G,Ee=(oe=0)===he?(ge=138,3):G===he?(ge=6,3):(ge=7,4)}}u(U);var Z=!1;function E(_,I,ne,ae){ee(_,(p<<1)+(ae?1:0),3),function(G,ie,he,oe){ve(G),Y(G,he),Y(G,~he),i.arraySet(G.pending_buf,G.window,ie,he,G.pending),G.pending+=he}(_,I,ne)}a._tr_init=function(_){Z||(function(){var I,ne,ae,G,ie,he=new Array(b+1);for(G=ae=0;G<v-1;G++)for(V[G]=ae,I=0;I<1<<A[G];I++)h[ae++]=G;for(h[ae-1]=G,G=ie=0;G<16;G++)for(U[G]=ie,I=0;I<1<<H[G];I++)z[ie++]=G;for(ie>>=7;G<g;G++)for(U[G]=ie<<7,I=0;I<1<<H[G]-7;I++)z[256+ie++]=G;for(ne=0;ne<=b;ne++)he[ne]=0;for(I=0;I<=143;)le[2*I+1]=8,I++,he[8]++;for(;I<=255;)le[2*I+1]=9,I++,he[9]++;for(;I<=279;)le[2*I+1]=7,I++,he[7]++;for(;I<=287;)le[2*I+1]=8,I++,he[8]++;for(ke(le,y+1,he),I=0;I<g;I++)C[2*I+1]=5,C[2*I]=pe(I,5);K=new X(le,A,k+1,y,b),F=new X(C,H,0,g,b),D=new X(new Array(0),$,0,w,d)}(),Z=!0),_.l_desc=new T(_.dyn_ltree,K),_.d_desc=new T(_.dyn_dtree,F),_.bl_desc=new T(_.bl_tree,D),_.bi_buf=0,_.bi_valid=0,me(_)},a._tr_stored_block=E,a._tr_flush_block=function(_,I,ne,ae){var G,ie,he=0;0<_.level?(_.strm.data_type===2&&(_.strm.data_type=function(oe){var ge,Ee=4093624447;for(ge=0;ge<=31;ge++,Ee>>>=1)if(1&Ee&&oe.dyn_ltree[2*ge]!==0)return s;if(oe.dyn_ltree[18]!==0||oe.dyn_ltree[20]!==0||oe.dyn_ltree[26]!==0)return l;for(ge=32;ge<k;ge++)if(oe.dyn_ltree[2*ge]!==0)return l;return s}(_)),Xe(_,_.l_desc),Xe(_,_.d_desc),he=function(oe){var ge;for(f(oe,oe.dyn_ltree,oe.l_desc.max_code),f(oe,oe.dyn_dtree,oe.d_desc.max_code),Xe(oe,oe.bl_desc),ge=w-1;3<=ge&&oe.bl_tree[2*W[ge]+1]===0;ge--);return oe.opt_len+=3*(ge+1)+5+5+4,ge}(_),G=_.opt_len+3+7>>>3,(ie=_.static_len+3+7>>>3)<=G&&(G=ie)):G=ie=ne+5,ne+4<=G&&I!==-1?E(_,I,ne,ae):_.strategy===4||ie===G?(ee(_,2+(ae?1:0),3),$e(_,le,C)):(ee(_,4+(ae?1:0),3),function(oe,ge,Ee,Se){var Qe;for(ee(oe,ge-257,5),ee(oe,Ee-1,5),ee(oe,Se-4,4),Qe=0;Qe<Se;Qe++)ee(oe,oe.bl_tree[2*W[Qe]+1],3);q(oe,oe.dyn_ltree,ge-1),q(oe,oe.dyn_dtree,Ee-1)}(_,_.l_desc.max_code+1,_.d_desc.max_code+1,he+1),$e(_,_.dyn_ltree,_.dyn_dtree)),me(_),ae&&ve(_)},a._tr_tally=function(_,I,ne){return _.pending_buf[_.d_buf+2*_.last_lit]=I>>>8&255,_.pending_buf[_.d_buf+2*_.last_lit+1]=255&I,_.pending_buf[_.l_buf+_.last_lit]=255&ne,_.last_lit++,I===0?_.dyn_ltree[2*ne]++:(_.matches++,I--,_.dyn_ltree[2*(h[ne]+k+1)]++,_.dyn_dtree[2*L(I)]++),_.last_lit===_.lit_bufsize-1},a._tr_align=function(_){ee(_,2,3),te(_,x,le),function(I){I.bi_valid===16?(Y(I,I.bi_buf),I.bi_buf=0,I.bi_valid=0):8<=I.bi_valid&&(I.pending_buf[I.pending++]=255&I.bi_buf,I.bi_buf>>=8,I.bi_valid-=8)}(_)}},{"../utils/common":41}],53:[function(n,r,a){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,a){(function(i){(function(s,l){if(!s.setImmediate){var u,p,v,k,y=1,g={},w=!1,m=s.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(s);b=b&&b.setTimeout?b:s,u={}.toString.call(s.process)==="[object process]"?function(N){process.nextTick(function(){d(N)})}:function(){if(s.postMessage&&!s.importScripts){var N=!0,j=s.onmessage;return s.onmessage=function(){N=!1},s.postMessage("","*"),s.onmessage=j,N}}()?(k="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",x,!1):s.attachEvent("onmessage",x),function(N){s.postMessage(k+N,"*")}):s.MessageChannel?((v=new MessageChannel).port1.onmessage=function(N){d(N.data)},function(N){v.port2.postMessage(N)}):m&&"onreadystatechange"in m.createElement("script")?(p=m.documentElement,function(N){var j=m.createElement("script");j.onreadystatechange=function(){d(N),j.onreadystatechange=null,p.removeChild(j),j=null},p.appendChild(j)}):function(N){setTimeout(d,0,N)},b.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var j=new Array(arguments.length-1),M=0;M<j.length;M++)j[M]=arguments[M+1];var A={callback:N,args:j};return g[y]=A,u(y),y++},b.clearImmediate=c}function c(N){delete g[N]}function d(N){if(w)setTimeout(d,0,N);else{var j=g[N];if(j){w=!0;try{(function(M){var A=M.callback,H=M.args;switch(H.length){case 0:A();break;case 1:A(H[0]);break;case 2:A(H[0],H[1]);break;case 3:A(H[0],H[1],H[2]);break;default:A.apply(l,H)}})(j)}finally{c(N),w=!1}}}}function x(N){N.source===s&&typeof N.data=="string"&&N.data.indexOf(k)===0&&d(+N.data.slice(k.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof bi<"u"?bi:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(ch);var bm=ch.exports;const Sm=Bc(bm),dh=()=>o.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",className:"flex-shrink-0",children:[o.jsx("rect",{x:"1",y:"5",width:"2",height:"4",fill:"currentColor",className:"animate-sound-wave",style:{animationDelay:"0ms"}}),o.jsx("rect",{x:"4",y:"3",width:"2",height:"8",fill:"currentColor",className:"animate-sound-wave",style:{animationDelay:"150ms"}}),o.jsx("rect",{x:"7",y:"2",width:"2",height:"10",fill:"currentColor",className:"animate-sound-wave",style:{animationDelay:"300ms"}}),o.jsx("rect",{x:"10",y:"4",width:"2",height:"6",fill:"currentColor",className:"animate-sound-wave",style:{animationDelay:"450ms"}})]}),Bi="flex items-center justify-center p-1.5 rounded-lg transition-colors bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600",_m=({stations:e,lines:t,announcements:n,setAnnouncements:r,audioAssignments:a,setAudioAssignments:i,announcementTypes:s,setAnnouncementTypes:l,betweenSegments:u,setBetweenSegments:p,uploadedAudios:v,setUploadedAudios:k,generatedAudioHistory:y,setGeneratedAudioHistory:g,apiKey:w,language:m="en",isMobile:b,onClose:c,onStationSelect:d,selectedStationId:x,showStationNumbers:N=!1,onPlayingStationChange:j,showTranscription:M=!1,setShowTranscription:A,setCurrentTranscription:H,selectedLineId:$,setSelectedLineId:W,audioProcessingPreset:le="standard",setAudioProcessingPreset:C})=>{var wi;const{t:z}=Yr(m),[h,V]=O.useState(null),[K,F]=O.useState(!1),D=O.useRef(null),U=O.useRef(le),[X,T]=O.useState(!1),[L,Y]=O.useState({}),[ee,te]=O.useState(null),[pe,ke]=O.useState("text-to-speech"),[me,ve]=O.useState(""),[Ne,Te]=O.useState("21m00Tcm4TlvDq8ikWAM"),$e=O.useMemo(()=>[{id:"21m00Tcm4TlvDq8ikWAM",name:"Rachel",preview:"/src/assets/audio/presets/Rachel preview.mp3"},{id:"sRYzP8TwEiiqAWebdYPJ",name:"Hatakekohei",preview:"/src/assets/audio/presets/Hatakekohei preview.mp3"},{id:"EkK5I93UQWFDigLMpZcX",name:"James"},{id:"RILOU7YmBhvwJGDGjNmP",name:"Jane"},{id:"cgSgspJ2msm6clMCkdW9",name:"Jessica"},{id:"FGY2WhTYpPnrIDTdsKH5",name:"Laura"},{id:"x70vRnQBMBu4FAYhjJbO",name:"Nathan"}],[]),[Xe,f]=O.useState(null),[q,Z]=O.useState(!1),E=O.useRef(null),_=O.useRef(null),[I,ne]=O.useState(!1),[ae,G]=O.useState(null),ie=O.useRef(null),[he,oe]=O.useState(1),[ge,Ee]=O.useState(1),[Se,Qe]=O.useState(!1),[At,at]=O.useState(!1),[ft,Fe]=O.useState(!1),[Ut,Le]=O.useState(!1),[it,ht]=O.useState(null),[pt,kt]=O.useState({}),[on,mt]=O.useState({}),[Mn,vn]=O.useState(0),[Dt,lt]=O.useState(0),[Cr,Qt]=O.useState(!1),Un=O.useRef({}),we=O.useRef(null),jr=O.useRef({}),be=O.useRef(null),Ue=O.useRef(null),Me=O.useRef(!1);O.useEffect(()=>{Me.current=K},[K]),O.useEffect(()=>{if(j&&h){const P=h.match(/^station-(.+)$/);P?j(P[1],!X):j(null,!1)}else j&&j(null,!1)},[h,X,j]),O.useEffect(()=>{if(h&&!X){const P=h.match(/^station-(.+)$/);P&&d?d(P[1]):h.startsWith("between")&&d&&d(null)}},[h,X,d]),O.useEffect(()=>{if(H)if(h&&!X){const P=a[h];H((P==null?void 0:P.transcription)||"")}else H("")},[h,X,a,H]),O.useEffect(()=>{we.current&&(we.current.pause(),we.current=null),D.current&&D.current.setPlaybackState(!1),V(null),T(!1),F(!1),be.current&&(clearInterval(be.current),be.current=null),Ue.current&&(clearInterval(Ue.current),Ue.current=null)},[e,t]),O.useEffect(()=>{t.length>0&&(!$||!t.find(P=>P.id===$))&&W(t[0].id)},[t,$]),O.useEffect(()=>{const P=Q=>{Object.keys(L).every(R=>{const B=jr.current[R];return!B||!B.contains(Q.target)})&&Y({}),q&&_.current&&!_.current.contains(Q.target)&&Z(!1)};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[L,q]);const ln=O.useMemo(()=>t.find(P=>P.id===$),[t,$]),Re=O.useMemo(()=>ln?ln.stations.map(P=>e.find(Q=>Q.id===P)).filter(Boolean).filter((P,Q,S)=>Q===S.length-1&&S.length>1?P.id!==S[0].id:!0):[],[ln,e]),Bt=(ln==null?void 0:ln.color)||"#ef4444",kn=O.useMemo(()=>xm(),[]),je=O.useCallback(P=>t.filter(Q=>Q.stations.includes(P)),[t]),Tn=O.useCallback(P=>{D.current||(D.current=km());try{D.current.disconnect(),D.current.createEffectsChain(P),D.current.applyPreset(U.current)}catch(Q){console.warn("Could not setup audio processing:",Q)}},[]);O.useEffect(()=>{U.current=le},[le]),O.useEffect(()=>{if(D.current&&D.current.compressor)try{D.current.applyPreset(le)}catch(P){console.warn("Could not apply audio preset:",P)}},[le]);const Et=(P,Q)=>{if(Q)try{const S=new Audio(Q);S.preload="metadata",S.addEventListener("loadedmetadata",()=>{const R=Math.ceil(S.duration);R&&!isNaN(R)&&kt(B=>({...B,[P]:R}))}),S.addEventListener("error",R=>{console.warn(`Could not load audio metadata for ${P}:`,Q),kt(B=>({...B,[P]:30}))}),S.load()}catch(S){console.warn(`Error creating audio for ${P}:`,S),kt(R=>({...R,[P]:30}))}},un=P=>{if(P<60)return`${P}s`;const Q=Math.floor(P/60),S=P%60;return S>0?`${Q}m ${S}s`:`${Q}m`},nt=O.useCallback(()=>{const P=[];return Re.forEach((Q,S)=>{var B,J;const R=`station-${Q.id}`;if((B=a[R])!=null&&B.url&&P.push(R),S<Re.length-1){const re=`between-${Q.id}-${Re[S+1].id}`;(J=a[re])!=null&&J.url&&P.push(re);const fe=u[re];Array.isArray(fe)&&fe.forEach(ce=>{var Ce;(Ce=a[ce])!=null&&Ce.url&&P.push(ce)})}}),P},[Re,a,u]),wt=()=>{let P=0;return nt().forEach(S=>{pt[S]&&(P+=pt[S])}),P},Kr=()=>{let P=0;const Q=nt();for(let S=0;S<Dt&&S<Q.length;S++){const R=Q[S];pt[R]&&(P+=pt[R])}return Q[Dt]&&we.current&&!we.current.paused&&(P+=Math.ceil(we.current.currentTime)),P},Zr=()=>wt()-Kr();O.useEffect(()=>{if(Re.length>0&&$){const P={},Q=new Set;Re.forEach((R,B)=>{Q.add(`station-${R.id}`),B<Re.length-1&&Q.add(`between-${R.id}-${Re[B+1].id}`)});const S={};Object.keys(a).forEach(R=>{Q.has(R)&&(S[R]=a[R])}),Re.forEach((R,B)=>{const J=B*2,re=`station-${R.id}`;if(S[re])P[re]=S[re],S[re].url&&Et(re,S[re].url);else{const fe=kn[J%kn.length];P[re]={type:"preset",url:fe.path,name:fe.name},Et(re,fe.path)}if(B<Re.length-1){const fe=`between-${R.id}-${Re[B+1].id}`;if(S[fe])P[fe]=S[fe],S[fe].url&&Et(fe,S[fe].url);else{const ce=kn[(J+1)%kn.length];P[fe]={type:"preset",url:ce.path,name:ce.name},Et(fe,ce.path)}}}),i(P)}},[$,Re.length]);const de=O.useCallback((P,Q="station",S=null)=>{switch(s[P]||Q){case"station":return o.jsx(Ns,{size:14,style:S?{color:S}:{},className:S?"":"text-blue-500"});case"centralStation":return o.jsx(Nc,{size:14,style:S?{color:S}:{},className:S?"":"text-purple-500"});case"arrival":return o.jsx(bc,{size:14,className:"text-green-500"});case"departure":return o.jsx(Ac,{size:14,className:"text-orange-500"});case"transfer":return o.jsx(Ua,{size:14,className:"text-purple-500"});case"information":return o.jsx(ml,{size:14,className:"text-cyan-500"});case"live":return o.jsx(Ec,{size:14,className:"text-pink-500"});case"warning":return o.jsx(wc,{size:14,className:"text-red-500"});case"chime":return o.jsx(_c,{size:14,className:"text-yellow-500"});case"music":return o.jsx(zc,{size:14,className:"text-pink-500"});case"ambience":return o.jsx(Tc,{size:14,className:"text-indigo-500"});case"general":default:return o.jsx(Ua,{size:14,className:"text-gray-400"})}},[s]),xe=O.useCallback((P,Q="general")=>{switch(s[P]||Q){case"station":return z("station");case"centralStation":return z("centralStation");case"arrival":return z("arrival");case"departure":return z("departure");case"transfer":return z("transfer");case"information":return z("information");case"live":return z("live");case"warning":return z("warning");case"chime":return z("chime");case"music":return z("music");case"ambience":return z("ambience");case"general":default:return z("general")}},[s,z]),Pe=P=>{const S=je(P).map(J=>J.color);if(S.length===0)return o.jsx("div",{className:"relative z-10 w-4 h-4 rounded-full bg-gray-400 dark:bg-gray-500 border-[3px] border-gray-200 dark:border-gray-700"});if(S.length===1)return o.jsx("div",{className:"relative z-10 w-4 h-4 rounded-full border-[3px]",style:{backgroundColor:S[0],borderColor:S[0]}});const R=360/S.length,B=S.map((J,re)=>{const fe=re*R,ce=(re+1)*R;return`${J} ${fe}deg ${ce}deg`}).join(", ");return o.jsx("div",{className:"relative z-10 w-4 h-4 rounded-full",style:{background:`conic-gradient(${B})`,padding:"3px"},children:o.jsx("div",{className:"w-full h-full rounded-full",style:{backgroundColor:S[0]}})})},Pt=P=>{d&&d(P)},Be=(P,Q)=>{l(S=>({...S,[P]:Q}))},bt=P=>{const Q=`${P}-segment-${Date.now()}`;p(S=>({...S,[P]:[...S[P]||[],Q]}))},Jt=(P,Q)=>{p(S=>({...S,[P]:(S[P]||[]).filter(R=>R!==Q)})),i(S=>{const R={...S};return delete R[Q],R})},Rt=P=>{i(Q=>{var R,B;const S={...Q};return(R=S[P])!=null&&R.url&&((B=S[P])==null?void 0:B.type)==="upload"&&URL.revokeObjectURL(S[P].url),delete S[P],S})},gt=(P,Q)=>{const S=Q.target.files[0];if(S&&S.type.startsWith("audio/")){const R=URL.createObjectURL(S),B={id:`upload-${Date.now()}`,name:S.name,url:R};k(J=>[...J,B]),i(J=>({...J,[P]:{type:"upload",url:R,name:S.name}})),Et(P,R),Y({})}},yt=O.useCallback((P,Q)=>{if(!P)return"";if(P.type==="preset")return P.name;if(P.type==="upload")return`${z("audioTypeUpload")}: ${P.name}`;if(P.type==="generated"){if(!Q)return`${P.voiceName||z("audioTypeGenerated")} #1`;const R=Q.split("-").find(J=>!isNaN(parseInt(J))),B=R?parseInt(R)+1:1;return`${P.voiceName||z("audioTypeGenerated")} #${B}`}return P.name},[z]),cn=O.useCallback((P,Q)=>{const S=s[P];if(["chime","music","ambience"].includes(S))return"";switch(S){case"arrival":return z("presetArrival").replaceAll("{station}",Q);case"departure":return z("presetDeparture").replaceAll("{station}",Q);case"transfer":return z("presetTransfer").replaceAll("{station}",Q);case"information":return z("presetInformation").replaceAll("{station}",Q);case"live":return z("presetLive").replaceAll("{station}",Q);case"warning":return z("presetWarning").replaceAll("{station}",Q);case"centralStation":return z("presetCentralStation").replaceAll("{station}",Q);case"station":default:return`${Q}`}},[s,z]),Je=O.useCallback(async(P,Q)=>{if(!(!w||!me.trim())){ne(!0);try{const S=[];if(pe==="sound-effects"){const R=Array(4).fill(null).map(async()=>({url:await wm(me,w,{loop:!1,durationSeconds:null,promptInfluence:.3,modelId:"eleven_text_to_sound_v2",outputFormat:"mp3_44100_128"}),name:`SFX: ${me.substring(0,30)}${me.length>30?"...":""}`,type:"sound-effect",text:me,timestamp:Date.now()})),B=await Promise.all(R);S.push(...B)}else if(pe==="text-to-speech"){const R=Array(2).fill(null).map(async()=>{var ce;const J=await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${Ne}`,{method:"POST",headers:{"Content-Type":"application/json","xi-api-key":w},body:JSON.stringify({text:me,model_id:"eleven_multilingual_v2",output_format:"mp3_44100_128"})});if(!J.ok){const Ce=await J.text();throw new Error(`API Error: ${Ce}`)}const re=await J.blob();return{url:URL.createObjectURL(re),name:`AI: ${me.substring(0,30)}${me.length>30?"...":""}`,type:"generated",text:me,voice:Ne,voiceName:((ce=$e.find(Ce=>Ce.id===Ne))==null?void 0:ce.name)||"Unknown",timestamp:Date.now()}}),B=await Promise.all(R);S.push(...B)}S.length>0&&(g(R=>({...R,[P]:[...R[P]||[],...S]})),i(R=>({...R,[P]:S[0]})),Et(P,S[0].url))}catch(S){console.error("Error generating audio:",S),alert(`Error generating ${pe==="sound-effects"?"sound effect":"audio"}. Please try again.`)}finally{ne(!1)}}},[w,me,Ne,pe,Et,$e]),qe=(P,Q)=>{const S=Q.path||Q.url;i(R=>({...R,[P]:{type:"preset",url:S,name:Q.name}})),Et(P,S),Y({})},dn=P=>{Y(Q=>({...Q,[P]:!Q[P]})),te(null)},Er=(P,Q="")=>{te(P),Y({});const S=cn(P,Q);ve(S)},qt=P=>{const Q=a[P];if(Q!=null&&Q.url)if(h===P&&!X)we.current&&we.current.pause(),D.current&&D.current.setPlaybackState(!1),be.current&&(clearInterval(be.current),be.current=null),Ue.current&&(clearInterval(Ue.current),Ue.current=null),T(!0),F(!1);else if(h===P&&X)we.current&&(we.current.play(),T(!1),be.current=setInterval(()=>{if(we.current&&!we.current.paused){const S=Math.ceil(we.current.duration-we.current.currentTime);mt(R=>({...R,[P]:S}))}},100));else{K&&(F(!1),Ue.current&&(clearInterval(Ue.current),Ue.current=null)),we.current&&we.current.pause(),D.current&&D.current.setPlaybackState(!1),be.current&&clearInterval(be.current),h&&mt(J=>{const re={...J};return delete re[h],re}),V(P),T(!1);const S=new Audio(Q.url);we.current=S,Tn(S),S.playbackRate=he,S.volume=Se?0:ge;const B=nt().indexOf(P);B!==-1&&lt(B),be.current=setInterval(()=>{if(S&&!S.paused){const J=Math.ceil(S.duration-S.currentTime);mt(re=>({...re,[P]:J}))}},100),S.onended=()=>{V(null),T(!1),we.current=null,be.current&&(clearInterval(be.current),be.current=null),mt(J=>{const re={...J};return delete re[P],re})},S.onerror=J=>{console.error("Audio playback error:",J),V(null),T(!1),we.current=null,be.current&&(clearInterval(be.current),be.current=null)},S.play().then(()=>{D.current&&D.current.setPlaybackState(!0)}).catch(J=>{console.error("Failed to play audio:",J),V(null),T(!1),we.current=null,D.current&&D.current.setPlaybackState(!1),be.current&&(clearInterval(be.current),be.current=null)})}},St=P=>{oe(P),we.current&&(we.current.playbackRate=P)},Bn=()=>{if(K)F(!1),T(!0),we.current&&we.current.pause(),D.current&&D.current.setPlaybackState(!1),Ue.current&&(clearInterval(Ue.current),Ue.current=null),be.current&&(clearInterval(be.current),be.current=null);else{const P=nt();if(P.length===0)return;be.current&&(clearInterval(be.current),be.current=null),X&&h&&we.current?(F(!0),T(!1),we.current.play().then(()=>{D.current&&D.current.setPlaybackState(!0),Wn(),be.current=setInterval(()=>{if(we.current&&!we.current.paused){const Q=Math.ceil(we.current.duration-we.current.currentTime);mt(S=>({...S,[h]:Q}))}},100)}).catch(Q=>{console.error("Failed to resume audio:",Q),F(!1),T(!0)})):!h||!P.includes(h)?(we.current&&(we.current.pause(),we.current=null),D.current&&D.current.setPlaybackState(!1),lt(0),F(!0),T(!1),setTimeout(()=>Ht(0),0)):(F(!0),T(!1),Wn())}},Hn=()=>{const P=nt();if(P.length!==0)if(h&&mt(Q=>{const S={...Q};return delete S[h],S}),T(!1),K){const Q=Dt>0?Dt-1:P.length-1;lt(Q),Ht(Q)}else{const Q=Dt>0?Dt-1:P.length-1;lt(Q),V(P[Q])}},rr=()=>{const P=nt();if(P.length!==0)if(h&&mt(Q=>{const S={...Q};return delete S[h],S}),T(!1),K){const Q=(Dt+1)%P.length;lt(Q),Ht(Q)}else{const Q=(Dt+1)%P.length;lt(Q),V(P[Q])}},Wn=()=>{Ue.current&&clearInterval(Ue.current),Ue.current=setInterval(()=>{vn(Date.now())},500)},Ht=O.useCallback(async P=>{const Q=nt();if(!(P>=Q.length)){we.current&&(we.current.pause(),we.current=null),D.current&&D.current.setPlaybackState(!1),be.current&&(clearInterval(be.current),be.current=null),Wn(),T(!1);for(let S=P;S<Q.length&&Me.current;S++){const R=Q[S],B=a[R];B!=null&&B.url&&(lt(S),V(R),await new Promise(J=>{const re=new Audio(B.url);we.current=re,Tn(re),re.playbackRate=he,re.volume=Se?0:ge,be.current=setInterval(()=>{if(re&&!re.paused){const fe=Math.ceil(re.duration-re.currentTime);mt(ce=>({...ce,[R]:fe}))}},100),re.onended=()=>{D.current&&D.current.setPlaybackState(!1),be.current&&(clearInterval(be.current),be.current=null),mt(fe=>{const ce={...fe};return delete ce[R],ce}),J()},re.onerror=fe=>{console.error("Audio playback error:",fe),be.current&&(clearInterval(be.current),be.current=null),J()},re.play().then(()=>{D.current&&D.current.setPlaybackState(!0)}).catch(fe=>{console.error("Failed to play audio:",fe),D.current&&D.current.setPlaybackState(!1),be.current&&(clearInterval(be.current),be.current=null),J()})}))}F(!1),T(!1),V(null),lt(0),we.current=null,Ue.current&&(clearInterval(Ue.current),Ue.current=null)}},[nt,Tn,he,Se,ge,a]);O.useEffect(()=>()=>{Ue.current&&clearInterval(Ue.current)},[]);const fn=(P,Q,S=null,R=0,B=!1,J=null)=>{var wn;const re=a[P],ce=h===P&&!X,Ce=!P.startsWith("between")&&!B,Ie=Ce&&S&&S===x,Ae=L[P],ut=ee===P,et=L[`${P}-type`],Wt=P.startsWith("between")||B?"general":"station",Gn=ce||Ie&&!ce;return o.jsx("div",{className:`rounded-lg transition-all overflow-visible ${Gn?"card-selected":"card-unselected"}`,onClick:()=>{Ce&&S&&Pt(S)},children:o.jsxs("div",{className:"p-2",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-5 flex items-center justify-center flex-shrink-0",children:N&&Ce?o.jsx("span",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400",children:R/2+1}):o.jsxs("div",{className:"relative",ref:se=>jr.current[`${P}-type`]=se,children:[o.jsx("button",{onClick:se=>{se.stopPropagation(),dn(`${P}-type`)},className:"flex items-center justify-center hover:bg-gray-100 dark:hover:bg-gray-600 rounded p-0.5 transition-colors",children:de(P,Wt,Ce?Bt:null)}),et&&o.jsx("div",{className:"absolute left-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50 py-1 min-w-[160px]",children:Ce?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"px-3 py-1.5 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider pointer-events-none",children:z("stationTypes")}),o.jsxs("button",{onClick:se=>{se.stopPropagation(),Be(P,"station"),Y({})},className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-left text-sm",children:[o.jsx(Ns,{size:14,className:"text-blue-500"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:z("station")})]}),o.jsxs("button",{onClick:se=>{se.stopPropagation(),Be(P,"centralStation"),Y({})},className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-left text-sm",children:[o.jsx(Nc,{size:14,className:"text-purple-500"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:z("centralStation")})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"px-3 py-1.5 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider pointer-events-none",children:z("announcements")}),o.jsxs("button",{onClick:se=>{se.stopPropagation(),Be(P,"general"),Y({})},className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-left text-sm",children:[o.jsx(Ua,{size:14,className:"text-gray-400"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:z("general")})]}),o.jsxs("button",{onClick:se=>{se.stopPropagation(),Be(P,"arrival"),Y({})},className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-left text-sm",children:[o.jsx(bc,{size:14,className:"text-green-500"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:z("arrival")})]}),o.jsxs("button",{onClick:se=>{se.stopPropagation(),Be(P,"departure"),Y({})},className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-left text-sm",children:[o.jsx(Ac,{size:14,className:"text-orange-500"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:z("departure")})]}),o.jsxs("button",{onClick:se=>{se.stopPropagation(),Be(P,"transfer"),Y({})},className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-left text-sm",children:[o.jsx(Ua,{size:14,className:"text-purple-500"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:z("transfer")})]}),o.jsxs("button",{onClick:se=>{se.stopPropagation(),Be(P,"information"),Y({})},className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-left text-sm",children:[o.jsx(ml,{size:14,className:"text-cyan-500"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:z("information")})]}),o.jsxs("button",{onClick:se=>{se.stopPropagation(),Be(P,"live"),Y({})},className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-left text-sm",children:[o.jsx(Ec,{size:14,className:"text-pink-500"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:z("live")})]}),o.jsxs("button",{onClick:se=>{se.stopPropagation(),Be(P,"warning"),Y({})},className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-left text-sm",children:[o.jsx(wc,{size:14,className:"text-red-500"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:z("warning")})]}),o.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 my-1"}),o.jsx("div",{className:"px-3 py-1.5 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider pointer-events-none",children:z("misc")}),o.jsxs("button",{onClick:se=>{se.stopPropagation(),Be(P,"chime"),Y({})},className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-left text-sm",children:[o.jsx(_c,{size:14,className:"text-yellow-500"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:z("chime")})]}),o.jsxs("button",{onClick:se=>{se.stopPropagation(),Be(P,"music"),Y({})},className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-left text-sm",children:[o.jsx(zc,{size:14,className:"text-pink-500"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:z("music")})]}),o.jsxs("button",{onClick:se=>{se.stopPropagation(),Be(P,"ambience"),Y({})},className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-left text-sm",children:[o.jsx(Tc,{size:14,className:"text-indigo-500"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:z("ambience")})]})]})})]})}),o.jsx("span",{className:"font-medium text-sm text-gray-800 dark:text-gray-200 flex-shrink-0",children:Q}),(B&&J||!Ce&&!B&&re)&&o.jsx("button",{onClick:se=>{se.stopPropagation(),B&&J?Jt(J,P):Rt(P)},className:"p-1 hover:bg-red-100 dark:hover:bg-red-900/20 rounded transition-colors flex-shrink-0",title:z("removeSegment"),children:o.jsx(Xn,{size:12,className:"text-red-500"})})]}),re&&pt[P]&&o.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 flex-shrink-0 font-medium",children:on[P]!==void 0?un(on[P]):un(pt[P])})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-5 flex items-center justify-center flex-shrink-0",children:ce&&o.jsx("div",{className:"flex items-center gap-1 px-1.5 py-0.5 bg-blue-500 text-white rounded",children:o.jsx(dh,{})})}),o.jsxs("div",{className:"flex-1 relative",ref:se=>jr.current[P]=se,children:[o.jsx("input",{ref:se=>Un.current[P]=se,type:"file",accept:"audio/*",onChange:se=>gt(P,se),className:"hidden"}),o.jsxs("button",{onClick:se=>{se.stopPropagation(),dn(P)},className:"w-full flex items-center justify-between gap-2 px-2 py-1.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 rounded border border-gray-200 dark:border-gray-600 transition-colors text-xs",children:[o.jsx("span",{className:"truncate text-gray-700 dark:text-gray-300",children:re?yt(re,P):"Select audio..."}),Ae?o.jsx(Lr,{size:14,className:"flex-shrink-0 text-gray-500"}):o.jsx(Jr,{size:14,className:"flex-shrink-0 text-gray-500"})]}),Ae&&o.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50 max-h-64 overflow-y-auto",children:[o.jsxs("button",{onClick:se=>{var st;se.stopPropagation(),(st=Un.current[P])==null||st.click()},className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-left text-sm text-gray-700 dark:text-gray-300 border-b border-gray-100 dark:border-gray-700",children:[o.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"+"}),o.jsx("span",{children:"Upload Audio"})]}),o.jsxs("button",{onClick:se=>{se.stopPropagation(),Er(P,Q)},disabled:!w,className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-left text-sm text-gray-700 dark:text-gray-300 border-b border-gray-100 dark:border-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"+"}),o.jsx("span",{children:"Generate with AI"})]}),o.jsxs("div",{className:"py-1",children:[v.map(se=>o.jsx("button",{onClick:st=>{st.stopPropagation(),qe(P,{path:se.url,name:se.name})},className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-left text-sm text-gray-700 dark:text-gray-300",children:o.jsx("span",{className:"truncate",children:se.name})},se.id)),kn.map(se=>o.jsx("button",{onClick:st=>{st.stopPropagation(),qe(P,se)},className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-left text-sm text-gray-700 dark:text-gray-300",children:o.jsx("span",{className:"truncate",children:se.name})},se.id))]})]})]}),re&&o.jsx("button",{onClick:se=>{se.stopPropagation(),qt(P)},className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors flex-shrink-0",title:z("playAudio"),children:ce?o.jsx(Da,{size:14,className:"text-blue-500"}):o.jsx(Ra,{size:14,className:"text-gray-600 dark:text-gray-400"})})]}),ut&&o.jsxs("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 max-w-full overflow-visible",children:[o.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"AI Generation"}),o.jsxs("div",{className:"space-y-2 mb-3",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"generationType",value:"text-to-speech",checked:pe==="text-to-speech",onChange:se=>ke(se.target.value),className:"w-4 h-4 text-blue-600"}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Text-to-Speech"})]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"generationType",value:"sound-effects",checked:pe==="sound-effects",onChange:se=>ke(se.target.value),className:"w-4 h-4 text-blue-600"}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Sound Effects"})]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-not-allowed opacity-50",children:[o.jsx("input",{type:"radio",name:"generationType",value:"music",disabled:!0,className:"w-4 h-4 text-blue-600"}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Music (Coming Soon)"})]})]}),pe==="text-to-speech"&&o.jsxs("div",{className:"space-y-3 max-w-full",children:[o.jsxs("div",{className:"relative",ref:_,children:[o.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1 block",children:"Voice"}),o.jsxs("button",{onClick:se=>{se.stopPropagation(),Z(!q)},className:"w-full flex items-center justify-between gap-2 px-2 py-1.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 rounded border border-gray-200 dark:border-gray-600 transition-colors text-xs",children:[o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:((wn=$e.find(se=>se.id===Ne))==null?void 0:wn.name)||"Select voice..."}),q?o.jsx(Lr,{size:14,className:"flex-shrink-0 text-gray-500"}):o.jsx(Jr,{size:14,className:"flex-shrink-0 text-gray-500"})]}),q&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-[100] overflow-hidden",children:$e.map(se=>{const st=Ne===se.id,Ln=Xe===se.id;return o.jsxs("button",{onClick:Gt=>{Gt.stopPropagation(),!Gt.target.closest(".preview-button")&&(Te(se.id),Z(!1))},className:`w-full flex items-center gap-2 px-3 py-1.5 border-b border-gray-100 dark:border-gray-700 last:border-b-0 text-left text-xs ${st?"bg-blue-50 dark:bg-blue-900/20":"hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,children:[o.jsx("span",{className:"flex-1 text-gray-700 dark:text-gray-300",children:se.name}),o.jsx("span",{className:"preview-button p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors flex-shrink-0",onClick:Gt=>{var An;Gt.stopPropagation(),Ln?((An=E.current)==null||An.pause(),f(null)):E.current&&(E.current.src=se.preview,E.current.play(),f(se.id))},title:`Preview ${se.name}`,children:Ln?o.jsx(Da,{size:14,className:"text-blue-500"}):o.jsx(Ra,{size:14,className:"text-gray-600 dark:text-gray-400"})})]},se.id)})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1 block",children:"Text"}),o.jsx("textarea",{value:me,onChange:se=>ve(se.target.value),placeholder:"Enter the text to convert to speech...",className:"w-full px-2 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3,onClick:se=>se.stopPropagation()})]}),y[P]&&y[P].length>0&&!I&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400",children:"Generated Audio:"}),y[P].map((se,st)=>{const Ln=re&&re.url===se.url,Gt=`${P}-gen-${st}`,An=ae===Gt;return o.jsx("button",{onClick:bn=>{bn.stopPropagation(),i(_t=>({..._t,[P]:se}))},className:`w-full p-2 border rounded bg-gray-50 dark:bg-gray-700/50 transition-all text-left ${Ln?"border-blue-500 ring-2 ring-blue-500 ring-opacity-50":"border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-500"}`,children:o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("p",{className:"text-xs text-gray-700 dark:text-gray-300 font-medium mb-1",children:[se.voiceName," #",st+1]}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 break-words whitespace-normal",children:se.text})]}),o.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[o.jsx("span",{onClick:bn=>{bn.stopPropagation(),An?(ie.current&&(ie.current.pause(),ie.current.currentTime=0),G(null)):ie.current&&(ie.current.src=se.url,ie.current.load(),ie.current.play().catch(_t=>{console.error("Error playing preview:",_t)}),G(Gt))},className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:An?"Stop":"Play",children:An?o.jsx(Da,{size:14,className:"text-blue-500"}):o.jsx(Ra,{size:14,className:"text-gray-600 dark:text-gray-400"})}),o.jsx("span",{onClick:bn=>{bn.stopPropagation(),g(_t=>({..._t,[P]:_t[P].filter((Pr,Hs)=>Hs!==st)})),Ln&&i(_t=>{const Pr={..._t};return delete Pr[P],Pr})},className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:z("remove"),children:o.jsx(Xn,{size:14,className:"text-gray-700 dark:text-gray-300"})})]})]})},Gt)})]})]}),pe==="sound-effects"&&o.jsxs("div",{className:"space-y-3 max-w-full",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1 block",children:"Sound Description"}),o.jsx("textarea",{value:me,onChange:se=>ve(se.target.value),placeholder:"Describe the sound effect you want (e.g., 'Train arriving at station with brakes screeching')",className:"w-full px-2 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3,onClick:se=>se.stopPropagation()})]}),y[P]&&y[P].length>0&&!I&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400",children:"Generated Sound Effects:"}),y[P].map((se,st)=>{const Ln=re&&re.url===se.url,Gt=`${P}-sfx-${st}`,An=ae===Gt;return o.jsx("button",{onClick:bn=>{bn.stopPropagation(),i(_t=>({..._t,[P]:se}))},className:`w-full p-2 border rounded bg-gray-50 dark:bg-gray-700/50 transition-all text-left ${Ln?"border-blue-500 ring-2 ring-blue-500 ring-opacity-50":"border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-500"}`,children:o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("p",{className:"text-xs text-gray-700 dark:text-gray-300 font-medium mb-1",children:["Sound Effect #",st+1]}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 break-words whitespace-normal",children:se.text})]}),o.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[o.jsx("span",{onClick:bn=>{bn.stopPropagation(),An?(ie.current&&(ie.current.pause(),ie.current.currentTime=0),G(null)):ie.current&&(ie.current.src=se.url,ie.current.load(),ie.current.play().catch(_t=>{console.error("Error playing preview:",_t)}),G(Gt))},className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:An?"Stop":"Play",children:An?o.jsx(Da,{size:14,className:"text-blue-500"}):o.jsx(Ra,{size:14,className:"text-gray-600 dark:text-gray-400"})}),o.jsx("span",{onClick:bn=>{bn.stopPropagation(),g(_t=>({..._t,[P]:_t[P].filter((Pr,Hs)=>Hs!==st)})),Ln&&i(_t=>{const Pr={..._t};return delete Pr[P],Pr})},className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:z("remove"),children:o.jsx(Xn,{size:14,className:"text-gray-700 dark:text-gray-300"})})]})]})},Gt)})]})]}),o.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-blue-200 dark:border-blue-700",children:[o.jsx("button",{onClick:se=>{se.stopPropagation(),Je(P,Q)},disabled:I||!me.trim(),className:"flex-1 px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:I?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),o.jsx("span",{children:"Generating..."})]}):"Generate"}),o.jsx("button",{onClick:se=>{se.stopPropagation(),te(null),ve("")},disabled:I,className:"px-3 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded text-sm transition-colors disabled:opacity-50",children:"Cancel"})]})]})]})})},vi=async()=>{var P;Qt(!0);try{const Q=new Sm,S=nt(),R=((P=t.find(fe=>fe.id===$))==null?void 0:P.name)||"Train Line";for(let fe=0;fe<S.length;fe++){const ce=S[fe],Ce=a[ce];if(Ce!=null&&Ce.url)try{const Ae=await(await fetch(Ce.url)).blob(),ut=`${String(fe+1).padStart(3,"0")}_${Ce.transcription||ce}.mp3`.replace(/[^a-z0-9_\-\.]/gi,"_");Q.file(ut,Ae)}catch(Ie){console.error(`Failed to fetch audio for ${ce}:`,Ie)}}const B=await Q.generateAsync({type:"blob"}),J=URL.createObjectURL(B),re=document.createElement("a");re.href=J,re.download=`${R.replace(/[^a-z0-9_\-]/gi,"_")}_audio.zip`,document.body.appendChild(re),re.click(),document.body.removeChild(re),URL.revokeObjectURL(J)}catch(Q){console.error("Failed to export audio:",Q),alert("Failed to export audio files. Please try again.")}finally{Qt(!1)}},ki=()=>{var Q;const P=document.querySelector(".relative.w-full.h-full svg");if(!P){alert("Canvas not found");return}Qt(!0);try{const S=P.cloneNode(!0),R=((Q=P.getAttribute("viewBox"))==null?void 0:Q.split(" ").map(Number))||[0,0,1200,800];S.setAttribute("width",R[2].toString()),S.setAttribute("height",R[3].toString()),S.setAttribute("xmlns","http://www.w3.org/2000/svg");const B=S.querySelector("rect.pointer-events-none");B&&(B.style.fill="white",B.removeAttribute("class")),S.querySelectorAll("text").forEach(et=>{et.style.fill="#1f2937",et.removeAttribute("class")}),S.querySelectorAll("rect:not(.grid-dot)").forEach(et=>{et.classList.contains("pointer-events-none")||(et.style.fill="white",et.removeAttribute("class"))});const fe=new XMLSerializer().serializeToString(S),ce=document.createElement("canvas"),Ce=ce.getContext("2d"),Ie=new window.Image;ce.width=R[2],ce.height=R[3];const Ae=new Blob([fe],{type:"image/svg+xml;charset=utf-8"}),ut=URL.createObjectURL(Ae);Ie.onload=()=>{Ce.fillStyle="white",Ce.fillRect(0,0,ce.width,ce.height),Ce.drawImage(Ie,0,0),ce.toBlob(et=>{var se;const Wt=URL.createObjectURL(et),Gn=document.createElement("a"),wn=((se=t.find(st=>st.id===$))==null?void 0:se.name)||"Train Line";Gn.href=Wt,Gn.download=`${wn.replace(/[^a-z0-9_\-]/gi,"_")}_map.png`,document.body.appendChild(Gn),Gn.click(),document.body.removeChild(Gn),URL.revokeObjectURL(Wt),URL.revokeObjectURL(ut),Qt(!1)})},Ie.onerror=()=>{URL.revokeObjectURL(ut),alert("Failed to export canvas snapshot"),Qt(!1)},Ie.src=ut}catch(S){console.error("Failed to export canvas:",S),alert("Failed to export canvas snapshot. Please try again."),Qt(!1)}};return o.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-gray-800",children:[o.jsx("audio",{ref:E,onEnded:()=>f(null),onPause:()=>f(null)}),o.jsx("audio",{ref:ie,onEnded:()=>G(null)}),o.jsxs("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-gray-200",children:z("audioControlPanel")}),o.jsxs("div",{className:"flex items-center gap-2",children:[wt()>0&&o.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium",children:un(K?Zr():wt())}),b&&c&&o.jsx("button",{onClick:c,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",children:o.jsx(Xn,{size:20,className:"text-gray-600 dark:text-gray-400"})})]})]}),t.length>1&&o.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[o.jsx("button",{onClick:()=>{const P=t.findIndex(S=>S.id===$),Q=P>0?P-1:t.length-1;W(t[Q].id)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:z("previousLine"),children:o.jsx(B0,{size:16,className:"text-gray-600 dark:text-gray-400"})}),o.jsx("div",{className:"flex-1 text-center",children:o.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:((wi=t.find(P=>P.id===$))==null?void 0:wi.name)||""})}),o.jsx("button",{onClick:()=>{const P=t.findIndex(S=>S.id===$),Q=P<t.length-1?P+1:0;W(t[Q].id)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:z("nextLine"),children:o.jsx(H0,{size:16,className:"text-gray-600 dark:text-gray-400"})})]}),Re.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1.5",children:[o.jsxs("button",{onClick:()=>at(!At),className:`flex items-center justify-center p-1.5 rounded-lg transition-colors gap-0.5 ${At?"btn-selected":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:z("toggleVolume"),children:[Se?o.jsx(Ic,{size:16}):o.jsx(Rc,{size:16}),At?o.jsx(Lr,{size:12,className:"opacity-60"}):o.jsx(Jr,{size:12,className:"opacity-60"})]}),o.jsx("button",{onClick:Hn,className:Bi,title:z("previousInQueue"),children:o.jsx(tm,{size:16})}),o.jsx("button",{onClick:Bn,className:"flex items-center justify-center p-2 rounded-lg transition-colors bg-blue-500 hover:bg-blue-600 text-white",title:z("playPauseQueue"),children:K?o.jsx(Da,{size:18}):o.jsx(Ra,{size:18})}),o.jsx("button",{onClick:rr,className:Bi,title:z("nextInQueue"),children:o.jsx(nm,{size:16})}),o.jsxs("button",{onClick:()=>Fe(!ft),className:`flex items-center justify-center p-1.5 rounded-lg transition-colors gap-0.5 min-w-[44px] ${ft?"btn-selected":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:z("cycleSpeed"),children:[o.jsxs("span",{className:"text-xs font-medium leading-none",children:[he,"x"]}),ft?o.jsx(Lr,{size:12,className:"opacity-60"}):o.jsx(Jr,{size:12,className:"opacity-60"})]}),o.jsxs("button",{onClick:()=>Le(!Ut),className:`flex items-center justify-center p-1.5 rounded-lg transition-colors gap-0.5 ${Ut?"btn-selected":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:z("audioProcessing"),children:[o.jsx(G0,{size:16}),Ut?o.jsx(Lr,{size:12,className:"opacity-60"}):o.jsx(Jr,{size:12,className:"opacity-60"})]}),A&&o.jsx("button",{onClick:()=>A(!M),className:`flex items-center justify-center p-1.5 rounded-lg transition-colors ${M?"btn-selected":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:z("displayAudioCaptions"),children:o.jsx(V0,{size:16})})]}),o.jsxs("div",{className:"mb-1.5 px-2 py-1.5 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[z("audioQueue"),": ",Dt+1," / ",nt().length]}),o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:un(wt())})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5",children:o.jsx("div",{className:"bg-blue-500 h-1.5 rounded-full transition-all duration-100",style:{width:`${wt()>0?(wt()-Zr())/wt()*100:0}%`}})})]}),At&&o.jsxs("div",{className:"mb-1.5 p-2 bg-gray-50 dark:bg-gray-800 rounded-lg border border-blue-500",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Volume"}),o.jsxs("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 min-w-[32px] text-right",children:[Math.round((Se?0:ge)*100),"%"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{Qe(!Se),we.current&&(we.current.volume=Se?ge:0)},className:Bi,title:z(Se?"unmute":"mute"),children:Se?o.jsx(Ic,{size:16}):o.jsx(Rc,{size:16})}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:Se?0:ge,onChange:P=>{const Q=parseFloat(P.target.value);Ee(Q),Q>0&&Qe(!1),we.current&&(we.current.volume=Q)},className:"flex-1 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-lg appearance-none cursor-pointer"})]})]}),ft&&o.jsxs("div",{className:"mb-1.5 p-2 bg-gray-50 dark:bg-gray-800 rounded-lg border border-blue-500",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Speed"}),o.jsxs("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 min-w-[40px] text-right",children:[he.toFixed(2),"x"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>St(1),className:Bi,title:z("resetSpeed"),children:o.jsx("span",{className:"text-xs font-medium",children:"1x"})}),o.jsx("input",{type:"range",min:"0.5",max:"4",step:"0.05",value:he,onChange:P=>{const Q=parseFloat(P.target.value);St(Q)},className:"flex-1 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-lg appearance-none cursor-pointer"})]})]}),Ut&&o.jsxs("div",{className:"mb-1.5 p-2 bg-gray-50 dark:bg-gray-800 rounded-lg border border-blue-500",children:[o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1.5",children:z("audioProcessing")}),o.jsx("div",{className:"grid grid-cols-3 gap-1",children:["standard","vacant","commuter","express","firstClass","radio","platform","underground","tunnel"].map(P=>o.jsx("button",{onClick:()=>C(P),className:`px-2 py-1.5 rounded text-xs font-medium text-center transition-colors ${le===P?"btn-selected":"btn-unselected"}`,children:z(`audioPreset${P.charAt(0).toUpperCase()+P.slice(1)}`)},P))})]})]}),!w&&t.length>0&&o.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1.5",children:z("setApiKeyToGenerate")})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:t.length===0?o.jsxs("div",{className:"text-center text-gray-400 dark:text-gray-500 mt-6",children:[o.jsx("p",{children:z("noLinesYet")}),o.jsx("p",{className:"text-sm mt-1.5",children:z("createLineFirst")})]}):Re.length===0?o.jsx("div",{className:"text-center text-gray-400 dark:text-gray-500 mt-6",children:o.jsx("p",{children:z("selectLine")})}):o.jsx("div",{className:"flex gap-2",children:o.jsx("div",{className:"flex-1 min-w-0 overflow-visible",children:Re.map((P,Q)=>{var fe;let S=Q*2;const R=`station-${P.id}`,B=`between-${P.id}-${(fe=Re[Q+1])==null?void 0:fe.id}`,J=Q===Re.length-1,re=Q===0;return o.jsxs("div",{children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("div",{className:"relative flex items-center justify-center flex-shrink-0",style:{width:"20px"},children:[!re&&o.jsx("div",{className:"absolute w-0.5 left-1/2 -translate-x-1/2",style:{bottom:"50%",top:0,backgroundColor:Bt,opacity:.6}}),!J&&o.jsx("div",{className:"absolute w-0.5 left-1/2 -translate-x-1/2",style:{top:"50%",bottom:0,backgroundColor:Bt,opacity:.6}}),Pe(P.id)]}),o.jsx("div",{className:"flex-1 min-w-0",children:fn(R,P.name,P.id,S)})]}),Q<Re.length-1&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("div",{className:"flex flex-col items-center flex-shrink-0",style:{width:"20px"},children:o.jsx("div",{className:"w-0.5 flex-1",style:{backgroundColor:Bt,opacity:.6}})}),o.jsxs("div",{className:"relative flex-1 my-3 pl-8 pr-0",onMouseEnter:()=>ht(B),onMouseLeave:()=>ht(null),children:[o.jsx("div",{className:"absolute left-3 top-0 bottom-0 w-0.5 border-l-2 border-dashed border-gray-300 dark:border-gray-600"}),it===B&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>bt(B),className:"absolute left-3 -translate-x-1/2 top-0 -translate-y-1/2 p-0.5 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-full transition-colors shadow-sm border border-gray-300 dark:border-gray-600 z-10",title:z("addSegment"),children:o.jsx(jn,{size:12,className:"text-gray-400 hover:text-blue-500 dark:hover:text-blue-400"})}),(u[B]||[]).map((ce,Ce)=>{var Ie;return o.jsx("button",{onClick:()=>bt(B),className:"absolute left-3 -translate-x-1/2 p-0.5 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-full transition-colors shadow-sm border border-gray-300 dark:border-gray-600 z-10",style:{top:`${(Ce+1)/((((Ie=u[B])==null?void 0:Ie.length)||0)+2)*100}%`},title:z("addSegment"),children:o.jsx(jn,{size:12,className:"text-gray-400 hover:text-blue-500 dark:hover:text-blue-400"})},`add-${Ce}`)}),o.jsx("button",{onClick:()=>bt(B),className:"absolute left-3 -translate-x-1/2 bottom-0 translate-y-1/2 p-0.5 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-full transition-colors shadow-sm border border-gray-300 dark:border-gray-600 z-10",title:z("addSegment"),children:o.jsx(jn,{size:12,className:"text-gray-400 hover:text-blue-500 dark:hover:text-blue-400"})})]}),o.jsxs("div",{className:"space-y-1.5",children:[fn(B,xe(B,"general"),null,S+1),(u[B]||[]).map(ce=>o.jsx("div",{children:fn(ce,xe(ce,"general"),null,S+1,!0,B)},ce))]})]})]}),J&&Re.length>1&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("div",{className:"flex-shrink-0",style:{width:"20px"}}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 py-2 px-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-200 dark:border-gray-700 mt-3",children:[o.jsx(ah,{size:12,className:"flex-shrink-0"}),o.jsx("span",{children:z("returnsTo").replace("{station}",Re[0].name)})]})]})]},`slot-group-${P.id}`)})})})}),Re.length>0&&o.jsx("div",{className:"px-4 py-2 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 flex-shrink-0",children:o.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-gray-400",children:[o.jsx("span",{children:z("download")}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:ki,disabled:Cr,className:"flex items-center gap-1 px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed hover:text-gray-900 dark:hover:text-gray-200",title:z("downloadCanvas"),children:[o.jsx(J0,{size:12}),o.jsx("span",{children:z("downloadCanvasLabel")})]}),o.jsx("div",{className:"h-3 w-px bg-gray-300 dark:bg-gray-600"}),o.jsxs("button",{onClick:vi,disabled:Cr||nt().filter(P=>{var Q;return(Q=a[P])==null?void 0:Q.url}).length===0,className:"flex items-center gap-1 px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed hover:text-gray-900 dark:hover:text-gray-200",title:`${z("download")} ${nt().filter(P=>{var Q;return(Q=a[P])==null?void 0:Q.url}).length} ${z("downloadAudio")}`,children:[o.jsx(Y0,{size:12}),o.jsx("span",{children:z("downloadAudio")})]})]})]})})]})},Fr=[{id:"simple",name:"Simple Demo",description:"A simple 4-station demo route",fullDescription:"Four stations in a simple loop. Good for testing the announcement system.",stations:[{id:"station-1",x:300,y:200,name:"Central Station",color:"#8b5cf6"},{id:"station-2",x:450,y:200,name:"North Station",color:"#8b5cf6"},{id:"station-3",x:450,y:350,name:"East Station",color:"#8b5cf6"},{id:"station-4",x:300,y:350,name:"South Station",color:"#8b5cf6"}],lines:[{id:"demo-line",name:"Demo Line",color:"#8b5cf6",tension:.7,stations:["station-1","station-2","station-3","station-4","station-1"]}]},{id:"yamanote",name:"Yamanote Line",description:"Japan",fullDescription:"Tokyo's circular line with 21 stations. Connects major areas around central Tokyo.",stations:[{id:"tokyo",x:390,y:240,name:"Tokyo",color:"#10b981"},{id:"yurakucho",x:360,y:210,name:"Yurakucho",color:"#10b981"},{id:"shimbashi",x:330,y:180,name:"Shimbashi",color:"#10b981"},{id:"hamamatsucho",x:300,y:180,name:"Hamamatsucho",color:"#10b981"},{id:"tamachi",x:270,y:210,name:"Tamachi",color:"#10b981"},{id:"shinagawa",x:270,y:270,name:"Shinagawa",color:"#10b981"},{id:"osaki",x:270,y:330,name:"Osaki",color:"#10b981"},{id:"gotanda",x:300,y:360,name:"Gotanda",color:"#10b981"},{id:"meguro",x:330,y:390,name:"Meguro",color:"#10b981"},{id:"ebisu",x:360,y:390,name:"Ebisu",color:"#10b981"},{id:"shibuya",x:420,y:390,name:"Shibuya",color:"#10b981"},{id:"harajuku",x:450,y:360,name:"Harajuku",color:"#10b981"},{id:"yoyogi",x:480,y:330,name:"Yoyogi",color:"#10b981"},{id:"shinjuku",x:510,y:300,name:"Shinjuku",color:"#10b981"},{id:"shin-okubo",x:540,y:270,name:"Shin-Okubo",color:"#10b981"},{id:"takadanobaba",x:570,y:240,name:"Takadanobaba",color:"#10b981"},{id:"ikebukuro",x:570,y:180,name:"Ikebukuro",color:"#10b981"},{id:"uguisudani",x:510,y:120,name:"Uguisudani",color:"#10b981"},{id:"ueno",x:450,y:120,name:"Ueno",color:"#10b981"},{id:"akihabara",x:420,y:180,name:"Akihabara",color:"#10b981"},{id:"kanda",x:420,y:210,name:"Kanda",color:"#10b981"}],lines:[{id:"yamanote-line",name:"Yamanote Line",color:"#10b981",tension:.5,stations:["tokyo","yurakucho","shimbashi","hamamatsucho","tamachi","shinagawa","osaki","gotanda","meguro","ebisu","shibuya","harajuku","yoyogi","shinjuku","shin-okubo","takadanobaba","ikebukuro","uguisudani","ueno","akihabara","kanda","tokyo"]}]},{id:"chuo",name:"Chuo Line",description:"Japan",fullDescription:"East-west line through central Tokyo. Orange trains connect Tokyo Station to western suburbs.",stations:[{id:"tokyo-c",x:150,y:300,name:"Tokyo",color:"#f97316"},{id:"kanda-c",x:210,y:300,name:"Kanda",color:"#f97316"},{id:"ochanomizu",x:270,y:300,name:"Ochanomizu",color:"#f97316"},{id:"yotsuya",x:330,y:300,name:"Yotsuya",color:"#f97316"},{id:"shinjuku-c",x:390,y:300,name:"Shinjuku",color:"#f97316"},{id:"nakano",x:450,y:300,name:"Nakano",color:"#f97316"},{id:"koenji",x:510,y:300,name:"Koenji",color:"#f97316"},{id:"asagaya",x:570,y:300,name:"Asagaya",color:"#f97316"},{id:"ogikubo",x:630,y:300,name:"Ogikubo",color:"#f97316"}],lines:[{id:"chuo-line",name:"Chuo Line",color:"#f97316",tension:.3,stations:["tokyo-c","kanda-c","ochanomizu","yotsuya","shinjuku-c","nakano","koenji","asagaya","ogikubo"]}]},{id:"ginza",name:"Ginza Line",description:"Japan",fullDescription:"Tokyo's oldest subway line from 1927. Runs from Shibuya to Asakusa through Ginza and Ueno.",stations:[{id:"shibuya-g",x:150,y:450,name:"Shibuya",color:"#f59e0b"},{id:"omotesando",x:210,y:420,name:"Omotesando",color:"#f59e0b"},{id:"gaiemmae",x:270,y:390,name:"Gaiemmae",color:"#f59e0b"},{id:"aoyama-itchome",x:330,y:360,name:"Aoyama-itchome",color:"#f59e0b"},{id:"akasaka-mitsuke",x:390,y:330,name:"Akasaka-mitsuke",color:"#f59e0b"},{id:"ginza-g",x:450,y:300,name:"Ginza",color:"#f59e0b"},{id:"nihombashi",x:510,y:270,name:"Nihombashi",color:"#f59e0b"},{id:"ueno-g",x:570,y:240,name:"Ueno",color:"#f59e0b"},{id:"asakusa",x:630,y:210,name:"Asakusa",color:"#f59e0b"}],lines:[{id:"ginza-line",name:"Ginza Line",color:"#f59e0b",tension:.6,stations:["shibuya-g","omotesando","gaiemmae","aoyama-itchome","akasaka-mitsuke","ginza-g","nihombashi","ueno-g","asakusa"]}]},{id:"taiyokei",name:"Taiyokei Line",description:"Solar System train line from Mercury to Pluto in Japanese",fullDescription:"Solar system route with Japanese announcements. Stations from Mercury to Pluto.",stations:[{id:"mercury",x:100,y:250,name:" (Suisei)",color:"#000000"},{id:"venus",x:160,y:220,name:" (Kinsei)",color:"#000000"},{id:"earth",x:230,y:200,name:" (Chiky Ch)",color:"#000000"},{id:"mars",x:310,y:190,name:" (Kasei)",color:"#000000"},{id:"jupiter",x:400,y:200,name:" (Mokusei)",color:"#000000"},{id:"saturn",x:490,y:220,name:" (Dosei)",color:"#000000"},{id:"uranus",x:570,y:250,name:" (Ten'sei)",color:"#000000"},{id:"neptune",x:640,y:290,name:" (Kaisei)",color:"#000000"},{id:"pluto",x:700,y:340,name:" (Meisei)",color:"#000000"}],lines:[{id:"taiyokei-line",name:"Taiyokei Line",color:"#000000",tension:.4,stations:["mercury","venus","earth","mars","jupiter","saturn","uranus","neptune","pluto"]}],audioAssignments:{"station-mercury":{type:"preset",filename:"Taioykei Mercury JP.mp3",name:"Mercury Arrival",transcription:" "},"between-mercury-venus":{type:"preset",filename:"Taioykei Dep Mercury JP.mp3",name:"Mercury Departure",transcription:""},"station-venus":{type:"preset",filename:"Taioykei Venus JP.mp3",name:"Venus Arrival",transcription:""},"between-venus-earth":{type:"preset",filename:"Taioykei Dep Venus JP.mp3",name:"Venus Departure",transcription:""},"station-earth":{type:"preset",filename:"Taioykei Earth JP.mp3",name:"Earth Arrival",transcription:""},"between-earth-mars":{type:"preset",filename:"Taioykei Dep Earth JP.mp3",name:"Earth Departure",transcription:""},"station-mars":{type:"preset",filename:"Taioykei Mars JP.mp3",name:"Mars Arrival",transcription:""},"between-mars-jupiter":{type:"preset",filename:"Taioykei Dep Mars JP.mp3",name:"Mars Departure",transcription:""},"station-jupiter":{type:"preset",filename:"Taioykei Jupiter JP.mp3",name:"Jupiter Arrival",transcription:""},"between-jupiter-saturn":{type:"preset",filename:"Taioykei Dep Jupiter JP.mp3",name:"Jupiter Departure",transcription:""},"station-saturn":{type:"preset",filename:"Taioykei Saturn JP.mp3",name:"Saturn Arrival",transcription:""},"between-saturn-uranus":{type:"preset",filename:"Taioykei Dep Saturn JP.mp3",name:"Saturn Departure",transcription:""},"station-uranus":{type:"preset",filename:"Taioykei Uranus JP.mp3",name:"Uranus Arrival",transcription:""},"between-uranus-neptune":{type:"preset",filename:"Taioykei Dep Uranus JP.mp3",name:"Uranus Departure",transcription:""},"station-neptune":{type:"preset",filename:"Taioykei Neptune JP.mp3",name:"Neptune Arrival",transcription:""},"between-neptune-pluto":{type:"preset",filename:"Taioykei Dep Neptune JP.mp3",name:"Neptune Departure",transcription:""},"station-pluto":{type:"preset",filename:"Taioykei Pluto JP.mp3",name:"Pluto Arrival",transcription:""}}},{id:"taiyokei-en",name:"Solar Express",description:"Solar System train line from Mercury to Pluto in English",fullDescription:"Solar system route with English announcements. Stations from Mercury to Pluto.",stations:[{id:"mercury-en",x:100,y:250,name:"Mercury",color:"#4a5568"},{id:"venus-en",x:160,y:220,name:"Venus",color:"#4a5568"},{id:"earth-en",x:230,y:200,name:"Earth",color:"#4a5568"},{id:"mars-en",x:310,y:190,name:"Mars",color:"#4a5568"},{id:"jupiter-en",x:400,y:200,name:"Jupiter",color:"#4a5568"},{id:"saturn-en",x:490,y:220,name:"Saturn",color:"#4a5568"},{id:"uranus-en",x:570,y:250,name:"Uranus",color:"#4a5568"},{id:"neptune-en",x:640,y:290,name:"Neptune",color:"#4a5568"},{id:"pluto-en",x:700,y:340,name:"Pluto",color:"#4a5568"}],lines:[{id:"taiyokei-line-en",name:"Solar Express",color:"#4a5568",tension:.4,stations:["mercury-en","venus-en","earth-en","mars-en","jupiter-en","saturn-en","uranus-en","neptune-en","pluto-en"]}],audioAssignments:{"station-mercury-en":{type:"preset",filename:"Taioykei Mercury EN.mp3",name:"Mercury Arrival",transcription:"Thank you for using the Solar Express. This train is bound for Pluto. We will stop at Venus, Earth, Mars, Jupiter, Saturn, Uranus, Neptune, and Pluto. The next station is Venus."},"between-mercury-en-venus-en":{type:"preset",filename:"Taioykei Dep Mercury EN.mp3",name:"Mercury Departure",transcription:"The next station is Venus."},"station-venus-en":{type:"preset",filename:"Taioykei Venus EN.mp3",name:"Venus Arrival",transcription:"Venus. Venus."},"between-venus-en-earth-en":{type:"preset",filename:"Taioykei Dep Venus EN.mp3",name:"Venus Departure",transcription:"The next station is Earth Central Station."},"station-earth-en":{type:"preset",filename:"Taioykei Earth EN.mp3",name:"Earth Arrival",transcription:"Earth Central Station. Earth Central Station."},"between-earth-en-mars-en":{type:"preset",filename:"Taioykei Dep Earth EN.mp3",name:"Earth Departure",transcription:"The next station is Mars."},"station-mars-en":{type:"preset",filename:"Taioykei Mars EN.mp3",name:"Mars Arrival",transcription:"Mars. Mars."},"between-mars-en-jupiter-en":{type:"preset",filename:"Taioykei Dep Mars EN.mp3",name:"Mars Departure",transcription:"The next station is Jupiter."},"station-jupiter-en":{type:"preset",filename:"Taioykei Jupiter EN.mp3",name:"Jupiter Arrival",transcription:"Jupiter. Jupiter."},"between-jupiter-en-saturn-en":{type:"preset",filename:"Taioykei Dep Jupiter EN.mp3",name:"Jupiter Departure",transcription:"The next station is Saturn."},"station-saturn-en":{type:"preset",filename:"Taioykei Saturn EN.mp3",name:"Saturn Arrival",transcription:"Saturn. Saturn."},"between-saturn-en-uranus-en":{type:"preset",filename:"Taioykei Dep Saturn EN.mp3",name:"Saturn Departure",transcription:"The next station is Uranus."},"station-uranus-en":{type:"preset",filename:"Taioykei Uranus EN.mp3",name:"Uranus Arrival",transcription:"Uranus. Uranus."},"between-uranus-en-neptune-en":{type:"preset",filename:"Taioykei Dep Uranus EN.mp3",name:"Uranus Departure",transcription:"The next station is Neptune."},"station-neptune-en":{type:"preset",filename:"Taioykei Neptune EN.mp3",name:"Neptune Arrival",transcription:"Neptune. Neptune."},"between-neptune-en-pluto-en":{type:"preset",filename:"Taioykei Dep Neptune EN.mp3",name:"Neptune Departure",transcription:"The next station is Pluto."},"station-pluto-en":{type:"preset",filename:"Taioykei Pluto EN.mp3",name:"Pluto Arrival",transcription:"Pluto. Pluto."}}}],fh=O.forwardRef(({stations:e,setStations:t,setStationsNoHistory:n,lines:r,setLines:a,setStationsAndLines:i,currentTool:s,setCurrentTool:l,selectedStations:u,setSelectedStations:p,gridZoom:v=1,onGridZoomChange:k,language:y="en",lineStyle:g="smooth",onLineStyleChange:w,gridStyle:m="dots",onGridStyleChange:b,showStationNumbers:c=!1,isMobile:d=!1,selectedStationId:x=null,playingStationId:N=null,isStationPlaying:j=!1,showTranscription:M=!1,setShowTranscription:A,currentTranscription:H="",selectedLineId:$=null,labelSize:W=1,onLabelSizeChange:le,lineThickness:C=1,onLineThicknessChange:z,markerSize:h=1,onMarkerSizeChange:V,gridThickness:K=1,onGridThicknessChange:F,gridOpacity:D=1,onGridOpacityChange:U,currentPresetId:X=null,customTransitSystems:T=[]},L)=>{const{t:Y}=Yr(y),te=[...T,...Fr].find(S=>S.id===X),pe=te?te.isCopy&&te.nameKey?`${Y(te.nameKey)} (${Y("copy")})`:Y(te.name):Y("trainLine"),ke=Rn(V,-.05),me=Rn(V,.05),ve=Rn(le,-.05),Ne=Rn(le,.05),Te=Rn(z,-.05),$e=Rn(z,.05),Xe=Rn(F,-.05),f=Rn(F,.05),q=Rn(U,-.05),Z=Rn(U,.05),[E,_]=O.useState({x:0,y:0,width:1200,height:800}),[I,ne]=O.useState(!1),[ae,G]=O.useState({x:0,y:0}),[ie,he]=O.useState(null),[oe,ge]=O.useState(null),[Ee,Se]=O.useState(null),[Qe,At]=O.useState({x:0,y:0}),[at,ft]=O.useState(null),[Fe,Ut]=O.useState(null),[Le,it]=O.useState([]),[ht,pt]=O.useState([]),[kt,on]=O.useState("#ef4444"),[mt,Mn]=O.useState(!1),[vn,Dt]=O.useState(!1),[lt,Cr]=O.useState(null),[Qt,Un]=O.useState(null),[we,jr]=O.useState(!1),[be,Ue]=O.useState(null),Me=O.useRef(null),ln=O.useRef(null),Re=O.useRef(null),Bt=O.useRef(null),kn=O.useRef(v),je=30*v,Tn=S=>Math.round(S/je)*je,Et=S=>{const R=Math.max(.7,Math.min(5,S));if(R!==v&&k){const B=E.x+E.width/2,J=E.y+E.height/2,re=R/v,fe=B-(B-E.x)/re,ce=J-(J-E.y)/re,Ce=30*R,Ie=e.map(Ae=>Ae.gridIndexX!==void 0&&Ae.gridIndexY!==void 0?{...Ae,x:Ae.gridIndexX*Ce,y:Ae.gridIndexY*Ce}:Ae);n(Ie),_(Ae=>({...Ae,x:fe,y:ce})),k(R),kn.current=R}};O.useEffect(()=>{kn.current=v},[v]);const un=S=>{Bt.current||(Bt.current=setInterval(()=>{const R=kn.current+S*.05;Et(R)},50))},nt=()=>{Bt.current&&(clearInterval(Bt.current),Bt.current=null)};O.useEffect(()=>()=>{Bt.current&&clearInterval(Bt.current)},[]),O.useEffect(()=>{const S=30*v,R=e.map(B=>B.gridIndexX!==void 0&&B.gridIndexY!==void 0?{...B,x:B.gridIndexX*S,y:B.gridIndexY*S}:B);n(R)},[v]),O.useEffect(()=>{const S=()=>{if(ln.current){const R=ln.current.getBoundingClientRect();_(B=>({...B,width:R.width||1200,height:R.height||800}))}};return S(),window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[]),O.useEffect(()=>{s!=="createLine"&&it([]),s!=="drawPath"&&pt([])},[s]);const wt=(S,R)=>{if(!Me.current)return{x:0,y:0};const B=Me.current.createSVGPoint();B.x=S,B.y=R;const J=B.matrixTransform(Me.current.getScreenCTM().inverse());return{x:J.x,y:J.y}},Kr=()=>{const S=["#ef4444","#3b82f6","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4"],R=r.length;return S[R%S.length]},Zr=S=>{if(r.length<=1)return null;const R="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return R[S%R.length]},de=(S,R,B,J,re,fe)=>{const ce=re-B,Ce=fe-J,Ie=ce*ce+Ce*Ce;if(Ie===0)return{x:B,y:J,distance:Math.sqrt((S-B)**2+(R-J)**2)};let Ae=((S-B)*ce+(R-J)*Ce)/Ie;Ae=Math.max(0,Math.min(1,Ae));const ut=B+Ae*ce,et=J+Ae*Ce,Wt=Math.sqrt((S-ut)**2+(R-et)**2);return{x:ut,y:et,distance:Wt,t:Ae}},xe=S=>{const R=je*1;for(const B of r){const J=B.stations.map(re=>e.find(fe=>fe.id===re)).filter(Boolean);if(!(J.length<2))for(let re=0;re<J.length-1;re++){const fe=J[re],ce=J[re+1];if(de(S.x,S.y,fe.x,fe.y,ce.x,ce.y).distance<=R){const Ie=r.map(ut=>{if(ut.id===B.id){const et=[...ut.stations];return et.splice(re+1,0,S.id),{...ut,stations:et}}return ut}),Ae={...S,color:B.color};return i?i([...e,Ae],Ie):(t([...e,Ae]),a(Ie)),!0}}}return t([...e,S]),!1},Pe=S=>{if(s==="station"){if(S.target.tagName==="circle"&&S.target.classList.contains("grid-dot")){const R=parseFloat(S.target.getAttribute("cx")),B=parseFloat(S.target.getAttribute("cy")),J=Math.round(R/je),re=Math.round(B/je),fe={id:`station-${Date.now()}`,gridIndexX:J,gridIndexY:re,x:R,y:B,name:$i(e,y),color:"#3b82f6"};xe(fe)}else if(S.target.tagName==="rect"||S.target===Me.current){const R=wt(S.clientX,S.clientY),B=Math.round(R.x/je)*je,J=Math.round(R.y/je)*je,re=Math.round(B/je),fe=Math.round(J/je),ce={id:`station-${Date.now()}`,gridIndexX:re,gridIndexY:fe,x:B,y:J,name:$i(e,y),color:"#3b82f6"};xe(ce)}}else if(s==="createLine"){if(S.target.tagName==="circle"&&S.target.classList.contains("grid-dot")){const R=parseFloat(S.target.getAttribute("cx")),B=parseFloat(S.target.getAttribute("cy")),J=Math.round(R/je),re=Math.round(B/je),fe={id:`station-${Date.now()}-${Le.length}`,gridIndexX:J,gridIndexY:re,x:R,y:B,name:$i([...e,...Le],y),color:kt};it([...Le,fe])}else if(S.target.tagName==="rect"||S.target===Me.current){const R=wt(S.clientX,S.clientY),B=Math.round(R.x/je)*je,J=Math.round(R.y/je)*je,re=Math.round(B/je),fe=Math.round(J/je),ce={id:`station-${Date.now()}-${Le.length}`,gridIndexX:re,gridIndexY:fe,x:B,y:J,name:$i([...e,...Le],y),color:kt};it([...Le,ce])}}else if(s==="drawPath"){if(S.target.tagName==="circle"&&S.target.classList.contains("grid-dot")){const R=parseFloat(S.target.getAttribute("cx")),B=parseFloat(S.target.getAttribute("cy")),J=Math.round(R/je),re=Math.round(B/je);pt([...ht,{x:R,y:B,gridIndexX:J,gridIndexY:re}])}else if(S.target.tagName==="rect"||S.target===Me.current){const R=wt(S.clientX,S.clientY),B=Math.round(R.x/je)*je,J=Math.round(R.y/je)*je,re=Math.round(B/je),fe=Math.round(J/je);pt([...ht,{x:B,y:J,gridIndexX:re,gridIndexY:fe}])}}},Pt=(S,R)=>{s==="createLine"&&(R.stopPropagation(),Le.length>=2&&Le[0].id===S.id||Le.length>=1&&Le[0].id===S.id?fn(!0):it([...Le,S]))},Be=(S,R)=>{s==="drawPath"&&(R.stopPropagation(),pt([...ht,{x:S.x,y:S.y,gridIndexX:S.gridIndexX,gridIndexY:S.gridIndexY}]))},bt=(S,R)=>{R.stopPropagation(),s==="select"&&he(S)},Jt=(S,R)=>{if(s==="select"){R.stopPropagation();const B=wt(R.clientX,R.clientY);Se(S),he(null),ge(null),Un({...S}),At({x:B.x-S.x,y:B.y-S.y})}},Rt=(S,R)=>{if(s==="select"&&R.touches.length===1){R.stopPropagation();const B=R.touches[0],J=wt(B.clientX,B.clientY);Se(S),he(null),ge(null),Un({...S}),At({x:J.x-S.x,y:J.y-S.y})}},gt=S=>{const R=e.map(B=>B.id===S.id?S:B);t(R)},yt=S=>{t(e.filter(B=>B.id!==S));const R=r.map(B=>({...B,stations:B.stations.filter(J=>J!==S)})).filter(B=>B.stations.length>=2);a(R),he(null)},cn=(S,R=!1)=>{const B=r.map(J=>J.id===S.id?S:J);if(R&&S.stations){const J=e.map(re=>S.stations.includes(re.id)?{...re,color:S.color}:re);t(J)}a(B),ge(S)},Je=S=>{a(r.filter(R=>R.id!==S)),ge(null)},qe=(S,R)=>{s==="select"&&(R.stopPropagation(),ge(S),he(null))},dn=S=>{(S.button===1||S.button===0&&S.shiftKey||S.button===0&&s==="select"&&(S.target.tagName==="rect"||S.target===Me.current))&&(ne(!0),G({x:S.clientX,y:S.clientY}),he(null),ge(null),S.preventDefault())},Er=S=>{if(S.touches.length===2){S.preventDefault();const R=S.touches[0],B=S.touches[1],J=Math.hypot(B.clientX-R.clientX,B.clientY-R.clientY);Ue(J),ne(!1);return}if(S.touches.length===1){const R=S.touches[0],B=S.target;s==="select"&&(B.tagName==="rect"||B===Me.current)&&(ne(!0),G({x:R.clientX,y:R.clientY}),he(null),ge(null),S.preventDefault())}},qt=S=>{if(S.touches.length===2&&be!==null){S.preventDefault();const R=S.touches[0],B=S.touches[1],J=Math.hypot(B.clientX-R.clientX,B.clientY-R.clientY),re=(J-be)*.007,fe=v+re;Et(fe),Ue(J);return}if(S.touches.length===1){const R=S.touches[0],B=wt(R.clientX,R.clientY);if(Ut(B),s==="createLine"||s==="drawPath"||s==="station"){const J=Math.round(B.x/je)*je,re=Math.round(B.y/je)*je;ft({x:J,y:re})}else ft(null);if(Ee){S.preventDefault();const J=Tn(B.x-Qe.x),re=Tn(B.y-Qe.y);n(fe=>fe.map(ce=>ce.id===Ee.id?{...ce,x:J,y:re,gridIndexX:Math.round(J/je),gridIndexY:Math.round(re/je)}:ce))}else if(I){S.preventDefault();const J=(R.clientX-ae.x)*.5,re=(R.clientY-ae.y)*.5;_(fe=>({...fe,x:fe.x-J,y:fe.y-re})),G({x:R.clientX,y:R.clientY})}}},St=()=>{Ue(null),rr()},Bn=S=>{if(S.shiftKey){S.preventDefault();const R=-S.deltaY*.0015,B=v+R;Et(B)}},Hn=S=>{const R=wt(S.clientX,S.clientY);if(Ut(R),s==="createLine"||s==="drawPath"||s==="station"){const B=Math.round(R.x/je)*je,J=Math.round(R.y/je)*je;ft({x:B,y:J})}else ft(null);if(Ee){const B=Tn(R.x-Qe.x),J=Tn(R.y-Qe.y);n(re=>re.map(fe=>fe.id===Ee.id?{...fe,x:B,y:J,gridIndexX:Math.round(B/je),gridIndexY:Math.round(J/je)}:fe))}else if(I){const B=(S.clientX-ae.x)*.5,J=(S.clientY-ae.y)*.5;_(re=>({...re,x:re.x-B,y:re.y-J})),G({x:S.clientX,y:S.clientY})}},rr=()=>{if(Ee){const S=r.filter(R=>{const B=R.stations,J=B[0],re=B[B.length-1];return Ee.id===J||Ee.id===re});for(const R of S){const B=R.stations,J=B[0],re=B[B.length-1];if(J===re||J===re)continue;const fe=e.find(Ie=>Ie.id===J),ce=e.find(Ie=>Ie.id===re);if(!fe||!ce||fe.id===ce.id)continue;if(Math.sqrt(Math.pow(fe.x-ce.x,2)+Math.pow(fe.y-ce.y,2))<je/2){Cr({line:R,firstStation:{...fe},lastStation:{...ce},draggedStation:{...Ee}}),Dt(!0);return}}t([...e]),Un(null)}ne(!1),Se(null)},Wn=S=>{if(!lt)return;const{line:R,firstStation:B,lastStation:J,draggedStation:re}=lt;if(S==="cancel")Qt&&n(fe=>fe.map(ce=>ce.id===re.id?Qt:ce));else{const fe=S==="first"?B:J,ce=S==="first"?J:B,Ce=r.map(Ae=>{if(Ae.id===R.id){const ut=Ae.stations.map(et=>et===ce.id?fe.id:et);return{...Ae,stations:ut}}return Ae}),Ie=e.filter(Ae=>Ae.id!==ce.id);i?i(Ie,Ce):(t(Ie),a(Ce))}Dt(!1),Cr(null),Un(null),Se(null)},Ht=S=>{S.preventDefault(),s==="createLine"&&Le.length>=2?fn():s==="drawPath"&&ht.length>=2&&vi()},fn=(S=!1)=>{if(Le.length>=2){const R=[...e,...Le],B=Le.map(re=>re.id);S&&B.push(Le[0].id);const J={id:`line-${Date.now()}`,name:`Line ${r.length+1}`,stations:B,color:kt,tension:.7};t(R),a([...r,J]),it([]),on(Kr()),l&&l("select")}},vi=()=>{if(ht.length>=2){const S={id:`line-${Date.now()}`,name:`Line ${r.length+1}`,stations:[],pathPoints:ht,color:kt,tension:.7};a([...r,S]),pt([]),on(Kr()),l&&l("select")}},ki=(S=!0)=>{if(e.length===0)return;const R=e.map(Wt=>Wt.x),B=e.map(Wt=>Wt.y),J=(Math.min(...R)+Math.max(...R))/2,re=(Math.min(...B)+Math.max(...B))/2,fe=J-E.width/2,ce=re-E.height/2;if(Re.current&&cancelAnimationFrame(Re.current),!S){_(Wt=>({...Wt,x:fe,y:ce}));return}Mn(!0);const Ce=E.x,Ie=E.y,Ae=performance.now(),ut=600,et=Wt=>{const Gn=Wt-Ae,wn=Math.min(Gn/ut,1),se=wn<.5?4*wn*wn*wn:1-Math.pow(-2*wn+2,3)/2,st=Ce+(fe-Ce)*se,Ln=Ie+(ce-Ie)*se;_(Gt=>({...Gt,x:st,y:Ln})),wn<1?Re.current=requestAnimationFrame(et):Mn(!1)};Re.current=requestAnimationFrame(et)};O.useImperativeHandle(L,()=>({centerView:ki})),O.useEffect(()=>()=>{Re.current&&cancelAnimationFrame(Re.current)},[]);const wi=()=>{if(s==="createLine"&&Le.length>0&&at){const S=[...Le,at];return o.jsx(yo,{line:{stations:[],color:kt},stations:[],lineStyle:g,isGhost:!0,ghostPoints:S,color:kt,lineThickness:C})}if(s==="drawPath"&&ht.length>0&&at){const S=[...ht,at];return o.jsx(yo,{line:{stations:[],color:kt},stations:[],lineStyle:g,isGhost:!0,ghostPoints:S,color:kt,lineThickness:C})}return null},P=(S,R,B)=>{if(!c)return S.name;const J=Zr(B);return J?r.length>=2?`${J}${R+1} ${S.name}`:`${J}${R+1}: ${S.name}`:`${R+1}. ${S.name}`},Q=[...e,...Le];return o.jsxs("div",{ref:ln,className:"relative w-full h-full bg-gray-50 dark:bg-gray-800",children:[o.jsxs("svg",{ref:Me,viewBox:`${E.x} ${E.y} ${E.width} ${E.height}`,className:"w-full h-full cursor-crosshair",preserveAspectRatio:"xMidYMid slice",onClick:Pe,onMouseDown:dn,onMouseMove:Hn,onMouseUp:rr,onMouseLeave:rr,onContextMenu:Ht,onTouchStart:Er,onTouchMove:qt,onTouchEnd:St,onWheel:Bn,children:[o.jsx(om,{spacing:je,viewBox:E,zoom:v,currentTool:s,hoverPoint:at,gridStyle:m,gridThickness:K,gridOpacity:D}),r.map((S,R)=>o.jsx(yo,{line:S,stations:e,lineStyle:g,onClick:B=>qe(S,B),isEditing:(oe==null?void 0:oe.id)===S.id,lineThickness:C},S.id)),wi(),ht.map((S,R)=>o.jsx("circle",{cx:S.x,cy:S.y,r:"4",fill:kt,opacity:"0.7"},`path-point-${R}`)),e.map((S,R)=>{const B=r.find(ce=>ce.stations.includes(S.id)),J=B?r.indexOf(B):0,re=B?B.stations.indexOf(S.id):R,fe=s==="createLine"&&Le.length>=2&&Le[0].id===S.id;return o.jsx(Oc,{station:{...S,name:P(S,re,J)},isSelected:u.some(ce=>ce.id===S.id),isDragging:(Ee==null?void 0:Ee.id)===S.id,isHighlighted:x===S.id||fe,isPlaying:N===S.id&&j,onClick:ce=>{s==="createLine"?Pt(S,ce):s==="drawPath"?Be(S,ce):bt(S,ce)},onMouseDown:ce=>Jt(S,ce),onTouchStart:ce=>Rt(S,ce),allStations:Q,labelSize:W,markerSize:h},S.id)}),Le.map((S,R)=>o.jsx(Oc,{station:{...S,name:P(S,R,r.length)},isSelected:!1,isDragging:!1,onClick:()=>{},onMouseDown:()=>{},onTouchStart:()=>{},allStations:Q,labelSize:W,markerSize:h},S.id))]}),(ie||oe)&&o.jsx(gm,{station:ie,line:oe,lines:r,stations:e,onUpdateStation:gt,onUpdateLine:cn,onDeleteStation:yt,onDeleteLine:Je,setStationsAndLines:i,onClose:()=>{he(null),ge(null)},language:y}),o.jsx("div",{className:"absolute top-4 left-4 pointer-events-none",children:o.jsx("div",{className:"bg-white dark:bg-gray-800 px-3 py-2 rounded-lg shadow-md border border-gray-200 dark:border-gray-700",children:o.jsx("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:pe})})}),r.length>0&&o.jsx("div",{className:"absolute top-16 left-4 flex flex-col gap-2 items-start",children:r.map(S=>{const R=$===S.id&&r.length>1,B=J=>{if(J.length<=32)return J;const re=J.split(" "),fe=[];let ce="";for(const Ce of re)(ce+" "+Ce).trim().length>32?(ce&&fe.push(ce.trim()),ce=Ce):ce=ce?ce+" "+Ce:Ce;return ce&&fe.push(ce.trim()),fe.join(`
`)};return o.jsxs("button",{onClick:()=>{(oe==null?void 0:oe.id)===S.id?ge(null):(ge(S),he(null))},className:`flex items-center gap-2 px-3 py-2 rounded-lg shadow-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors cursor-pointer ${R?"bg-white dark:bg-gray-800 border border-blue-500":"bg-white dark:bg-gray-800 border border-transparent"}`,children:[o.jsx(Ua,{size:16,style:{color:S.color},className:"flex-shrink-0"}),o.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 whitespace-pre-wrap",children:B(Y(S.name))})]},S.id)})}),M&&H&&o.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 w-full max-w-2xl px-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 px-6 py-3 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 relative",children:[o.jsx("div",{className:"absolute top-3 left-3 flex items-center gap-1 px-1.5 py-0.5 bg-blue-500 text-white rounded",children:o.jsx(dh,{})}),o.jsx("p",{className:"text-center text-base font-medium text-gray-800 dark:text-gray-200 px-8",children:H})]})}),(s==="station"||s==="createLine"||s==="drawPath")&&o.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 py-2 rounded-lg shadow-md text-sm text-gray-500 dark:text-gray-400 border border-gray-200 dark:border-gray-700 flex items-center gap-2",children:[o.jsx(ml,{size:14,className:"flex-shrink-0"}),o.jsxs("span",{children:[s==="station"&&Y("clickGridToAddStation"),s==="createLine"&&Le.length===0&&Y(d?"tapToAddStations":"clickToAddStations"),s==="createLine"&&Le.length>0&&Le.length<2&&"Add more stations or right-click to finish",s==="createLine"&&Le.length>=2&&"Click first station to create loop, or right-click to finish",s==="drawPath"&&Y(d?"tapToDrawPath":"clickToDrawPath")]})]})}),o.jsxs("div",{className:"absolute bottom-4 left-4 flex flex-col gap-3 items-start",children:[we&&o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 px-1",children:Y("lineStyle")}),o.jsxs("div",{className:"flex gap-0 border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden shadow-md",style:{backgroundColor:"var(--toolbar-group-bg)"},children:[o.jsx("button",{onClick:()=>w("direct"),className:`flex items-center justify-center w-10 h-10 transition-colors ${g==="direct"?"btn-selected":"btn-unselected"}`,title:Y("lineStyleDirect"),children:o.jsx("span",{className:"text-lg font-medium",children:""})}),o.jsx("button",{onClick:()=>w("minimal"),className:`flex items-center justify-center w-10 h-10 transition-colors ${g==="minimal"?"btn-selected":"btn-unselected"}`,title:Y("lineStyleMinimal"),children:o.jsx("i",{className:"ri-loader-5-fill text-lg"})}),o.jsx("button",{onClick:()=>w("smooth"),className:`flex items-center justify-center w-10 h-10 transition-colors ${g==="smooth"?"btn-selected":"btn-unselected"}`,title:Y("lineStyleSmooth"),children:o.jsx("span",{className:"text-xl",children:""})})]})]}),we&&o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 px-1",children:Y("gridStyle")}),o.jsxs("div",{className:"flex gap-0 border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden shadow-md",style:{backgroundColor:"var(--toolbar-group-bg)"},children:[o.jsx("button",{onClick:()=>b("none"),className:`flex items-center justify-center w-10 h-10 transition-colors ${m==="none"?"btn-selected":"btn-unselected"}`,title:Y("gridStyleNone"),children:o.jsx(nh,{size:18})}),o.jsx("button",{onClick:()=>b("dots"),className:`flex items-center justify-center w-10 h-10 transition-colors ${m==="dots"?"btn-selected":"btn-unselected"}`,title:Y("gridStyleDots"),children:o.jsx(W0,{size:18})}),o.jsx("button",{onClick:()=>b("horizontal"),className:`flex items-center justify-center w-10 h-10 transition-colors ${m==="horizontal"?"btn-selected":"btn-unselected"}`,title:Y("gridStyleHorizontal"),children:o.jsx(ir,{size:18})}),o.jsx("button",{onClick:()=>b("vertical"),className:`flex items-center justify-center w-10 h-10 transition-colors ${m==="vertical"?"btn-selected":"btn-unselected"}`,title:Y("gridStyleVertical"),children:o.jsx(ir,{size:18,style:{transform:"rotate(90deg)"}})}),o.jsx("button",{onClick:()=>b("diagonal"),className:`flex items-center justify-center w-10 h-10 transition-colors ${m==="diagonal"?"btn-selected":"btn-unselected"}`,title:Y("gridStyleDiagonal"),children:o.jsx(Xn,{size:18})}),o.jsx("button",{onClick:()=>b("grid"),className:`flex items-center justify-center w-10 h-10 transition-colors ${m==="grid"?"btn-selected":"btn-unselected"}`,title:Y("gridStyleGrid"),children:o.jsx(jn,{size:18})})]})]}),we&&o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx("span",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 px-1",children:Y("canvasSettings")}),o.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 px-3 py-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(hl,{size:14,className:"text-gray-600 dark:text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:Y("markerSize")})]}),o.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-700 rounded px-1 py-0.5",children:[o.jsx("button",{onClick:()=>V(Math.max(.5,h-.1)),onMouseDown:ke.startHold,onMouseUp:ke.stopHold,onMouseLeave:ke.stopHold,onTouchStart:ke.startHold,onTouchEnd:ke.stopHold,className:"flex items-center justify-center w-5 h-5 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:o.jsx(ir,{size:10,className:"text-gray-700 dark:text-gray-300"})}),o.jsxs("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 min-w-[2.5rem] text-center",children:[h.toFixed(1),"x"]}),o.jsx("button",{onClick:()=>V(Math.min(5,h+.1)),onMouseDown:me.startHold,onMouseUp:me.stopHold,onMouseLeave:me.stopHold,onTouchStart:me.startHold,onTouchEnd:me.stopHold,className:"flex items-center justify-center w-5 h-5 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:o.jsx(jn,{size:10,className:"text-gray-700 dark:text-gray-300"})})]})]}),o.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 px-3 py-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(am,{size:14,className:"text-gray-600 dark:text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:Y("labelSize")})]}),o.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-700 rounded px-1 py-0.5",children:[o.jsx("button",{onClick:()=>le(Math.max(.5,W-.1)),onMouseDown:ve.startHold,onMouseUp:ve.stopHold,onMouseLeave:ve.stopHold,onTouchStart:ve.startHold,onTouchEnd:ve.stopHold,className:"flex items-center justify-center w-5 h-5 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:o.jsx(ir,{size:10,className:"text-gray-700 dark:text-gray-300"})}),o.jsxs("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 min-w-[2.5rem] text-center",children:[W.toFixed(1),"x"]}),o.jsx("button",{onClick:()=>le(Math.min(2,W+.1)),onMouseDown:Ne.startHold,onMouseUp:Ne.stopHold,onMouseLeave:Ne.stopHold,onTouchStart:Ne.startHold,onTouchEnd:Ne.stopHold,className:"flex items-center justify-center w-5 h-5 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:o.jsx(jn,{size:10,className:"text-gray-700 dark:text-gray-300"})})]})]}),o.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 px-3 py-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(pl,{size:14,className:"text-gray-600 dark:text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:Y("lineThickness")})]}),o.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-700 rounded px-1 py-0.5",children:[o.jsx("button",{onClick:()=>z(Math.max(.5,C-.1)),onMouseDown:Te.startHold,onMouseUp:Te.stopHold,onMouseLeave:Te.stopHold,onTouchStart:Te.startHold,onTouchEnd:Te.stopHold,className:"flex items-center justify-center w-5 h-5 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:o.jsx(ir,{size:10,className:"text-gray-700 dark:text-gray-300"})}),o.jsxs("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 min-w-[2.5rem] text-center",children:[C.toFixed(1),"x"]}),o.jsx("button",{onClick:()=>z(Math.min(5,C+.1)),onMouseDown:$e.startHold,onMouseUp:$e.stopHold,onMouseLeave:$e.stopHold,onTouchStart:$e.startHold,onTouchEnd:$e.stopHold,className:"flex items-center justify-center w-5 h-5 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:o.jsx(jn,{size:10,className:"text-gray-700 dark:text-gray-300"})})]})]}),o.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 px-3 py-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(X0,{size:14,className:"text-gray-600 dark:text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:Y("gridThickness")})]}),o.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-700 rounded px-1 py-0.5",children:[o.jsx("button",{onClick:()=>F(Math.max(.5,K-.1)),onMouseDown:Xe.startHold,onMouseUp:Xe.stopHold,onMouseLeave:Xe.stopHold,onTouchStart:Xe.startHold,onTouchEnd:Xe.stopHold,className:"flex items-center justify-center w-5 h-5 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:o.jsx(ir,{size:10,className:"text-gray-700 dark:text-gray-300"})}),o.jsxs("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 min-w-[2.5rem] text-center",children:[K.toFixed(1),"x"]}),o.jsx("button",{onClick:()=>F(Math.min(5,K+.1)),onMouseDown:f.startHold,onMouseUp:f.stopHold,onMouseLeave:f.stopHold,onTouchStart:f.startHold,onTouchEnd:f.stopHold,className:"flex items-center justify-center w-5 h-5 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:o.jsx(jn,{size:10,className:"text-gray-700 dark:text-gray-300"})})]})]}),o.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 px-3 py-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(rh,{size:14,className:"text-gray-600 dark:text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:Y("gridOpacity")})]}),o.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-700 rounded px-1 py-0.5",children:[o.jsx("button",{onClick:()=>U(Math.max(.1,D-.1)),onMouseDown:q.startHold,onMouseUp:q.stopHold,onMouseLeave:q.stopHold,onTouchStart:q.startHold,onTouchEnd:q.stopHold,className:"flex items-center justify-center w-5 h-5 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:o.jsx(ir,{size:10,className:"text-gray-700 dark:text-gray-300"})}),o.jsxs("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 min-w-[2.5rem] text-center",children:[D.toFixed(1),"x"]}),o.jsx("button",{onClick:()=>U(Math.min(1,D+.1)),onMouseDown:Z.startHold,onMouseUp:Z.stopHold,onMouseLeave:Z.stopHold,onTouchStart:Z.startHold,onTouchEnd:Z.stopHold,className:"flex items-center justify-center w-5 h-5 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:o.jsx(jn,{size:10,className:"text-gray-700 dark:text-gray-300"})})]})]})]}),o.jsxs("button",{onClick:()=>jr(!we),className:"flex items-center gap-2 bg-white dark:bg-gray-800 px-4 py-2 rounded-lg shadow-md text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border border-gray-200 dark:border-gray-700",children:[o.jsx(K0,{size:16}),o.jsx("span",{className:"font-medium",children:Y("canvasStyle")}),we?o.jsx(Lr,{size:16}):o.jsx(Jr,{size:16})]}),o.jsxs("div",{className:"flex gap-3 items-center",children:[o.jsxs("button",{onClick:ki,disabled:e.length===0,className:"flex items-center gap-2 bg-white dark:bg-gray-800 px-4 py-2 rounded-lg shadow-md text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed border border-gray-200 dark:border-gray-700",children:[o.jsx(em,{size:16}),o.jsx("span",{children:Y("centerView")})]}),o.jsxs("div",{className:"flex gap-0 rounded-lg overflow-hidden shadow-md border border-gray-200 dark:border-gray-700",children:[o.jsx("button",{onClick:()=>Et(v-.15),onMouseDown:()=>un(-1),onMouseUp:nt,onMouseLeave:nt,onTouchStart:()=>un(-1),onTouchEnd:nt,className:"flex items-center justify-center w-10 h-10 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:`${Y("zoomOut")} (${Y("shiftScroll")})`,children:o.jsx(sm,{size:16})}),o.jsx("button",{onClick:()=>Et(v+.15),onMouseDown:()=>un(1),onMouseUp:nt,onMouseLeave:nt,onTouchStart:()=>un(1),onTouchEnd:nt,className:"flex items-center justify-center w-10 h-10 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:`${Y("zoomIn")} (${Y("shiftScroll")})`,children:o.jsx(im,{size:16})})]})]}),s==="createLine"&&Le.length>=2&&o.jsxs("button",{onClick:fn,className:"flex items-center gap-2 bg-green-500 text-white px-4 py-2 rounded-lg shadow-md text-sm hover:bg-green-600 transition-colors border border-green-500",children:[o.jsx(Cc,{size:16}),o.jsx("span",{children:Y("finishLine")})]}),s==="drawPath"&&ht.length>=2&&o.jsxs("button",{onClick:vi,className:"flex items-center gap-2 bg-green-500 text-white px-4 py-2 rounded-lg shadow-md text-sm hover:bg-green-600 transition-colors border border-green-500",children:[o.jsx(Cc,{size:16}),o.jsx("span",{children:Y("finishLine")})]})]}),vn&&lt&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30 z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 max-w-md w-full mx-4",children:[o.jsx("h3",{className:"text-base font-bold text-gray-800 dark:text-gray-200 mb-2",children:Y("createLoopLine")}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:Y("selectLoopStation")}),o.jsxs("div",{className:"flex gap-2 mb-3",children:[o.jsx("button",{onClick:()=>Wn("first"),className:"flex-1 px-3 py-2 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:lt.line.color}}),o.jsx("span",{className:"font-medium text-sm",children:lt.firstStation.name})]}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:Y("firstStation")})]})}),o.jsx("button",{onClick:()=>Wn("last"),className:"flex-1 px-3 py-2 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:lt.line.color}}),o.jsx("span",{className:"font-medium text-sm",children:lt.lastStation.name})]}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:Y("lastStation")})]})})]}),o.jsx("button",{onClick:()=>Wn("cancel"),className:"w-full px-3 py-2 bg-transparent hover:bg-gray-50 dark:hover:bg-gray-700/50 text-gray-600 dark:text-gray-300 rounded-lg transition-colors text-sm border border-gray-300 dark:border-gray-600",children:Y("cancel")})]})})]})});fh.displayName="MapEditor";const Nm=({currentTool:e,onToolChange:t,onShowApiKey:n,hasApiKey:r,isDarkMode:a,onToggleDarkMode:i,gridZoom:s,onGridZoomChange:l,onReset:u,language:p,onLanguageChange:v,lineStyle:k,onLineStyleChange:y,onUndo:g,onRedo:w,canUndo:m,canRedo:b,isMobile:c,showMobileHeader:d,onToggleMobileHeader:x,showStationNumbers:N,onToggleStationNumbers:j})=>{var le;const{t:M}=Yr(p),[A,H]=O.useState(!1),$=O.useRef(null),W=[{id:"select",icon:Pc,label:M("selectTool")},{id:"station",icon:Ns,label:M("addStationTool")},{id:"createLine",icon:pl,label:M("createTrainLineTool")},{id:"drawPath",icon:Mc,label:M("drawPathTool")}];return O.useEffect(()=>{const C=z=>{$.current&&!$.current.contains(z.target)&&H(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),o.jsxs("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-2 md:px-4 py-2 md:py-3 transition-colors",children:[o.jsxs("div",{className:"hidden md:flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>window.location.reload(),className:"text-xl font-bold text-gray-800 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 transition-all duration-200 hover:scale-105 cursor-pointer",title:"Refresh page",children:M("appTitle")}),o.jsxs("div",{className:"flex gap-0 border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden",style:{backgroundColor:"var(--toolbar-group-bg)"},children:[o.jsxs("button",{onClick:()=>t("select"),className:`flex items-center gap-2 px-4 py-2 transition-colors ${e==="select"?"btn-selected":"btn-unselected"}`,children:[o.jsx(Pc,{size:18}),o.jsx("span",{className:"text-sm font-medium",children:M("selectTool")})]}),o.jsxs("button",{onClick:()=>t("createLine"),className:`flex items-center gap-2 px-4 py-2 transition-colors ${e==="createLine"?"btn-selected":"btn-unselected"}`,children:[o.jsx(pl,{size:18}),o.jsx("span",{className:"text-sm font-medium",children:M("createTrainLineTool")})]}),(e==="createLine"||e==="station"||e==="drawPath")&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>t("station"),className:`flex items-center gap-2 px-4 py-2 transition-colors ${e==="station"?"btn-selected":"btn-unselected"}`,children:[o.jsx(Ns,{size:18}),o.jsx("span",{className:"text-sm font-medium",children:M("addStationTool")})]}),o.jsxs("button",{onClick:()=>t("drawPath"),className:`flex items-center gap-2 px-4 py-2 transition-colors ${e==="drawPath"?"btn-selected":"btn-unselected"}`,children:[o.jsx(Mc,{size:18}),o.jsx("span",{className:"text-sm font-medium",children:M("drawPathTool")})]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex items-center gap-1",children:o.jsx("button",{onClick:j,className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${N?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:M(N?"hideStationNumbers":"showStationNumbers"),children:o.jsx(Q0,{size:18})})}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:g,disabled:!m,className:"flex items-center justify-center w-9 h-9 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors disabled:opacity-40 disabled:cursor-not-allowed",title:M("undo"),children:o.jsx(Dc,{size:18})}),o.jsx("button",{onClick:w,disabled:!b,className:"flex items-center justify-center w-9 h-9 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors disabled:opacity-40 disabled:cursor-not-allowed",title:M("redo"),children:o.jsx(Lc,{size:18})})]}),o.jsx("button",{onClick:u,className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",title:M("resetToDefault"),children:o.jsx(ah,{size:18})}),o.jsxs("div",{className:"relative",ref:$,children:[o.jsxs("button",{onClick:()=>H(!A),className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",title:"Language",children:[o.jsx(Z0,{size:18}),o.jsx("span",{className:"text-lg",children:(le=Uc.find(C=>C.code===p))==null?void 0:le.flag})]}),A&&o.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 py-1 z-[100]",children:Uc.map(C=>o.jsxs("button",{onClick:()=>{v(C.code),H(!1)},className:`w-full flex items-center gap-3 px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${p===C.code?"bg-blue-50 dark:bg-blue-900/30":""}`,children:[o.jsx("span",{className:"text-xl",children:C.flag}),o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap",children:C.name})]},C.code))})]}),o.jsx("button",{onClick:i,className:"flex items-center justify-center w-10 h-10 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",title:M(a?"switchToLightMode":"switchToDarkMode"),children:o.jsx("i",{className:`${a?"ri-sun-fill":"ri-moon-fill"} text-lg`})}),o.jsxs("button",{onClick:n,className:`flex items-center gap-2 px-2 md:px-4 py-2 rounded-lg transition-colors ${r?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800":"bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-300 hover:bg-orange-200 dark:hover:bg-orange-800"}`,children:[o.jsx(jc,{size:18}),o.jsx("span",{className:"text-sm font-medium",children:M(r?"apiKeySet":"setApiKey")})]})]})]}),o.jsxs("div",{className:"md:hidden flex items-center justify-between gap-2",children:[o.jsx("div",{className:"flex gap-1",children:W.map(C=>o.jsx("button",{onClick:()=>t(C.id),className:`flex items-center justify-center w-10 h-10 rounded-lg transition-colors ${e===C.id?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,title:C.label,children:o.jsx(C.icon,{size:18})},C.id))}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:g,disabled:!m,className:"flex items-center justify-center w-9 h-9 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors disabled:opacity-40",title:M("undo"),children:o.jsx(Dc,{size:16})}),o.jsx("button",{onClick:w,disabled:!b,className:"flex items-center justify-center w-9 h-9 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors disabled:opacity-40",title:M("redo"),children:o.jsx(Lc,{size:16})}),o.jsx("button",{onClick:i,className:"flex items-center justify-center w-9 h-9 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:o.jsx("i",{className:`${a?"ri-sun-fill":"ri-moon-fill"}`})}),o.jsx("button",{onClick:n,className:`flex items-center justify-center w-9 h-9 rounded-lg ${r?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:o.jsx(jc,{size:16})}),o.jsx("button",{onClick:x,className:"flex items-center justify-center w-9 h-9 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:o.jsx(Lr,{size:16})})]})]})]})},Cm=({onSave:e,onClose:t,initialKey:n,language:r="en"})=>{const{t:a}=Yr(r),[i,s]=O.useState(n),[l,u]=O.useState(!1),p=()=>{i.trim()&&e(i.trim())},v=k=>{k.target===k.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:v,children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-gray-200",children:a("elevenLabsApiKey")}),o.jsx("button",{onClick:t,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:o.jsx(Xn,{size:20})})]}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:a("apiKeyDescription")}),o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:l?"text":"password",value:i,onChange:k=>s(k.target.value),placeholder:a("apiKeyPlaceholder"),className:"w-full px-4 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.jsx("button",{onClick:()=>u(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:l?o.jsx(nh,{size:18}):o.jsx(rh,{size:18})})]})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:p,disabled:!i.trim(),className:"flex-1 bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition-colors disabled:bg-gray-300 dark:disabled:bg-gray-600 disabled:cursor-not-allowed",children:a("saveKey")}),o.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:a("cancel")})]}),o.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:[a("getApiKeyFrom")," ",o.jsx("a",{href:"https://elevenlabs.io",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"elevenlabs.io"})]})]})})},jm=({onLoadPreset:e,currentPresetId:t,language:n="en",isMobile:r,onClose:a,customTransitSystems:i=[],setCustomTransitSystems:s,onCreateEmpty:l})=>{const{t:u}=Yr(n),v=[...i,...Fr].find(y=>y.id===t),k=(y,g)=>{if(y.stopPropagation(),s){if(g===t){const w=Fr.find(m=>m.id==="simple");w&&e&&e(w)}s(w=>w.filter(m=>m.id!==g))}};return o.jsxs("div",{className:"w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col h-full",children:[o.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h2",{className:"text-lg font-bold text-gray-800 dark:text-gray-200 flex items-center gap-2",children:[o.jsx(q0,{size:20}),u("trainLinePresets")]}),r&&a&&o.jsx("button",{onClick:a,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",children:o.jsx(Xn,{size:20,className:"text-gray-600 dark:text-gray-400"})})]}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:u("loadPresetHint")})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between px-1 mb-2",children:[o.jsx("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:u("custom")}),l&&o.jsx("button",{onClick:l,className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",title:u("createEmpty"),children:o.jsx(jn,{size:14,className:"text-gray-600 dark:text-gray-400"})})]}),i.length>0&&o.jsx(o.Fragment,{children:i.map(y=>o.jsxs("div",{className:"relative group",children:[o.jsx("button",{onClick:g=>k(g,y.id),className:"absolute left-0 top-0 bottom-0 w-4 hover:bg-red-100 dark:hover:bg-red-900/20 rounded opacity-0 group-hover:opacity-100 transition-all flex items-center justify-center z-10 -ml-4",style:{marginLeft:"-1rem"},title:u("delete"),children:o.jsx(Xn,{size:12,className:"text-red-500"})}),o.jsx("button",{onClick:()=>e(y),className:`w-full text-left p-3 rounded-lg transition-all hover:border-blue-400 hover:shadow-md relative ${t===y.id?"btn-selected":"btn-unselected"}`,children:o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 text-sm",children:y.isCopy?`${u(y.nameKey||y.name)} (${u("copy")})`:y.name}),o.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:t===y.id?o.jsx("div",{className:"px-2 py-1 bg-blue-500 text-white text-xs rounded",children:u("active")}):o.jsx(Sc,{size:16,className:"text-gray-400 dark:text-gray-500"})})]}),o.jsxs("div",{className:"flex items-start justify-between mt-0.5",children:[o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 flex-1",children:y.isCopy&&y.descriptionKey?u(y.descriptionKey):y.description}),o.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500 dark:text-gray-400 ml-2 flex-shrink-0 self-end",children:[o.jsx(hl,{size:12}),o.jsxs("span",{children:[y.stations.length," ",u("stations")]})]})]})]})})]},y.id))}),o.jsx("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide px-1 pt-2",children:u("presets")}),Fr.map(y=>o.jsx("button",{onClick:()=>e(y),className:`w-full text-left p-3 rounded-lg transition-all hover:border-blue-400 hover:shadow-md ${t===y.id?"btn-selected":"btn-unselected"}`,children:o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 text-sm",children:u(y.name)}),t===y.id?o.jsx("div",{className:"px-2 py-1 bg-blue-500 text-white text-xs rounded flex-shrink-0",children:u("active")}):o.jsx(Sc,{size:16,className:"text-gray-400 dark:text-gray-500 flex-shrink-0"})]}),o.jsxs("div",{className:"flex items-start justify-between mt-0.5",children:[o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 flex-1",children:u(y.description)}),o.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500 dark:text-gray-400 ml-2 flex-shrink-0 self-end",children:[o.jsx(hl,{size:12}),o.jsxs("span",{children:[y.stations.length," ",u("stations")]})]})]})]})},y.id))]}),o.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 flex-shrink-0",children:v&&v.fullDescription?o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:v.isCopy&&v.fullDescriptionKey?u(v.fullDescriptionKey):u(v.fullDescription)}):o.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[" ",u("clickPresetToLoad")]})})]})},Em=({onClose:e,onCreate:t,language:n="en",lineStyle:r="smooth"})=>{const{t:a}=Yr(n),[i,s]=O.useState(7),[l,u]=O.useState("New Transit System"),[p,v]=O.useState("#8b5cf6"),[k,y]=O.useState(!1),[g,w]=O.useState(!1),[m,b]=O.useState(!1),[c,d]=O.useState("line"),[x,N]=O.useState(0),[j,M]=O.useState([]),A=K=>{K.target===K.currentTarget&&e()},H=()=>{const U=j.map(X=>({gridIndexX:Math.round(3+X.x*17),gridIndexY:Math.round(3+X.y*17)}));t(i,l,p,k,U)},$=()=>{var D;w(!0),setTimeout(()=>w(!1),200);const K=((D=fr[n])==null?void 0:D.lineNamePresets)||fr.en.lineNamePresets,F=K[Math.floor(Math.random()*K.length)];u(F)},W=()=>{b(!0),setTimeout(()=>b(!1),200);const K=Math.floor(Math.random()*360),F=Math.floor(Math.random()*60)+20,D=Math.floor(Math.random()*60)+20;v(((X,T,L)=>{T/=100,L/=100;const Y=T*Math.min(L,1-L),ee=te=>{const pe=(te+X/30)%12,ke=L-Y*Math.max(Math.min(pe-3,9-pe,1),-1);return Math.round(255*ke).toString(16).padStart(2,"0")};return`#${ee(0)}${ee(8)}${ee(4)}`})(K,F,D))},le=()=>{s(K=>Math.min(K+1,50))},C=()=>{s(K=>Math.max(K-1,0))},z=(K,F,D,U=0)=>{if(K===0)return[];const X=[],T=.5,L=.5;if(F){const Y=2*Math.PI/K;if(D==="line")for(let te=0;te<K;te++){const pe=te*Y-Math.PI/2;X.push({x:T+.35*Math.cos(pe),y:L+.35*Math.sin(pe)})}else if(D==="curve")for(let pe=0;pe<K;pe++){const ke=pe*Y-Math.PI/2;X.push({x:T+.4*Math.cos(ke),y:L+.3*Math.sin(ke)})}else if(D==="s")for(let pe=0;pe<K;pe++){const ke=pe/K;let me,ve;if(ke<.25){const Ne=ke/.25;me=T-.35+Ne*(.35*2),ve=L-.25}else if(ke<.5){const Ne=(ke-.25)/.25;me=T+.35,ve=L-.25+Ne*(.25*2)}else if(ke<.75){const Ne=(ke-.5)/.25;me=T+.35-Ne*(.35*2),ve=L+.25}else{const Ne=(ke-.75)/.25;me=T-.35,ve=L+.25-Ne*(.25*2)}X.push({x:me,y:ve})}else for(let te=0;te<K;te++){const pe=te*Y-Math.PI/2,me=.35*(.85+Math.random()*.3),ve=(Math.random()-.5)*.1;X.push({x:T+me*Math.cos(pe+ve),y:L+me*Math.sin(pe+ve)})}}else if(D==="line")for(let Y=0;Y<K;Y++){const ee=Y/(K-1||1);X.push({x:.1+ee*.8,y:L})}else if(D==="curve")for(let Y=0;Y<K;Y++){const ee=Y/(K-1||1);X.push({x:.1+ee*.8,y:L+Math.pow(ee-.5,2)*.2*4})}else if(D==="s")for(let Y=0;Y<K;Y++){const ee=Y/(K-1||1);X.push({x:.15+ee*.7,y:L+Math.sin(ee*Math.PI*2-Math.PI/2)*.2})}else{const Y=.1+Math.random()*.15,ee=.2+Math.random()*.3,te=.6+Math.random()*.25,pe=.2+Math.random()*.6;for(let ke=0;ke<K;ke++){const me=ke/(K-1||1),ve=(Math.random()-.5)*.12,Ne=.7+Math.random()*.6,Te=Math.pow(me,Ne);X.push({x:Y+(te-Y)*Te+ve,y:ee+(pe-ee)*Te+ve})}}if(U!==0){const Y=U*Math.PI/180,ee=Math.cos(Y),te=Math.sin(Y);return X.map(pe=>{const ke=pe.x-T,me=pe.y-L;return{x:T+ke*ee-me*te,y:L+ke*te+me*ee}})}return X};O.useMemo(()=>{M(z(i,k,c,x))},[i,k,c,x]);const h=K=>{K===c&&K!=="random"?N(F=>(F+90)%360):K==="random"?(d(K),N(Math.floor(Math.random()*4)*90)):(d(K),N(0))},V=()=>{if(j.length<2)return"";if(r==="direct")return j.map((F,D)=>D===0?`M ${F.x},${F.y}`:`L ${F.x},${F.y}`).join(" ")+(k?" Z":"");if(r==="minimal"){const K=[`M ${j[0].x},${j[0].y}`];for(let F=1;F<j.length;F++){const D=j[F-1],U=j[F],X=Math.abs(U.x-D.x),T=Math.abs(U.y-D.y);X>T?(K.push(`L ${U.x},${D.y}`),K.push(`L ${U.x},${U.y}`)):(K.push(`L ${D.x},${U.y}`),K.push(`L ${U.x},${U.y}`))}if(k){const F=j[0],D=j[j.length-1],U=Math.abs(F.x-D.x),X=Math.abs(F.y-D.y);U>X?K.push(`L ${F.x},${D.y}`):K.push(`L ${D.x},${F.y}`),K.push("Z")}return K.join(" ")}else{const K=[`M ${j[0].x},${j[0].y}`];for(let F=0;F<j.length-1;F++){const D=j[Math.max(0,F-1)],U=j[F],X=j[F+1],T=j[Math.min(j.length-1,F+2)],L=U.x+(X.x-D.x)/6,Y=U.y+(X.y-D.y)/6,ee=X.x-(T.x-U.x)/6,te=X.y-(T.y-U.y)/6;K.push(`C ${L},${Y} ${ee},${te} ${X.x},${X.y}`)}return k&&K.push("Z"),K.join(" ")}};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:A,children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-gray-200",children:a("createCustomLine")}),o.jsx("button",{onClick:e,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:o.jsx(Xn,{size:20})})]}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:a("createCustomLineDescription")}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:a("name")}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx("input",{type:"text",value:l,onChange:K=>u(K.target.value),className:"w-full px-4 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.jsx("button",{onClick:$,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",title:a("randomizeName"),children:o.jsx(Cs,{size:16,className:`transition-transform ${g?"animate-shuffle":""}`})})]}),o.jsxs("div",{className:"flex",children:[o.jsx("label",{className:"relative w-10 h-10 rounded-l-lg border border-r-0 border-gray-300 dark:border-gray-600 cursor-pointer overflow-hidden hover:opacity-80 transition-opacity flex-shrink-0",style:{backgroundColor:p},children:o.jsx("input",{type:"color",value:p,onChange:K=>v(K.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})}),o.jsx("button",{onClick:W,className:"flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-r-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",title:a("randomizeColor"),children:o.jsx(Cs,{size:16,className:`text-gray-700 dark:text-gray-300 transition-transform ${m?"animate-shuffle":""}`})})]})]})]}),o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a("stations")}),o.jsxs("div",{className:"flex",children:[o.jsx("button",{onClick:C,className:"w-10 h-10 flex items-center justify-center rounded-l-lg border border-r-0 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",disabled:i<=0,children:o.jsx(ir,{size:16,className:"text-gray-700 dark:text-gray-300"})}),o.jsx("input",{type:"number",value:i,onChange:K=>{const F=parseInt(K.target.value)||0;s(Math.max(0,Math.min(50,F)))},min:"0",max:"50",className:"w-16 h-10 px-2 text-center border-t border-b border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:z-10 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),o.jsx("button",{onClick:le,className:"w-10 h-10 flex items-center justify-center rounded-r-lg border border-l-0 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",disabled:i>=50,children:o.jsx(jn,{size:16,className:"text-gray-700 dark:text-gray-300"})})]})]})}),o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a("loopLine")}),o.jsx("button",{type:"button",role:"switch","aria-checked":k,onClick:()=>y(!k),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${k?"bg-blue-500":"bg-gray-300 dark:bg-gray-600"}`,children:o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${k?"translate-x-6":"translate-x-1"}`})})]})}),i>0&&o.jsxs("div",{className:"mb-1",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:a("pathShape")}),o.jsxs("div",{className:"grid grid-cols-4 gap-1",children:[o.jsx("button",{onClick:()=>h("line"),className:`px-3 py-2 text-xs rounded-lg border transition-colors ${c==="line"?"bg-blue-500 text-white border-blue-500":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:a("pathLine")}),o.jsx("button",{onClick:()=>h("curve"),className:`px-3 py-2 text-xs rounded-lg border transition-colors ${c==="curve"?"bg-blue-500 text-white border-blue-500":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:a("pathCurve")}),o.jsx("button",{onClick:()=>h("s"),className:`px-3 py-2 text-xs rounded-lg border transition-colors ${c==="s"?"bg-blue-500 text-white border-blue-500":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:a("pathS")}),o.jsx("button",{onClick:()=>h("random"),className:`px-3 py-2 text-xs rounded-lg border transition-colors ${c==="random"?"bg-blue-500 text-white border-blue-500":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:a("pathRandom")})]})]}),i>0&&o.jsx("div",{className:"mb-4 relative",children:o.jsx("div",{className:"relative w-full h-32 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-300 dark:border-gray-600 overflow-hidden",children:o.jsxs("svg",{viewBox:"0 0 1 1",preserveAspectRatio:"xMidYMid meet",className:"w-full h-full",children:[j.length>1&&o.jsx("path",{d:V(),stroke:p,strokeWidth:"0.015",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),j.map((K,F)=>o.jsx("circle",{cx:K.x,cy:K.y,r:"0.025",fill:"white",stroke:p,strokeWidth:"0.008"},F))]})})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:H,className:"flex-1 bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition-colors",children:a("create")}),o.jsx("button",{onClick:e,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:a("cancel")})]})]})})};function Pm(){const[e,t]=O.useState([]),[n,r]=O.useState([]),[a,i]=O.useState([]),[s,l]=O.useState({}),[u,p]=O.useState({}),[v,k]=O.useState({}),[y,g]=O.useState([]),[w,m]=O.useState({}),[b,c]=O.useState("select"),[d,x]=O.useState([]),[N,j]=O.useState(sessionStorage.getItem("elevenLabsApiKey")||""),[M,A]=O.useState(!1),[H,$]=O.useState(null),[W,le]=O.useState(()=>localStorage.getItem("darkMode")==="true"),[C,z]=O.useState(1),[h,V]=O.useState(1),[K,F]=O.useState(1),[D,U]=O.useState(1),[X,T]=O.useState(1),[L,Y]=O.useState(1),[ee,te]=O.useState(()=>localStorage.getItem("language")||"en"),[pe,ke]=O.useState(!1),[me,ve]=O.useState(!1),[Ne,Te]=O.useState(!1),[$e,Xe]=O.useState(!0),[f,q]=O.useState(()=>localStorage.getItem("lineStyle")||"smooth"),[Z,E]=O.useState(()=>localStorage.getItem("gridStyle")||"dots"),[_,I]=O.useState([]),[ne,ae]=O.useState(-1),G=O.useRef(-1),ie=O.useRef(null),[he,oe]=O.useState(!1),[ge,Ee]=O.useState(null),[Se,Qe]=O.useState(null),[At,at]=O.useState(!1),[ft,Fe]=O.useState(!1),[Ut,Le]=O.useState(""),[it,ht]=O.useState(null),[pt,kt]=O.useState(()=>localStorage.getItem("audioProcessingPreset")||"standard"),[on,mt]=O.useState(()=>{const de=localStorage.getItem("customTransitSystems");return de?JSON.parse(de):[]}),[Mn,vn]=O.useState(!1),[Dt,lt]=O.useState(!1),[Cr,Qt]=O.useState(!1);O.useEffect(()=>{const de=Fr.find(xe=>xe.id==="simple");de&&e.length===0&&we(de)},[]),O.useEffect(()=>{localStorage.setItem("darkMode",W.toString());const de=document.documentElement,xe=document.body;de.classList.remove("dark"),xe&&xe.classList.remove("dark"),W&&(de.classList.add("dark"),xe&&xe.classList.add("dark"))},[W]),O.useEffect(()=>{localStorage.setItem("language",ee)},[ee]),O.useEffect(()=>{localStorage.setItem("lineStyle",f)},[f]),O.useEffect(()=>{localStorage.setItem("gridStyle",Z)},[Z]),O.useEffect(()=>{localStorage.setItem("audioProcessingPreset",pt)},[pt]),O.useEffect(()=>{localStorage.setItem("customTransitSystems",JSON.stringify(on))},[on]),O.useEffect(()=>{const de=()=>ke(window.innerWidth<768);return de(),window.addEventListener("resize",de),()=>window.removeEventListener("resize",de)},[]);const Un=O.useCallback(de=>{sessionStorage.setItem("elevenLabsApiKey",de),j(de),A(!1)},[]),we=O.useCallback(de=>{lt(!0);const xe=30,Pe=30*C,Pt=de.stations.map(Je=>{const qe=Je.gridIndexX??Math.round(Je.x/xe),dn=Je.gridIndexY??Math.round(Je.y/xe);return{...Je,gridIndexX:qe,gridIndexY:dn,x:qe*Pe,y:dn*Pe}}),Be={},bt=de.audioAssignments||{};Object.keys(bt).forEach(Je=>{const qe=bt[Je];qe.filename?Be[Je]={...qe,url:uh(qe.filename)}:Be[Je]=qe});const Jt=Be,Rt=de.announcementTypes||{},gt=de.betweenSegments||{},yt=de.uploadedAudios||[],cn={};t(Pt),r(de.lines),l(Jt),p(Rt),k(gt),g(yt),m(cn),I([{stations:Pt,lines:de.lines,audioAssignments:Jt,announcementTypes:Rt,betweenSegments:gt,uploadedAudios:yt,generatedAudioHistory:cn}]),ae(0),$(de.id),x([]),vn(de.isCustom||!1),setTimeout(()=>{var Je;(Je=ie.current)!=null&&Je.centerView&&ie.current.centerView(!1),lt(!1)},150),i([])},[C]),jr=()=>{le(!W)},be=O.useCallback((de,xe,Pe,Pt,Be,bt,Jt)=>{Dt||vn(Rt=>($(gt=>{const yt=de??e,cn=xe??n,Je=Pe??s,qe=Pt??u,dn=Be??v,Er=bt??y,qt=Jt??w;if(Rt)return mt(Ht=>Ht.map(fn=>fn.id===gt?{...fn,stations:structuredClone(yt),lines:structuredClone(cn),audioAssignments:structuredClone(Je),announcementTypes:structuredClone(qe),betweenSegments:structuredClone(dn),uploadedAudios:structuredClone(Er),generatedAudioHistory:structuredClone(qt)}:fn)),gt;const St=Fr.find(Ht=>Ht.id===gt);if(!St)return gt;const Hn=`custom-${Date.now()}`,rr=cn.map(Ht=>({...Ht,name:`${Ht.name} (Copy)`})),Wn={id:Hn,name:St.name,nameKey:St.name,isCopy:!0,description:St.description||"Custom",descriptionKey:St.description,fullDescription:St.fullDescription,fullDescriptionKey:St.fullDescription,stations:structuredClone(yt),lines:structuredClone(rr),audioAssignments:structuredClone(Je),announcementTypes:structuredClone(qe),betweenSegments:structuredClone(dn),uploadedAudios:structuredClone(Er),generatedAudioHistory:structuredClone(qt),isCustom:!0};return mt(Ht=>[Wn,...Ht]),r(rr),Hn}),!0))},[Dt,e,n,s,u,v,y,w]),Ue=O.useCallback((de,xe,Pe,Pt,Be=[])=>{const bt=Date.now(),Jt=30,Rt=3,gt=20;let yt=[],cn=[];if(de>0){const qe=[];yt=Array.from({length:de},(Er,qt)=>{let St,Bn;Be.length>qt?(St=Be[qt].gridIndexX,Bn=Be[qt].gridIndexY):(St=Rt+Math.floor(Math.random()*(gt-Rt)),Bn=Rt+Math.floor(Math.random()*(gt-Rt)));const Hn=`station-${bt}-${qt}`;return qe.push(Hn),{id:Hn,name:`Station ${qt+1}`,gridIndexX:St,gridIndexY:Bn,x:St*Jt,y:Bn*Jt,color:Pe,lineId:`line-${bt}`,index:qt}});const dn=Pt?[...qe,qe[0]]:qe;cn=[{id:`line-${bt}`,name:xe,color:Pe,stations:dn}]}const Je={id:`custom-${bt}`,name:xe,description:"Custom",fullDescription:"Custom transit system",stations:yt,lines:cn,audioAssignments:{},announcementTypes:{},betweenSegments:{},uploadedAudios:[],generatedAudioHistory:{},isCustom:!0};mt(qe=>[Je,...qe]),we(Je),Qt(!1)},[we]);O.useEffect(()=>{G.current=ne},[ne]);const Me=O.useCallback((de,xe,Pe,Pt,Be,bt,Jt)=>{const Rt={stations:structuredClone(de),lines:structuredClone(xe),audioAssignments:structuredClone(Pe),announcementTypes:structuredClone(Pt),betweenSegments:structuredClone(Be),uploadedAudios:structuredClone(bt),generatedAudioHistory:structuredClone(Jt)};I(gt=>{const yt=gt.slice(0,G.current+1);return yt.push(Rt),yt.length>100&&yt.shift(),yt}),ae(gt=>Math.min(gt+1,99))},[]),ln=O.useCallback(de=>{typeof de=="function"?t(xe=>{const Pe=de(xe);return be(Pe,n,s,u,v,y,w),Me(Pe,n,s,u,v,y,w),Pe}):(be(de,n,s,u,v,y,w),Me(de,n,s,u,v,y,w),t(de))},[n,s,u,v,y,w,Me,be]),Re=O.useCallback(de=>{typeof de=="function"?r(xe=>{const Pe=de(xe);return be(e,Pe,s,u,v,y,w),Me(e,Pe,s,u,v,y,w),Pe}):(be(e,de,s,u,v,y,w),Me(e,de,s,u,v,y,w),r(de))},[e,s,u,v,y,w,Me,be]),Bt=O.useCallback(de=>{typeof de=="function"?l(xe=>{const Pe=de(xe);return be(e,n,Pe,u,v,y,w),Me(e,n,Pe,u,v,y,w),Pe}):(be(e,n,de,u,v,y,w),Me(e,n,de,u,v,y,w),l(de))},[e,n,u,v,y,w,Me,be]),kn=O.useCallback(de=>{typeof de=="function"?p(xe=>{const Pe=de(xe);return Me(e,n,s,Pe,v,y,w),Pe}):(Me(e,n,s,de,v,y,w),p(de))},[e,n,s,v,y,w,Me]),je=O.useCallback(de=>{typeof de=="function"?k(xe=>{const Pe=de(xe);return Me(e,n,s,u,Pe,y,w),Pe}):(Me(e,n,s,u,de,y,w),k(de))},[e,n,s,u,y,w,Me]),Tn=O.useCallback(de=>{typeof de=="function"?g(xe=>{const Pe=de(xe);return Me(e,n,s,u,v,Pe,w),Pe}):(Me(e,n,s,u,v,de,w),g(de))},[e,n,s,u,v,w,Me]),Et=O.useCallback(de=>{typeof de=="function"?m(xe=>{const Pe=de(xe);return Me(e,n,s,u,v,y,Pe),Pe}):(Me(e,n,s,u,v,y,de),m(de))},[e,n,s,u,v,y,Me]),un=O.useCallback((de,xe)=>{const Pe=typeof de=="function"?de(e):de,Pt=typeof xe=="function"?xe(n):xe;be(Pe,Pt,s,u,v,y,w),Me(Pe,Pt,s,u,v,y,w),t(Pe),r(Pt)},[e,n,s,u,v,y,w,Me,be]),nt=()=>{if(ne>0){const de=ne-1;ae(de);const xe=_[de];t(xe.stations),r(xe.lines),l(xe.audioAssignments||{}),p(xe.announcementTypes||{}),k(xe.betweenSegments||{}),g(xe.uploadedAudios||[]),m(xe.generatedAudioHistory||{})}},wt=()=>{if(ne<_.length-1){const de=ne+1;ae(de);const xe=_[de];t(xe.stations),r(xe.lines),l(xe.audioAssignments||{}),p(xe.announcementTypes||{}),k(xe.betweenSegments||{}),g(xe.uploadedAudios||[]),m(xe.generatedAudioHistory||{})}},Kr=O.useCallback(()=>{const de=Fr.find(xe=>xe.id==="simple");de&&(we(de),z(1))},[we]),Zr=O.useCallback((de,xe)=>{Qe(de),at(xe)},[]);return o.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[(!pe||$e)&&o.jsx(Nm,{currentTool:b,onToolChange:c,onShowApiKey:()=>A(!0),hasApiKey:!!N,isDarkMode:W,onToggleDarkMode:jr,gridZoom:C,onGridZoomChange:z,onReset:Kr,language:ee,onLanguageChange:te,lineStyle:f,onLineStyleChange:q,onUndo:nt,onRedo:wt,canUndo:ne>0,canRedo:ne<_.length-1,isMobile:pe,showMobileHeader:$e,onToggleMobileHeader:()=>Xe(!$e),showStationNumbers:he,onToggleStationNumbers:()=>oe(!he)}),M&&o.jsx(Cm,{onSave:Un,onClose:()=>A(!1),initialKey:N,language:ee}),o.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[(!pe||me)&&o.jsx("div",{className:`${pe?"absolute left-0 top-0 bottom-0 z-20 w-64 shadow-xl":""}`,children:o.jsx(jm,{onLoadPreset:we,currentPresetId:H,language:ee,isMobile:pe,onClose:()=>ve(!1),customTransitSystems:on,setCustomTransitSystems:mt,onCreateEmpty:()=>Qt(!0)})}),o.jsxs("div",{className:"flex-1 border-r border-gray-200 dark:border-gray-700 relative",children:[o.jsx(fh,{ref:ie,stations:e,setStations:ln,setStationsNoHistory:t,lines:n,setLines:Re,setStationsAndLines:un,currentTool:b,setCurrentTool:c,selectedStations:d,setSelectedStations:x,gridZoom:C,onGridZoomChange:z,language:ee,lineStyle:f,onLineStyleChange:q,gridStyle:Z,onGridStyleChange:E,showStationNumbers:he,isMobile:pe,selectedStationId:ge,playingStationId:Se,isStationPlaying:At,showTranscription:ft,setShowTranscription:Fe,currentTranscription:Ut,selectedLineId:it,labelSize:h,onLabelSizeChange:V,lineThickness:K,onLineThicknessChange:F,markerSize:D,onMarkerSizeChange:U,gridThickness:X,onGridThicknessChange:T,gridOpacity:L,onGridOpacityChange:Y,currentPresetId:H,customTransitSystems:on}),pe&&o.jsxs("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2 z-10",children:[!$e&&o.jsx("button",{onClick:()=>Xe(!0),className:"bg-blue-500 text-white p-3 rounded-lg shadow-lg",title:"Show Menu",children:""}),o.jsx("button",{onClick:()=>ve(!me),className:"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 px-4 py-2 rounded-lg shadow-lg text-sm font-medium",children:me?"":""}),o.jsx("button",{onClick:()=>Te(!Ne),className:"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 px-4 py-2 rounded-lg shadow-lg text-sm font-medium",children:Ne?"":""})]})]}),(!pe||Ne)&&o.jsx("div",{className:`${pe?"absolute right-0 top-0 bottom-0 z-20 w-80 shadow-xl":"w-96"} flex flex-col bg-white dark:bg-gray-800`,children:o.jsx(_m,{stations:e,lines:n,announcements:a,setAnnouncements:i,audioAssignments:s,setAudioAssignments:Bt,announcementTypes:u,setAnnouncementTypes:kn,betweenSegments:v,setBetweenSegments:je,uploadedAudios:y,setUploadedAudios:Tn,generatedAudioHistory:w,setGeneratedAudioHistory:Et,apiKey:N,language:ee,isMobile:pe,onClose:()=>Te(!1),onStationSelect:Ee,selectedStationId:ge,showStationNumbers:he,onPlayingStationChange:Zr,showTranscription:ft,setShowTranscription:Fe,setCurrentTranscription:Le,audioProcessingPreset:pt,setAudioProcessingPreset:kt,selectedLineId:it,setSelectedLineId:ht})})]}),Cr&&o.jsx(Em,{onClose:()=>Qt(!1),onCreate:Ue,language:ee,lineStyle:f})]})}ko.createRoot(document.getElementById("root")).render(o.jsx(Eh.StrictMode,{children:o.jsx(Pm,{})}));
